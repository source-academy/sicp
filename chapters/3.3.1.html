<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" />
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-156801664-1");
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="3.3.1&nbsp;&nbsp;
    Mutable List Structure
   - SICP Comparison Edition"/><title>3.3.1&nbsp;&nbsp;
    Mutable List Structure
   - SICP Comparison Edition</title><meta name="csrf-param" content="authenticity_token" />
    <meta
      name="csrf-token"
      content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ=="
    />
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link
      href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      media="all"
      href="../assets/stylesheet.css"
    />

    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../assets/sourcepower.ico"
    />

    <!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
      integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
      crossorigin="anonymous"
    />
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
      integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
      crossorigin="anonymous"
    />

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full"
    />
    <!--  <script type="text/javascript"
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
    <script src="../assets/application.js"></script>

    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"
        type="text/javascript"
      ></script>
    <![endif]--> </head><body><!-- support for progressive web app, see README, DISABLED -->
    <!-- <script>
      if ("serviceWorker" in navigator && !navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("../sw.js").then(function (reg) {
          console.log(
            "Service worker has been registered for scope: " + reg.scope
          );
        });
      }
    </script> -->
    <nav
      class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between"
    >
      <button
        id="btn"
        class="navbar-toggler collapsed"
        type="button"
        data-toggle="collapse"
        data-target="#nav-sidebar"
        aria-controls="nav-sidebar"
        aria-expanded="false"
        aria-label="Toggle navigation"
        title="navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <span class="toolt"
        >Legend<span class="toolttext">
          <div class="title-text-ALSO">
      <span class="title-text-ALSO">Color highlighting:</span><br />
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
        <span style="color:black">Unchanged █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
        <span style="color:green">Scheme █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
        <span style="color:blue">Javascript █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
        <span style="color:grey">Explanation █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
        <span style="color:red">Web-only █</span>
      </span>
    </div>
        </span></span
      >
    </nav><span class="navbar-brand-short"
        ><a
          title="Go back to front page"
          href="../index.html"
          class="gray"
          >SICP &mdash; Scheme/JS</a
        ></span
      >
      <span class="navbar-brand-long"
        ><a
          title="Go back to front page"
          href="../index.html"
          class="gray"
          >Structure and Interpretation of Computer Programs &mdash; Comparison Edition</a
        ></span
      ><div class="container scroll">
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-1"
                aria-expanded="false"
                aria-controls="sidebar-collapse-1"
              >
                <a href="./foreword02.html">
                  
        <span style="color:blue">Foreword</span>
    </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-2"
                aria-expanded="false"
                aria-controls="sidebar-collapse-2"
              >
                <a href="./foreword84.html">
                  Foreword <span style="color:blue">to Structure and Interpretation of Computer Programs, 1984</span></a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-3"
                aria-expanded="false"
                aria-controls="sidebar-collapse-3"
              >
                <a href="./prefaces03.html">
                  
    
      <span style="color:blue">Preface</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-4">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-4"
                aria-expanded="false"
                aria-controls="sidebar-collapse-4"
              >
                <a href="./prefaces96.html">
                  
    Prefaces
    
      <span style="color:blue">
	to Structure and Interpretation of Computer Programs, 1996<span style='color:blue'> & </span>1984
      </span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-5">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-5"
                aria-expanded="false"
                aria-controls="sidebar-collapse-5"
              >
                <a href="./acknowledgements.html">
                  Acknowledgments</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-6"
                aria-expanded="false"
                aria-controls="sidebar-collapse-6"
              >
                <a href="./see.html">
                  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-7">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-7"
        aria-expanded="true"
        aria-controls="sidebar-collapse-7"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-7"
        aria-expanded="true"
        aria-controls="sidebar-collapse-7"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./1.html"
        >1 
    Building Abstractions with 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
  </a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-7" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-8">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-8"
        aria-expanded="true"
        aria-controls="sidebar-collapse-8"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-8"
        aria-expanded="true"
        aria-controls="sidebar-collapse-8"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./1.1.html"
        >1.1 The Elements of Programming</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-8" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-9"
                aria-expanded="false"
                aria-controls="sidebar-collapse-9"
              >
                <a href="./1.1.1.html">
                  1.1.1 Expressions</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-10"
                aria-expanded="false"
                aria-controls="sidebar-collapse-10"
              >
                <a href="./1.1.2.html">
                  1.1.2 Naming and the Environment</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-11"
                aria-expanded="false"
                aria-controls="sidebar-collapse-11"
              >
                <a href="./1.1.3.html">
                  1.1.3 
    Evaluating
    
      <span style="color:green">Combinations</span>
      <span style="color:blue">Operator Combinations</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-12"
                aria-expanded="false"
                aria-controls="sidebar-collapse-12"
              >
                <a href="./1.1.4.html">
                  1.1.4 
    Compound <span style="color:green">Procedures</span>
    <span style="color:blue">Functions</span>
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-13"
                aria-expanded="false"
                aria-controls="sidebar-collapse-13"
              >
                <a href="./1.1.5.html">
                  1.1.5 
    The Substitution Model for 
    
      <span style="color:green">
        Procedure
      </span>
      <span style="color:blue">
        Function
      </span>
    
    Application
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-14">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-14"
                aria-expanded="false"
                aria-controls="sidebar-collapse-14"
              >
                <a href="./1.1.6.html">
                  1.1.6 
    Conditional Expressions and Predicates
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-15"
                aria-expanded="false"
                aria-controls="sidebar-collapse-15"
              >
                <a href="./1.1.7.html">
                  1.1.7 Example: Square Roots by Newton's Method</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-16"
                aria-expanded="false"
                aria-controls="sidebar-collapse-16"
              >
                <a href="./1.1.8.html">
                  1.1.8 
    
      <span style="color:green">
        Procedures
      </span>
      <span style="color:blue">
        Functions
      </span>
    
    as Black-Box Abstractions
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-17">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-17"
        aria-expanded="true"
        aria-controls="sidebar-collapse-17"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-17"
        aria-expanded="true"
        aria-controls="sidebar-collapse-17"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./1.2.html"
        >1.2 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
    and the Processes They Generate
  </a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-17" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-18"
                aria-expanded="false"
                aria-controls="sidebar-collapse-18"
              >
                <a href="./1.2.1.html">
                  1.2.1 Linear Recursion and Iteration</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-19"
                aria-expanded="false"
                aria-controls="sidebar-collapse-19"
              >
                <a href="./1.2.2.html">
                  1.2.2 Tree Recursion</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-20"
                aria-expanded="false"
                aria-controls="sidebar-collapse-20"
              >
                <a href="./1.2.3.html">
                  1.2.3 Orders of Growth</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-21">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-21"
                aria-expanded="false"
                aria-controls="sidebar-collapse-21"
              >
                <a href="./1.2.4.html">
                  1.2.4 Exponentiation</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-22"
                aria-expanded="false"
                aria-controls="sidebar-collapse-22"
              >
                <a href="./1.2.5.html">
                  1.2.5 Greatest Common Divisors</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-23"
                aria-expanded="false"
                aria-controls="sidebar-collapse-23"
              >
                <a href="./1.2.6.html">
                  1.2.6 Example: Testing for Primality</a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-24">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-24"
        aria-expanded="true"
        aria-controls="sidebar-collapse-24"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-24"
        aria-expanded="true"
        aria-controls="sidebar-collapse-24"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./1.3.html"
        >1.3 
        Formulating Abstractions with Higher-Order 
        
	  <span style="color:green">Procedures</span>
	  <span style="color:blue">Functions</span>
	
      </a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-24" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-25"
                aria-expanded="false"
                aria-controls="sidebar-collapse-25"
              >
                <a href="./1.3.1.html">
                  1.3.1 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
    as Arguments
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-26">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-26"
                aria-expanded="false"
                aria-controls="sidebar-collapse-26"
              >
                <a href="./1.3.2.html">
                  1.3.2 
    
      <span style="color:green">Constructing Procedures using Lambda</span>
      <span style="color:blue">Constructing Functions using Lambda Expressions
      </span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-27">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-27"
                aria-expanded="false"
                aria-controls="sidebar-collapse-27"
              >
                <a href="./1.3.3.html">
                  1.3.3 
    
      <span style="color:green">Procedures</span>
    <span style="color:blue">Functions</span>
    as General Methods
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-28"
                aria-expanded="false"
                aria-controls="sidebar-collapse-28"
              >
                <a href="./1.3.4.html">
                  1.3.4 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
    as Returned Values
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-29">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-29"
        aria-expanded="true"
        aria-controls="sidebar-collapse-29"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-29"
        aria-expanded="true"
        aria-controls="sidebar-collapse-29"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./2.html"
        >2 Building Abstractions with Data</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-29" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-30">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-30"
        aria-expanded="true"
        aria-controls="sidebar-collapse-30"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-30"
        aria-expanded="true"
        aria-controls="sidebar-collapse-30"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./2.1.html"
        >2.1 Introduction to Data Abstraction</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-30" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-31"
                aria-expanded="false"
                aria-controls="sidebar-collapse-31"
              >
                <a href="./2.1.1.html">
                  2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-32">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-32"
                aria-expanded="false"
                aria-controls="sidebar-collapse-32"
              >
                <a href="./2.1.2.html">
                  2.1.2 
    Abstraction Barriers
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-33"
                aria-expanded="false"
                aria-controls="sidebar-collapse-33"
              >
                <a href="./2.1.3.html">
                  2.1.3 
    What Is Meant by Data?
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-34"
                aria-expanded="false"
                aria-controls="sidebar-collapse-34"
              >
                <a href="./2.1.4.html">
                  2.1.4 
    Extended Exercise: Interval Arithmetic
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-35">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-35"
        aria-expanded="true"
        aria-controls="sidebar-collapse-35"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-35"
        aria-expanded="true"
        aria-controls="sidebar-collapse-35"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./2.2.html"
        >2.2 Hierarchical Data and the Closure Property</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-35" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-36"
                aria-expanded="false"
                aria-controls="sidebar-collapse-36"
              >
                <a href="./2.2.1.html">
                  2.2.1 
    Representing Sequences
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-37">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-37"
                aria-expanded="false"
                aria-controls="sidebar-collapse-37"
              >
                <a href="./2.2.2.html">
                  2.2.2 
    Hierarchical Structures
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-38"
                aria-expanded="false"
                aria-controls="sidebar-collapse-38"
              >
                <a href="./2.2.3.html">
                  2.2.3 
    Sequences as Conventional Interfaces
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-39"
                aria-expanded="false"
                aria-controls="sidebar-collapse-39"
              >
                <a href="./2.2.4.html">
                  2.2.4 
    Example: A Picture Language
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-40">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-40"
        aria-expanded="true"
        aria-controls="sidebar-collapse-40"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-40"
        aria-expanded="true"
        aria-controls="sidebar-collapse-40"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./2.3.html"
        >2.3 Symbolic Data</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-40" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-41"
                aria-expanded="false"
                aria-controls="sidebar-collapse-41"
              >
                <a href="./2.3.1.html">
                  2.3.1 
    
      <span style="color:green">Quotation</span>
      <span style="color:blue">Strings</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-42">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-42"
                aria-expanded="false"
                aria-controls="sidebar-collapse-42"
              >
                <a href="./2.3.2.html">
                  2.3.2 
    Example: Symbolic Differentiation
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-43"
                aria-expanded="false"
                aria-controls="sidebar-collapse-43"
              >
                <a href="./2.3.3.html">
                  2.3.3 
    Example: Representing Sets
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-44"
                aria-expanded="false"
                aria-controls="sidebar-collapse-44"
              >
                <a href="./2.3.4.html">
                  2.3.4 
    Example: Huffman Encoding Trees
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-45">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-45"
        aria-expanded="true"
        aria-controls="sidebar-collapse-45"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-45"
        aria-expanded="true"
        aria-controls="sidebar-collapse-45"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./2.4.html"
        >2.4 Multiple Representations for Abstract Data</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-45" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-46">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-46"
                aria-expanded="false"
                aria-controls="sidebar-collapse-46"
              >
                <a href="./2.4.1.html">
                  2.4.1 
    Representations for Complex Numbers
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-47"
                aria-expanded="false"
                aria-controls="sidebar-collapse-47"
              >
                <a href="./2.4.2.html">
                  2.4.2 
    Tagged data
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-48"
                aria-expanded="false"
                aria-controls="sidebar-collapse-48"
              >
                <a href="./2.4.3.html">
                  2.4.3 
    Data-Directed Programming and Additivity
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-49">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-49"
        aria-expanded="true"
        aria-controls="sidebar-collapse-49"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-49"
        aria-expanded="true"
        aria-controls="sidebar-collapse-49"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./2.5.html"
        >2.5 Systems with Generic Operations</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-49" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-50">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-50"
                aria-expanded="false"
                aria-controls="sidebar-collapse-50"
              >
                <a href="./2.5.1.html">
                  2.5.1 
    Generic Arithmetic Operations
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-51">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-51"
                aria-expanded="false"
                aria-controls="sidebar-collapse-51"
              >
                <a href="./2.5.2.html">
                  2.5.2 
    Combining Data of Different Types
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-52"
                aria-expanded="false"
                aria-controls="sidebar-collapse-52"
              >
                <a href="./2.5.3.html">
                  2.5.3 
    Example: Symbolic Algebra
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-53">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-53"
        aria-expanded="true"
        aria-controls="sidebar-collapse-53"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-53"
        aria-expanded="true"
        aria-controls="sidebar-collapse-53"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./3.html"
        >3 Modularity, Objects, and State</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-53" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-54">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-54"
        aria-expanded="true"
        aria-controls="sidebar-collapse-54"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-54"
        aria-expanded="true"
        aria-controls="sidebar-collapse-54"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./3.1.html"
        >3.1 Assignment and Local State</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-54" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-55">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-55"
                aria-expanded="false"
                aria-controls="sidebar-collapse-55"
              >
                <a href="./3.1.1.html">
                  3.1.1 
    Local State Variables
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-56"
                aria-expanded="false"
                aria-controls="sidebar-collapse-56"
              >
                <a href="./3.1.2.html">
                  3.1.2 
    The Benefits of Introducing Assignment
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-57"
                aria-expanded="false"
                aria-controls="sidebar-collapse-57"
              >
                <a href="./3.1.3.html">
                  3.1.3 
    The Costs of Introducing Assignment
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-58">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-58"
        aria-expanded="true"
        aria-controls="sidebar-collapse-58"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-58"
        aria-expanded="true"
        aria-controls="sidebar-collapse-58"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./3.2.html"
        >3.2 The Environment Model of Evaluation</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-58" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-59"
                aria-expanded="false"
                aria-controls="sidebar-collapse-59"
              >
                <a href="./3.2.1.html">
                  3.2.1 
    The Rules for Evaluation
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-60">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-60"
                aria-expanded="false"
                aria-controls="sidebar-collapse-60"
              >
                <a href="./3.2.2.html">
                  3.2.2 
    Applying Simple
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-61"
                aria-expanded="false"
                aria-controls="sidebar-collapse-61"
              >
                <a href="./3.2.3.html">
                  3.2.3 
    Frames as the Repository of Local State
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-62"
                aria-expanded="false"
                aria-controls="sidebar-collapse-62"
              >
                <a href="./3.2.4.html">
                  3.2.4 
    Internal
    
      <span style="color:green">Definitions</span>
      <span style="color:blue">Declarations</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-63"
                aria-expanded="false"
                aria-controls="sidebar-collapse-63"
              >
                <a href="./3.2.5.html">
                  3.2.5 
    CSE Machine
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-64">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-64"
        aria-expanded="true"
        aria-controls="sidebar-collapse-64"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-64"
        aria-expanded="true"
        aria-controls="sidebar-collapse-64"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./3.3.html"
        >3.3 Modeling with Mutable Data</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-64" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-65"
                aria-expanded="false"
                aria-controls="sidebar-collapse-65"
              >
                <a href="./3.3.1.html">
                  3.3.1 
    Mutable List Structure
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-66">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-66"
                aria-expanded="false"
                aria-controls="sidebar-collapse-66"
              >
                <a href="./3.3.2.html">
                  3.3.2 
    Representing Queues
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-67"
                aria-expanded="false"
                aria-controls="sidebar-collapse-67"
              >
                <a href="./3.3.3.html">
                  3.3.3 
    Representing Tables
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-68"
                aria-expanded="false"
                aria-controls="sidebar-collapse-68"
              >
                <a href="./3.3.4.html">
                  3.3.4 
    A Simulator for Digital Circuits
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-69">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-69"
                aria-expanded="false"
                aria-controls="sidebar-collapse-69"
              >
                <a href="./3.3.5.html">
                  3.3.5 
    Propagation of Constraints
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-70">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-70"
        aria-expanded="true"
        aria-controls="sidebar-collapse-70"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-70"
        aria-expanded="true"
        aria-controls="sidebar-collapse-70"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./3.4.html"
        >3.4 Concurrency: Time Is of the Essence</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-70" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-71"
                aria-expanded="false"
                aria-controls="sidebar-collapse-71"
              >
                <a href="./3.4.1.html">
                  3.4.1 
    The Nature of Time in Concurrent Systems
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-72"
                aria-expanded="false"
                aria-controls="sidebar-collapse-72"
              >
                <a href="./3.4.2.html">
                  3.4.2 
    Mechanisms for Controlling Concurrency
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-73">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-73"
        aria-expanded="true"
        aria-controls="sidebar-collapse-73"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-73"
        aria-expanded="true"
        aria-controls="sidebar-collapse-73"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./3.5.html"
        >3.5 Streams</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-74"
                aria-expanded="false"
                aria-controls="sidebar-collapse-74"
              >
                <a href="./3.5.1.html">
                  3.5.1 
    Streams Are Delayed Lists
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-75">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-75"
                aria-expanded="false"
                aria-controls="sidebar-collapse-75"
              >
                <a href="./3.5.2.html">
                  3.5.2 
    Infinite Streams
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-76">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-76"
                aria-expanded="false"
                aria-controls="sidebar-collapse-76"
              >
                <a href="./3.5.3.html">
                  3.5.3 
    Exploiting the Stream Paradigm
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-77"
                aria-expanded="false"
                aria-controls="sidebar-collapse-77"
              >
                <a href="./3.5.4.html">
                  3.5.4 
    Streams and Delayed Evaluation
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-78"
                aria-expanded="false"
                aria-controls="sidebar-collapse-78"
              >
                <a href="./3.5.5.html">
                  3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-79">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-79"
        aria-expanded="true"
        aria-controls="sidebar-collapse-79"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-79"
        aria-expanded="true"
        aria-controls="sidebar-collapse-79"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./4.html"
        >4 Metalinguistic Abstraction</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-79" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-80">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-80"
        aria-expanded="true"
        aria-controls="sidebar-collapse-80"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-80"
        aria-expanded="true"
        aria-controls="sidebar-collapse-80"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./4.1.html"
        >4.1 The Metacircular Evaluator</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-80" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-81"
                aria-expanded="false"
                aria-controls="sidebar-collapse-81"
              >
                <a href="./4.1.1.html">
                  4.1.1 
    The Core of the Evaluator
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-82"
                aria-expanded="false"
                aria-controls="sidebar-collapse-82"
              >
                <a href="./4.1.2.html">
                  4.1.2 
    Representing
    
      <span style="color:green">Expressions</span>
      <span style="color:blue">Components</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-83"
                aria-expanded="false"
                aria-controls="sidebar-collapse-83"
              >
                <a href="./4.1.3.html">
                  4.1.3 
    Evaluator Data Structures
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-84">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-84"
                aria-expanded="false"
                aria-controls="sidebar-collapse-84"
              >
                <a href="./4.1.4.html">
                  4.1.4 
    Running the Evaluator as a Program
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-85"
                aria-expanded="false"
                aria-controls="sidebar-collapse-85"
              >
                <a href="./4.1.5.html">
                  4.1.5 
    Data as Programs
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-86"
                aria-expanded="false"
                aria-controls="sidebar-collapse-86"
              >
                <a href="./4.1.6.html">
                  4.1.6 
    Internal
    
      <span style="color:green">Definitions</span>
      <span style="color:blue">Declarations</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-87"
                aria-expanded="false"
                aria-controls="sidebar-collapse-87"
              >
                <a href="./4.1.7.html">
                  4.1.7 
    Separating Syntactic Analysis from Execution
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-88">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-88"
        aria-expanded="true"
        aria-controls="sidebar-collapse-88"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-88"
        aria-expanded="true"
        aria-controls="sidebar-collapse-88"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./4.2.html"
        >4.2 
    
      <span style="color:green">Variations on a Scheme:</span>
    
    Lazy Evaluation
</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-89"
                aria-expanded="false"
                aria-controls="sidebar-collapse-89"
              >
                <a href="./4.2.1.html">
                  4.2.1 
    Normal Order and Applicative Order
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-90"
                aria-expanded="false"
                aria-controls="sidebar-collapse-90"
              >
                <a href="./4.2.2.html">
                  4.2.2 
    An Interpreter with Lazy Evaluation
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-91"
                aria-expanded="false"
                aria-controls="sidebar-collapse-91"
              >
                <a href="./4.2.3.html">
                  4.2.3 
    Streams as Lazy Lists
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-92">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-92"
        aria-expanded="true"
        aria-controls="sidebar-collapse-92"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-92"
        aria-expanded="true"
        aria-controls="sidebar-collapse-92"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./4.3.html"
        >4.3 
    
      <span style="color:green">Variations on a Scheme:</span>
    
    Nondeterministic Computing
  </a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-93"
                aria-expanded="false"
                aria-controls="sidebar-collapse-93"
              >
                <a href="./4.3.1.html">
                  4.3.1 
    
      <span style="color:green">Amb and Search</span>
      <span style="color:blue">Search and amb</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-94"
                aria-expanded="false"
                aria-controls="sidebar-collapse-94"
              >
                <a href="./4.3.2.html">
                  4.3.2 
    Examples of Nondeterministic Programs
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-95"
                aria-expanded="false"
                aria-controls="sidebar-collapse-95"
              >
                <a href="./4.3.3.html">
                  4.3.3 
    Implementing the
    
      <span style="color:green">Amb</span>
      <span style="color:blue">amb</span>
    
    Evaluator
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-96">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-96"
        aria-expanded="true"
        aria-controls="sidebar-collapse-96"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-96"
        aria-expanded="true"
        aria-controls="sidebar-collapse-96"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./4.4.html"
        >4.4 Logic Programming</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-96" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-97">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-97"
                aria-expanded="false"
                aria-controls="sidebar-collapse-97"
              >
                <a href="./4.4.1.html">
                  4.4.1 
    Deductive Information Retrieval
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-98">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-98"
                aria-expanded="false"
                aria-controls="sidebar-collapse-98"
              >
                <a href="./4.4.2.html">
                  4.4.2 
    How the Query System Works
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-99"
                aria-expanded="false"
                aria-controls="sidebar-collapse-99"
              >
                <a href="./4.4.3.html">
                  4.4.3 
    Is Logic Programming Mathematical Logic?
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-100"
                aria-expanded="false"
                aria-controls="sidebar-collapse-100"
              >
                <a href="./4.4.4.html">
                  4.4.4 
    Implementing the Query System
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-101">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-101"
        aria-expanded="true"
        aria-controls="sidebar-collapse-101"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-101"
        aria-expanded="true"
        aria-controls="sidebar-collapse-101"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./5.html"
        >5 Computing with Register Machines</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-102">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-102"
        aria-expanded="true"
        aria-controls="sidebar-collapse-102"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-102"
        aria-expanded="true"
        aria-controls="sidebar-collapse-102"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./5.1.html"
        >5.1 Designing Register Machines</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-102" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-103"
                aria-expanded="false"
                aria-controls="sidebar-collapse-103"
              >
                <a href="./5.1.1.html">
                  5.1.1 
    A Language for Describing Register Machines
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-104">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-104"
                aria-expanded="false"
                aria-controls="sidebar-collapse-104"
              >
                <a href="./5.1.2.html">
                  5.1.2 
    Abstraction in Machine Design
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-105"
                aria-expanded="false"
                aria-controls="sidebar-collapse-105"
              >
                <a href="./5.1.3.html">
                  5.1.3 
    Subroutines
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-106"
                aria-expanded="false"
                aria-controls="sidebar-collapse-106"
              >
                <a href="./5.1.4.html">
                  5.1.4 
    Using a Stack to Implement Recursion
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-107"
                aria-expanded="false"
                aria-controls="sidebar-collapse-107"
              >
                <a href="./5.1.5.html">
                  5.1.5 
    Instruction Summary
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-108">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-108"
        aria-expanded="true"
        aria-controls="sidebar-collapse-108"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-108"
        aria-expanded="true"
        aria-controls="sidebar-collapse-108"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./5.2.html"
        >5.2 A Register-Machine Simulator</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-108" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-109">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-109"
                aria-expanded="false"
                aria-controls="sidebar-collapse-109"
              >
                <a href="./5.2.1.html">
                  5.2.1 
    The Machine Model
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-110"
                aria-expanded="false"
                aria-controls="sidebar-collapse-110"
              >
                <a href="./5.2.2.html">
                  5.2.2 
    The Assembler
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-111"
                aria-expanded="false"
                aria-controls="sidebar-collapse-111"
              >
                <a href="./5.2.3.html">
                  5.2.3 
    
      <span style="color:green">Generating Execution Procedures for Instructions</span>
      <span style="color:blue">Instructions and Their Execution Functions</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-112">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-112"
                aria-expanded="false"
                aria-controls="sidebar-collapse-112"
              >
                <a href="./5.2.4.html">
                  5.2.4 
    Monitoring Machine Performance
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-113">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-113"
        aria-expanded="true"
        aria-controls="sidebar-collapse-113"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-113"
        aria-expanded="true"
        aria-controls="sidebar-collapse-113"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./5.3.html"
        >5.3 Storage Allocation and Garbage Collection</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-113" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-114"
                aria-expanded="false"
                aria-controls="sidebar-collapse-114"
              >
                <a href="./5.3.1.html">
                  5.3.1 
    Memory as Vectors
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-115"
                aria-expanded="false"
                aria-controls="sidebar-collapse-115"
              >
                <a href="./5.3.2.html">
                  5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-116">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-116"
        aria-expanded="true"
        aria-controls="sidebar-collapse-116"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-116"
        aria-expanded="true"
        aria-controls="sidebar-collapse-116"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./5.4.html"
        >5.4 The Explicit-Control Evaluator</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-116" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-117">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-117"
                aria-expanded="false"
                aria-controls="sidebar-collapse-117"
              >
                <a href="./5.4.1.html">
                  5.4.1 
    
      <span style="color:green">The Core of the Explicit-Control Evaluator</span>
      <span style="color:blue">The Dispatcher and Basic Evaluation</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-118"
                aria-expanded="false"
                aria-controls="sidebar-collapse-118"
              >
                <a href="./5.4.2.html">
                  5.4.2 
    
      <span style="color:green">
        Sequence Evaluation and Tail Recursion
      </span>
      <span style="color:blue">
        Evaluating Function Applications
      </span>
        
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-119"
                aria-expanded="false"
                aria-controls="sidebar-collapse-119"
              >
                <a href="./5.4.3.html">
                  5.4.3 
    
      <span style="color:green">
        Conditionals, Assignments and Definitions
      </span>
      <span style="color:blue">
        Blocks, Assignments, and Declarations
      </span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-120"
                aria-expanded="false"
                aria-controls="sidebar-collapse-120"
              >
                <a href="./5.4.4.html">
                  5.4.4 
    Running the Evaluator
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
            <div class="card-header" role="tab" id="sidebar-121">
    <h5 class="mb-0">
      <a
        class="sidebar-show collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-121"
        aria-expanded="true"
        aria-controls="sidebar-collapse-121"
      >
        &#10148;
        <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
      </a>
      <a
        class="sidebar-hide collapsed"
        data-toggle="collapse"
        href="#sidebar-collapse-121"
        aria-expanded="true"
        aria-controls="sidebar-collapse-121"
      >
        &#x25BC;
        <!-- ▼ (because the corresponding one is not rendered) -->
      </a>
      <a href="./5.5.html"
        >5.5 Compilation</a
      >
    </h5>
  </div>

              <div id="sidebar-collapse-121" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-122"
                aria-expanded="false"
                aria-controls="sidebar-collapse-122"
              >
                <a href="./5.5.1.html">
                  5.5.1 
    Structure of the Compiler
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-123"
                aria-expanded="false"
                aria-controls="sidebar-collapse-123"
              >
                <a href="./5.5.2.html">
                  5.5.2 
    Compiling
    
      <span style="color:green">Expressions</span>
      <span style="color:blue">Components</span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-124"
                aria-expanded="false"
                aria-controls="sidebar-collapse-124"
              >
                <a href="./5.5.3.html">
                  5.5.3 
    Compiling
    
      <span style="color:green">
	Combinations
      </span>
      <span style="color:blue">
	Applications and Return Statements
      </span>
    
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-125"
                aria-expanded="false"
                aria-controls="sidebar-collapse-125"
              >
                <a href="./5.5.4.html">
                  5.5.4 
    Combining Instruction Sequences
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-126"
                aria-expanded="false"
                aria-controls="sidebar-collapse-126"
              >
                <a href="./5.5.5.html">
                  5.5.5 
    An Example of Compiled Code
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-127">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-127"
                aria-expanded="false"
                aria-controls="sidebar-collapse-127"
              >
                <a href="./5.5.6.html">
                  5.5.6 
    Lexical Addressing
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-128">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-128"
                aria-expanded="false"
                aria-controls="sidebar-collapse-128"
              >
                <a href="./5.5.7.html">
                  5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a
                >
              </span>
            </h5>
          </div>
        </div>
      
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-129">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-129"
                aria-expanded="false"
                aria-controls="sidebar-collapse-129"
              >
                <a href="./references.html">
                  References</a
                >
              </span>
            </h5>
          </div>
        </div>
      
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-130">
            <h5 class="mb-0">
              <span
                class="collapsed"
                data-toggle="collapse"
                href="#sidebar-collapse-130"
                aria-expanded="false"
                aria-controls="sidebar-collapse-130"
              >
                <a href="./making-of.html">
                  <span class='webonly'>About the SICP JS Project</span></a
                >
              </span>
            </h5>
          </div>
        </div>
      </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'>
    3.3.1&nbsp;&nbsp;
    Mutable List Structure
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  
  
  
  
  

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    The basic operations on
    
      <span style="color:green">
	pairs—<kbd>cons</kbd>,
      </span>
      <span style="color:blue">
	pairs—<kbd>pair</kbd>,
      </span>
    
    
      <span style="color:green"><kbd>car</kbd>,</span>
      <span style="color:blue"><kbd>head</kbd>,</span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd>—can</span>
      <span style="color:blue"><kbd>tail</kbd>—can
      </span>
    
    be used to construct list structure and to select parts
    from list structure, but they are incapable of modifying list
    structure.  The same is true of the list operations we have used so
    far, such as <kbd>append</kbd> and
    <kbd>list</kbd>, since these can be defined in terms of
    
      <span style="color:green"><kbd>cons</kbd>,</span>
      <span style="color:blue"><kbd>pair</kbd>,</span>
    
    
      <span style="color:green"><kbd>car</kbd>,</span>
      <span style="color:blue"><kbd>head</kbd>,</span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd>.</span>
      <span style="color:blue"><kbd>tail</kbd>.</span>
    
    To modify list structures we need new operations.
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    The primitive mutators for pairs are
    
    
    
      <span style="color:green"><kbd>set-car!</kbd></span>
      <span style="color:blue"><kbd>set_head</kbd></span>
    
    and
    
    
    
      <span style="color:green"><kbd>set-cdr!</kbd>.</span>
      <span style="color:blue"><kbd>set_tail</kbd>.</span>
    
    
      <span style="color:green"><kbd>Set-car!</kbd></span>
      <span style="color:blue">The function <kbd>set_head</kbd>
      </span>
    
    takes two arguments, the first of which must be a pair.  It modifies this
    pair, replacing the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    pointer by a pointer to the second argument of
    <span style="color:green"><kbd>set-car!</kbd></span><span style="color:blue"><kbd>set_head</kbd></span>.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
  </p></div>

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    As an example, suppose that <kbd>x</kbd> is bound to 
    
      <span style="color:green">
	the list
	<kbd>((a b) c d)</kbd>
      </span>
      <span style="color:blue">
	<kbd>list(list("a", "b"), "c", "d")</kbd>
      </span>
    
    and <kbd>y</kbd> to
    
      <span style="color:green">
	the list
	<kbd>(e f)</kbd>
      </span>
      <span style="color:blue"><kbd>list("e", "f")</kbd>
      </span>
    
    as illustrated in
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:two-lists_scheme"><a class="superscript" id="3.3.1-fig-link-3.23" href="./3.3.1.html#fig_3.23">3.23</a></REF>.
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:two-lists"><a class="superscript" id="3.3.1-fig-link-3.24" href="./3.3.1.html#fig_3.24">3.24</a></REF>.
      </span>
    
    Evaluating the expression
    
      <span style="color:green"><kbd>(set-car! x y)</kbd></span>
      <span style="color:blue">
      <kbd>set_head(x, y)</kbd></span>
    
    modifies the pair to which <kbd>x</kbd> is bound,
    replacing its
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    by the value of <kbd>y</kbd>.  The result of the operation
    is shown in
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:set-car_scheme"><a class="superscript" id="3.3.1-fig-link-3.25" href="./3.3.1.html#fig_3.25">3.25</a></REF>.
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:set-car"><a class="superscript" id="3.3.1-fig-link-3.26" href="./3.3.1.html#fig_3.26">3.26</a></REF>.
      </span>
    
    The structure <kbd>x</kbd> has been modified and
    
      <span style="color:green">
	would now be printed as
	<kbd>((e f) c d)</kbd>.
      </span>
      <span style="color:blue">
	is now equivalent to
	<kbd>list(list("e", "f"), "c", "d")</kbd>.
    </span>
    The pairs representing the list
    
      <span style="color:green"><kbd>(a b)</kbd>,</span>
      <span style="color:blue"><kbd>list("a", "b")</kbd>,
      </span>
    
    identified by the pointer that was replaced, are now detached from the
    original structure.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
  </p></div>

    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
        <FIGURE>
      <img id="fig_3.23" src="../img_original/ch3-Z-G-13.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.23">Figure 3.23 </a></b>
	    Lists <kbd>x</kbd>:
	    <kbd>((a b) c d)</kbd> and
	    <kbd>y</kbd>: <kbd>(e f)</kbd>.
          </div></FIGURE>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
        <FIGURE>
      <img style="width: 100%" id="fig_3.24" src="../img_javascript/ch3-Z-G-13.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.24">Figure 3.24 </a></b>
	    Lists <kbd>x</kbd>:
	    <kbd>list(list("a", "b"), "c", "d")</kbd>
	    and <kbd>y</kbd>:
	    <kbd>list("e", "f")</kbd>.
          </div></FIGURE>
      </span></td></tr></table>
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
        <FIGURE>
      <img id="fig_3.25" src="../img_original/ch3-Z-G-14.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.25">Figure 3.25 </a></b>
	    Effect of <kbd>(set-car! x y)</kbd> on the lists
	    in figure&nbsp;<REF NAME="fig:two-lists_scheme"><a class="superscript" id="3.3.1-fig-link-3.23" href="./3.3.1.html#fig_3.23">3.23</a></REF>.
          </div></FIGURE>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
        <FIGURE>
      <img style="width: 100%" id="fig_3.26" src="../img_javascript/ch3-Z-G-14.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.26">Figure 3.26 </a></b>
	    Effect of <kbd>set_head(x, y)</kbd> on
	    the lists in figure&nbsp;<REF NAME="fig:two-lists"><a class="superscript" id="3.3.1-fig-link-3.24" href="./3.3.1.html#fig_3.24">3.24</a></REF>.
          </div></FIGURE>
      </span></td></tr></table>
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
        <FIGURE>
      <img id="fig_3.27" src="../img_original/ch3-Z-G-15.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.27">Figure 3.27 </a></b>
	    Effect of <kbd>(define z (cons y (cdr x)))</kbd>
	    on the lists in figure&nbsp;<REF NAME="fig:two-lists_scheme"><a class="superscript" id="3.3.1-fig-link-3.23" href="./3.3.1.html#fig_3.23">3.23</a></REF>.
          </div></FIGURE>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
        <FIGURE>
      <img style="width: 100%" id="fig_3.28" src="../img_javascript/ch3-Z-G-15.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.28">Figure 3.28 </a></b>
	    Effect of
	    <kbd>const z = pair(y, tail(x));</kbd>
	    on the lists in figure&nbsp;<REF NAME="fig:two-lists"><a class="superscript" id="3.3.1-fig-link-3.24" href="./3.3.1.html#fig_3.24">3.24</a></REF>.
          </div></FIGURE>
      </span></td></tr></table>
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
        <FIGURE>
      <img id="fig_3.29" src="../img_original/ch3-Z-G-16.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.29">Figure 3.29 </a></b>
	    Effect of <kbd>(set-cdr! x y)</kbd> on the lists
	    in figure&nbsp;<REF NAME="fig:two-lists_scheme"><a class="superscript" id="3.3.1-fig-link-3.23" href="./3.3.1.html#fig_3.23">3.23</a></REF>.
	  </div></FIGURE>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
        <FIGURE>
      <img style="width: 100%" id="fig_3.30" src="../img_javascript/ch3-Z-G-16.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.30">Figure 3.30 </a></b>
	    Effect of <kbd>set_tail(x, y)</kbd> on the
	    lists in figure&nbsp;<REF NAME="fig:two-lists"><a class="superscript" id="3.3.1-fig-link-3.24" href="./3.3.1.html#fig_3.24">3.24</a></REF>.
	  </div></FIGURE>
      </span></td></tr></table>
  
  
  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    Compare
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:set-car_scheme"><a class="superscript" id="3.3.1-fig-link-3.25" href="./3.3.1.html#fig_3.25">3.25</a></REF>
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:set-car"><a class="superscript" id="3.3.1-fig-link-3.26" href="./3.3.1.html#fig_3.26">3.26</a></REF>
      </span>
    
    with
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:list-cons_scheme"><a class="superscript" id="3.3.1-fig-link-3.27" href="./3.3.1.html#fig_3.27">3.27</a></REF>,
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:list-cons"><a class="superscript" id="3.3.1-fig-link-3.28" href="./3.3.1.html#fig_3.28">3.28</a></REF>,
      </span>
    
    which illustrates the result of executing
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define z (cons y (cdr x)))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const z = pair(y, tail(x));
      </kbd></span></td></tr></table>
    with <kbd>x</kbd> and <kbd>y</kbd>
    bound to the original lists of
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:two-lists_scheme"><a class="superscript" id="3.3.1-fig-link-3.23" href="./3.3.1.html#fig_3.23">3.23</a></REF>.
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:two-lists"><a class="superscript" id="3.3.1-fig-link-3.24" href="./3.3.1.html#fig_3.24">3.24</a></REF>.
      </span>
    
    The
    
      <span style="color:green">
	variable
      </span>
      <span style="color:blue">
	name
      </span>
    
      <kbd>z</kbd> is now bound to a
    new pair created by the
    <span style="color:green"><kbd>cons</kbd></span>
    <span style="color:blue"><kbd>pair</kbd></span>
    
    operation; the list to which <kbd>x</kbd> is bound is
    unchanged.
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    The
    
      <span style="color:green"><kbd>set-cdr!</kbd></span>
      <span style="color:blue"><kbd>set_tail</kbd></span>
    
    operation is similar to
    
      <span style="color:green"><kbd>set-car!</kbd>.</span>
      <span style="color:blue"><kbd>set_head</kbd>.</span>
    
    The only difference is that the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    pointer of the pair, rather than the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    pointer, is replaced.  The effect of executing
    
      <span style="color:green"><kbd>(set-cdr! x y)</kbd></span>
      <span style="color:blue"><kbd>set_tail(x, y)</kbd>
      </span>
    
    on the lists of
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:two-lists_scheme"><a class="superscript" id="3.3.1-fig-link-3.23" href="./3.3.1.html#fig_3.23">3.23</a></REF>
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:two-lists"><a class="superscript" id="3.3.1-fig-link-3.24" href="./3.3.1.html#fig_3.24">3.24</a></REF>
      </span>
    
    is shown in
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:set-cdr_scheme"><a class="superscript" id="3.3.1-fig-link-3.29" href="./3.3.1.html#fig_3.29">3.29</a></REF>.
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:set-cdr"><a class="superscript" id="3.3.1-fig-link-3.30" href="./3.3.1.html#fig_3.30">3.30</a></REF>.
      </span>
    
    Here the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    pointer of
    <kbd>x</kbd> has been replaced by the pointer to
    
      <span style="color:green"><kbd>(e f)</kbd>.</span>
      <span style="color:blue"><kbd>list("e", "f")</kbd>.
      </span>
    
    Also, the list
    
      <span style="color:green"><kbd>(c d)</kbd>,</span>
      <span style="color:blue"><kbd>list("c", "d")</kbd>,
      </span>
    
    which used to be the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    of <kbd>x</kbd>, is now detached from the structure.
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    
      <span style="color:green"><kbd>Cons</kbd></span>
      <span style="color:blue">The function <kbd>pair</kbd>
      </span>
    
    builds new list structure by creating new pairs, 
    
      <span style="color:green">while <kbd>set-car!</kbd></span>
      <span style="color:blue">whereas <kbd>set_head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>set-cdr!</kbd></span>
      <span style="color:blue"><kbd>set_tail</kbd></span>
    
    modify existing pairs.
    Indeed, we could
    
    implement
    
      <span style="color:green"><kbd>cons</kbd></span>
      <span style="color:blue"><kbd>pair</kbd></span>
    
    in terms of the two mutators, together with a
    <span style="color:green">procedure</span><span style="color:blue">function</span>
    
      <span style="color:green"><kbd>get-new-pair</kbd>,</span>
      <span style="color:blue"><kbd>get_new_pair</kbd>,</span>
    
    which returns a new pair that is not part of any existing list structure.
    We obtain the new pair, set its
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    pointers to the designated objects, and return the new pair as the result of
    the
    <span style="color:green"><kbd>cons</kbd></span><span style="color:blue"><kbd>pair</kbd></span>.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>

  
  <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (cons x y)
  (let ((new (get-new-pair)))
    (set-car! new x)
    (set-cdr! new y)
    new))
    </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function pair(x, y) {
    const fresh = get_new_pair();
    set_head(fresh, x);
    set_tail(fresh, y);
    return fresh;
}
    </kbd></span></td></tr></table>

  
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.12" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.12">Exercise 3.12 </a></b> 
  
    
    The following
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    for appending lists was introduced in
    section&nbsp;<REF NAME="sec:sequences"><a class="superscript" id="3.3.1-sec-link-2.2.1" href="./2.2.1.html">2.2.1</a></REF>:
    
     
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (append x y)
  (if (null? x)
    y
    (cons (car x) (append (cdr x) y))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function append(x, y) {
    return is_null(x)
           ? y
           : pair(head(x), append(tail(x), y));
}
      </kbd></span></td></tr></table>
    
      <span style="color:green"><kbd>Append</kbd></span>
      <span style="color:blue">The function <kbd>append</kbd>
      </span>
    
    forms a new list by successively
    
      <span style="color:green">
	<kbd>cons</kbd>ing
	the elements of <kbd>x</kbd> onto
	<kbd>y</kbd>.
      </span>
      <span style="color:blue">
	adjoining the elements of <kbd>x</kbd>
	to the front of
	<kbd>y</kbd>.
      </span>
    
    The
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    
    
      <span style="color:green"><kbd>append!</kbd></span>
      <span style="color:blue"><kbd>append_mutator</kbd>
      </span>
    
    is similar to <kbd>append</kbd>, but it is a mutator
    rather than a constructor. It appends the lists by splicing them together,
    modifying the final pair of <kbd>x</kbd> so that its
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    is now <kbd>y</kbd>. (It is an error to call
    
      <span style="color:green"><kbd>append!</kbd></span>
      <span style="color:blue"><kbd>append_mutator</kbd>
      </span>
    
    with an empty&nbsp;<kbd>x</kbd>.)
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (append! x y)
  (set-cdr! (last-pair x) y)
            x)
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function append_mutator(x, y) {
    set_tail(last_pair(x), y);
    return x;
}
      </kbd></span></td></tr></table>
    Here
    
      <span style="color:green"><kbd>last-pair</kbd></span>
      <span style="color:blue"><kbd>last_pair</kbd></span>
    
    is a
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    that returns the last pair in its argument:
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (last-pair x)
  (if (null? (cdr x))
      x
      (last-pair (cdr x))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function last_pair(x) {
    return is_null(tail(x))
           ? x
           : last_pair(tail(x));
}
      </kbd></span></td></tr></table>
    Consider the interaction
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define x (list 'a 'b))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const x = list("a", "b");
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define y (list 'c 'd))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const y = list("c", "d");
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define z (append x y))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const z = append(x, y);
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
z
      </kbd></span><kbd class='snippet-output'>
(a b c d)
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
z;
      </kbd><kbd class='snippet-output'>
["a", ["b", ["c", ["d, null]]]]	
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(cdr x)
      </kbd></span><kbd class='snippet-output'>
<response>
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
tail(x);
      </kbd><kbd class='snippet-output'>
$response$
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define w (append! x y))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const w = append_mutator(x, y);
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
w
      </kbd></span><kbd class='snippet-output'>
(a b c d)
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
w;
      </kbd><kbd class='snippet-output'>
["a", ["b", ["c", ["d", null]]]]      
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(cdr x)
      </kbd></span><kbd class='snippet-output'>
<response>
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
tail(x);
      </kbd><kbd class='snippet-output'>
$response$
      </kbd></span></td></tr></table>
    What are the missing $response$s?
    Draw box-and-pointer diagrams to explain your answer.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.13" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.13">Exercise 3.13 </a></b> 
  
    Consider the following
    
    
      <span style="color:green"><kbd>make-cycle</kbd></span>
      <span style="color:blue"><kbd>make_cycle</kbd></span>
    
    
      <span style="color:green">procedure,</span>
      <span style="color:blue">function,</span>
    
    which uses the
    
      <span style="color:green">
	<kbd>last-pair</kbd>
      </span>
      <span style="color:blue">
	<kbd>last_pair</kbd>
      </span>
    
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    defined in exercise&nbsp;<REF NAME="ex:append"><a class="superscript" id="3.3.1-ex-link-3.12" href="./3.3.1.html#ex_3.12">3.12</a></REF>:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (make-cycle x)
  (set-cdr! (last-pair x) x)
            x)
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function make_cycle(x) {
    set_tail(last_pair(x), x);
    return x;
}
      </kbd></span></td></tr></table>
    Draw a box-and-pointer diagram that shows the structure
    <kbd>z</kbd> created by
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define z (make-cycle (list 'a 'b 'c)))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const z = make_cycle(list("a", "b", "c"));
      </kbd></span></td></tr></table>
    What happens if we try to compute
    
      <span style="color:green"><kbd>(last-pair z)</kbd>?</span>
      <span style="color:blue"><kbd>last_pair(z)</kbd>?
      </span>
    
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_64_2_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_64_2_div"><SOLUTION>
    
      (provided by GitHub user jonathantorres)
      If we try to compute <kbd>last_pair(z)</kbd>, the
      program will enter in a infinite loop, since the end of the list points back
      to the beginning.

      <FIGURE>
      <img id="fig_" src="../img_javascript/ex-3-13-sol.png"></FIGURE>

    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.14" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.14">Exercise 3.14 </a></b> 
  
    The following
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    is quite useful, although obscure:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (mystery x)
  (define (loop x y)
    (if (null? x)
        y
        (let ((temp (cdr x)))
          (set-cdr! x y)
          (loop temp x))))
  (loop x '()))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function mystery(x) {
    function loop(x, y) {
        if (is_null(x)) {
            return y;
        } else {
            const temp = tail(x);
            set_tail(x, y);
            return loop(temp, x);
        }
    }
    return loop(x, null);
}
      </kbd></span></td></tr></table>
    
      <span style="color:green"><kbd>Loop</kbd></span>
      <span style="color:blue">The function <kbd>loop</kbd>
      </span>
    
    uses the <QUOTE>temporary</QUOTE>
    
      <span style="color:green">
	variable
      </span>
      <span style="color:blue">
	name
      </span>
    
    <kbd>temp</kbd>
    to hold the old value of the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    of&nbsp;<kbd>x</kbd>, since the
    
      <span style="color:green"><kbd>set-cdr!</kbd></span>
      <span style="color:blue"><kbd>set_tail</kbd></span>
    
    on the next line destroys the
    
      <span style="color:green"><kbd>cdr</kbd>.</span>
      <span style="color:blue"><kbd>tail</kbd>.</span>
    
    Explain what <kbd>mystery</kbd> does in general.  Suppose
    <kbd>v</kbd> is defined by
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define v (list 'a 'b 'c 'd))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const v = list("a", "b", "c", "d");
      </kbd></span></td></tr></table>
    Draw the box-and-pointer diagram that represents the list to which
    <kbd>v</kbd> is bound.  Suppose that we now evaluate
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define w (mystery v))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const w = mystery(v);
      </kbd></span></td></tr></table>
    Draw box-and-pointer diagrams that show the structures
    <kbd>v</kbd> and <kbd>w</kbd> after
    evaluating this
    
      <span style="color:green">expression.</span>
      <span style="color:blue">program.</span>
    
    What would be printed as the values of <kbd>v</kbd>
    and <kbd>w</kbd>?
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_64_3_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_64_3_div"><SOLUTION>
    
      (provided by GitHub user jonathantorres)
      The application <kbd>mystery(x)</kbd> will
      reverse the list <kbd>x</kbd> in-place.
      Initially
      <kbd>v</kbd> looks like this:
      
      <FIGURE>
      <img id="fig_" src="../img_javascript/ex-3-14-sol-2.png"></FIGURE>

      After evaluating       
      <kbd>const w = mystery(v);</kbd>
      the values of
      <kbd>v</kbd> and
      <kbd>w</kbd> become:
      
      <FIGURE>
      <img id="fig_" src="../img_javascript/ex-3-14-sol-2.png"></FIGURE>

      The function <kbd>display</kbd>
      prints <kbd>["a", null]</kbd> for
      <kbd>v</kbd> and
      <kbd>["d", ["c", ["b", ["a", null]]]]</kbd> for
      <kbd>w</kbd>.
    </SOLUTION></div></div>
</EXERCISE></div>


  
  
  
  

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
     
    Sharing and identity
  </h2></div>

  
  

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    We mentioned in section&nbsp;<REF NAME="sec:costs-of-assignment"><a class="superscript" id="3.3.1-sec-link-3.1.3" href="./3.1.3.html">3.1.3</a></REF> the
    theoretical issues of
    
    
    <QUOTE>sameness</QUOTE> and <QUOTE>change</QUOTE>
    raised by the introduction of assignment.  These issues arise in practice
    when individual pairs are <EM>shared</EM> among different data objects.
    For example, consider the structure formed by
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define x (list 'a 'b))
(define z1 (cons x x))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const x = list("a", "b");
const z1 = pair(x, x);
      </kbd></span></td></tr></table>
    As shown in
    
      <span style="color:green">
        figure&nbsp;<REF NAME="fig:identity1_scheme"><a class="superscript" id="3.3.1-fig-link-3.31" href="./3.3.1.html#fig_3.31">3.31</a></REF>,
      </span>
      <span style="color:blue">
        figure&nbsp;<REF NAME="fig:identity1"><a class="superscript" id="3.3.1-fig-link-3.32" href="./3.3.1.html#fig_3.32">3.32</a></REF>,
      </span>
    
    <kbd>z1</kbd> is a pair whose
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    both point to the same pair <kbd>x</kbd>.  This sharing
    of <kbd>x</kbd> by the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    of <kbd>z1</kbd> is a consequence of the straightforward
    way in which
    
      <span style="color:green"><kbd>cons</kbd></span>
      <span style="color:blue"><kbd>pair</kbd></span>
    
    is implemented.  In general, using
    
      <span style="color:green"><kbd>cons</kbd></span>
      <span style="color:blue"><kbd>pair</kbd></span>
    
    to construct lists will result in an interlinked structure of pairs in
    which many individual pairs are shared by many different structures.
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
        <FIGURE>
      <img style="width: 70%" id="fig_3.31" src="../img_original/ch3-Z-G-17.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.31">Figure 3.31 </a></b>
	    The list <kbd>z1</kbd> formed by
	    <kbd>(cons x x)</kbd>.
	  </div></FIGURE>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
        <FIGURE>
      <img id="fig_3.32" src="../img_javascript/ch3-Z-G-17.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.32">Figure 3.32 </a></b>
	    The list <kbd>z1</kbd> formed by
	    <kbd>pair(x, x)</kbd>.
          </div></FIGURE>
      </span></td></tr></table>
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
        <FIGURE>
      <img id="fig_3.33" src="../img_original/ch3-Z-G-18.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.33">Figure 3.33 </a></b>
	    The list <kbd>z2</kbd> formed by
	    <kbd>(cons (list 'a 'b) (list 'a 'b))</kbd>.
	  </div></FIGURE>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
        <FIGURE>
      <img id="fig_3.34" src="../img_javascript/ch3-Z-G-18.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.3.1.html#fig_3.34">Figure 3.34 </a></b>
	    The list <kbd>z2</kbd> formed by
	    <kbd>pair(list("a", "b"), list("a", "b"))</kbd>.
	  </div></FIGURE>
      </span></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    In contrast to
    
      <span style="color:green">
	figure&nbsp;<REF NAME="fig:identity1_scheme"><a class="superscript" id="3.3.1-fig-link-3.31" href="./3.3.1.html#fig_3.31">3.31</a></REF>,
	figure&nbsp;<REF NAME="fig:identity2_scheme"><a class="superscript" id="3.3.1-fig-link-3.33" href="./3.3.1.html#fig_3.33">3.33</a></REF>
      </span>
      <span style="color:blue">
	figure&nbsp;<REF NAME="fig:identity1"><a class="superscript" id="3.3.1-fig-link-3.32" href="./3.3.1.html#fig_3.32">3.32</a></REF>,
	figure&nbsp;<REF NAME="fig:identity2"><a class="superscript" id="3.3.1-fig-link-3.34" href="./3.3.1.html#fig_3.34">3.34</a></REF>
      </span>
    
    shows
    the structure created by
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define z2 (cons (list 'a 'b) (list 'a 'b)))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const z2 = pair(list("a", "b"), list("a", "b"));
      </kbd></span></td></tr></table>
    In this structure, the pairs in the two
    
      <span style="color:green"><kbd>(a b)</kbd></span>
      <span style="color:blue"><kbd>list("a", "b")</kbd>
      </span>
    
    lists are distinct, although
    
      <span style="color:green">
	the actual symbols are shared.
	<a class='superscript' id='footnote-link-4' href='#footnote-4'style="color:green">[4]</a>
      </span>
      <span style="color:blue">
	they contain the same strings.<a class='superscript' id='footnote-link-5' href='#footnote-5'style="color:blue">[5]</a>
      </span>
    
  </p></div>
  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    When thought of as a list, <kbd>z1</kbd> and
    <kbd>z2</kbd> both represent <QUOTE>the same</QUOTE> list:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
((a b) a b)
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
list(list("a", "b"), "a", "b")
      </kbd></span></td></tr></table>
    In general, sharing is completely undetectable if we operate on lists using
    only
    
      <span style="color:green"><kbd>cons</kbd>,</span>
      <span style="color:blue"><kbd>pair</kbd>,</span>
    
    
      <span style="color:green"><kbd>car</kbd>,</span>
      <span style="color:blue"><kbd>head</kbd>,</span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd>.</span>
      <span style="color:blue"><kbd>tail</kbd>.</span>
    
    However, if we allow mutators on list structure, sharing becomes
    significant.  As an example of the difference that sharing can make,
    consider the following
    
      <span style="color:green">procedure,</span>
    <span style="color:blue">function,</span>
    which modifies the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    of the structure to which it is applied:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (set-to-wow! x)
  (set-car! (car x) 'wow)
  x)
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function set_to_wow(x) {
    set_head(head(x), "wow");
    return x;
}
      </kbd></span></td></tr></table>
    Even though <kbd>z1</kbd> and
    <kbd>z2</kbd> are <QUOTE>the same</QUOTE> structure,
    applying
    
      <span style="color:green"><kbd>set-to-wow!</kbd></span>
      <span style="color:blue"><kbd>set_to_wow</kbd></span>
    
    to them yields different results.  With <kbd>z1</kbd>,
    altering the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    also changes the
    
      <span style="color:green"><kbd>cdr</kbd>,</span>
      <span style="color:blue"><kbd>tail</kbd>,</span>
    
    because in <kbd>z1</kbd> the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    and the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    are the same pair.  With <kbd>z2</kbd>, the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    are distinct, so
    
      <span style="color:green"><kbd>set-to-wow!</kbd></span>
      <span style="color:blue"><kbd>set_to_wow</kbd></span>
    
    modifies only the
    
      <span style="color:green"><kbd>car</kbd>:</span>
      <span style="color:blue"><kbd>head</kbd>:</span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
z1
      </kbd></span><kbd class='snippet-output'>
            ((a b) a b)
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
z1; 
      </kbd><kbd class='snippet-output'>      
[["a", ["b", null]], ["a", ["b", null]]]
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(set-to-wow! z1)
      </kbd></span><kbd class='snippet-output'>
((wow b) wow b)
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
set_to_wow(z1); 
      </kbd><kbd class='snippet-output'>
[["wow", ["b", null]], ["wow", ["b", null]]]
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
z2
      </kbd></span><kbd class='snippet-output'>
((a b) a b)
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
z2;
      </kbd><kbd class='snippet-output'>>
[["a", ["b", null]], ["a", ["b", null]]]
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(set-to-wow! z2)
      </kbd></span><kbd class='snippet-output'>
((wow b) a b)
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
set_to_wow(z2); 
      </kbd><kbd class='snippet-output'>
[["wow", ["b", null]], ["a", ["b", null]]]
      </kbd></span></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
	One way to detect sharing in list structures is to use the predicate 
	<kbd>eq?</kbd>, which we introduced in
	section&nbsp;<REF NAME="sec:quotation"><a class="superscript" id="3.3.1-sec-link-2.3.1" href="./2.3.1.html">2.3.1</a></REF> as a way to test whether two 
	symbols are equal. More generally, <kbd>(eq? x y)</kbd>
	tests whether <kbd>x</kbd> and
	<kbd>y</kbd> are the same object (that is, whether
	<kbd>x</kbd> and <kbd>y</kbd>
	are equal as pointers).
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
	One way to detect sharing in list structures is to use the
	
	
	
	primitive predicate <kbd>===</kbd>,	
	which we introduced in
	section&nbsp;<REF NAME="sec:conditionals"><a class="superscript" id="3.3.1-sec-link-1.1.6" href="./1.1.6.html">1.1.6</a></REF> to test whether two numbers
	are equal 
	and extended in section&nbsp;<REF NAME="sec:strings"><a class="superscript" id="3.3.1-sec-link-2.3.1" href="./2.3.1.html">2.3.1</a></REF> to test whether
	two strings are equal. When applied to two nonprimitive values,
	<kbd>x === y</kbd>
	tests whether <kbd>x</kbd> and
	<kbd>y</kbd> are the same object (that is, whether
	<kbd>x</kbd> and <kbd>y</kbd>
	are equal as pointers).
      </span></td></tr></table>
    Thus, with <kbd>z1</kbd> and
    <kbd>z2</kbd> as defined in
    
      <span style="color:green">
	figure&nbsp;<REF NAME="fig:identity1_scheme"><a class="superscript" id="3.3.1-fig-link-3.31" href="./3.3.1.html#fig_3.31">3.31</a></REF>
	and&nbsp;<REF NAME="fig:identity2_scheme"><a class="superscript" id="3.3.1-fig-link-3.33" href="./3.3.1.html#fig_3.33">3.33</a></REF>,
      </span>
      <span style="color:blue">
	figure&nbsp;<REF NAME="fig:identity1"><a class="superscript" id="3.3.1-fig-link-3.32" href="./3.3.1.html#fig_3.32">3.32</a></REF>
	and&nbsp;<REF NAME="fig:identity2"><a class="superscript" id="3.3.1-fig-link-3.34" href="./3.3.1.html#fig_3.34">3.34</a></REF>,
      </span>
    
    
      <span style="color:green"><kbd>(eq? (car z1) (cdr z1))</kbd>
      </span>
      <span style="color:blue"><kbd>head(z1) === tail(z1)</kbd>
      </span>
    
    is true and
    
      <span style="color:green">
      <kbd>(eq? (car z2) (cdr z2))</kbd></span>
      <span style="color:blue"><kbd>head(z2) === tail(z2)</kbd>
      </span>
    
    is false.
  </p></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    As will be seen in the following sections, we can exploit sharing to
    greatly extend the repertoire of data structures that can be
    represented by pairs.  On the other hand, sharing can also be
    
    dangerous, since modifications made to structures will also affect
    other structures that happen to share the modified parts.  The mutation
    operations
    
      <span style="color:green"><kbd>set-car!</kbd></span>
      <span style="color:blue"><kbd>set_head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>set-cdr!</kbd></span>
      <span style="color:blue"><kbd>set_tail</kbd></span>
    
    should be used with care; unless we have a good understanding of how our
    data objects are shared, mutation can have unanticipated
    results.<a class='superscript' id='footnote-link-6' href='#footnote-6'>[6]</a>
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.15" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.15">Exercise 3.15 </a></b> 
  
    
    Draw box-and-pointer diagrams to explain the effect of
    
      <span style="color:green"><kbd>set-to-wow!</kbd></span>
      <span style="color:blue"><kbd>set_to_wow</kbd></span>
    
    on the structures <kbd>z1</kbd> and
    <kbd>z2</kbd> above.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_4_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_4_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
  
    <div class="permalink">
    <a name="ex_3.16" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.16">Exercise 3.16 </a></b> 
  
    Ben Bitdiddle decides to write a
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    to count the number of pairs in any list structure.
    <QUOTE>It's easy,</QUOTE> he reasons.  <QUOTE>The number of pairs in
    any structure is the number in the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    plus the number in the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    plus one more to count the current pair.</QUOTE> So Ben writes the following
    
      <span style="color:green">procedure:</span>
      <span style="color:blue">function</span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (count-pairs x)
  (if (not (pair? x))
      0
      (+ (count-pairs (car x))
         (count-pairs (cdr x))
         1)))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function count_pairs(x) {
    return ! is_pair(x)
           ? 0
           : count_pairs(head(x)) + 
             count_pairs(tail(x)) +
             1;
}
      </kbd></span></td></tr></table>
    Show that this
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    is not correct.  In particular, draw box-and-pointer diagrams representing
    list structures made up of exactly three pairs for which Ben's
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    would return&nbsp;3; return 4; return 7; never return at all.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_64_5_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_64_5_div"><SOLUTION>
    
      <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
        </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const three_list = list("a", "b", "c");
const one = pair("d", "e");
const two = pair(one, one);
const four_list = pair(two, "f");
const seven_list = pair(two, two);
const cycle = list("g", "h", "i");
set_tail(tail(tail(cycle)), cycle);
        </kbd></span></td></tr></table>

      
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.17" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.17">Exercise 3.17 </a></b> 
  
    
    Devise a correct version of the
    
      <span style="color:green"><kbd>count-pairs</kbd></span>
      <span style="color:blue"><kbd>count_pairs</kbd></span>
    
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    of exercise&nbsp;<REF NAME="ex:count-pairs"><a class="superscript" id="3.3.1-ex-link-3.16" href="./3.3.1.html#ex_3.16">3.16</a></REF> that returns the number of
    distinct pairs in any structure.  (Hint: Traverse the structure, maintaining
    an auxiliary data structure that is used to keep track of which pairs have
    already been counted.)
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_64_6_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_64_6_div"><SOLUTION>
    
      <span style="color:blue"><kbd class='snippet'>
// solution provided by GitHub user clean99
	  
function count_pairs(x) {
    let counted_pairs = null;
    function is_counted_pair(current_counted_pairs, x) {
        return is_null(current_counted_pairs)
               ? false
               : head(current_counted_pairs) === x
               ? true
               : is_counted_pair(tail(current_counted_pairs), x);
    }
    function count(x) {
        if(! is_pair(x) || is_counted_pair(counted_pairs, x)) {
            return 0;
        } else {
            counted_pairs = pair(x, counted_pairs);
            return count(head(x)) +
                   count(tail(x)) +
                   1;
        }
    }
    return count(x);
}
	</kbd></span>
      
    </SOLUTION></div></div>
</EXERCISE></div>

  
  
    <div class="permalink">
    <a name="ex_3.18" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.18">Exercise 3.18 </a></b> 
  
    Write a
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    that examines a list and
    
    determines whether it contains a cycle, that is,
    whether a program that tried to find the end of the list by taking
    successive
    
      <span style="color:green"><kbd>cdr</kbd>s</span>
      <span style="color:blue"><kbd>tail</kbd>s</span>
    
    would go into an infinite loop. Exercise&nbsp;<REF NAME="ex:make-cycle"><a class="superscript" id="3.3.1-ex-link-3.13" href="./3.3.1.html#ex_3.13">3.13</a></REF>
    constructed such lists.
    
   
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_64_7_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_64_7_div"><SOLUTION>
    
      <span style="color:blue"><kbd class='snippet'>
// solution provided by GitHub user clean99

function contains_cycle(x) {
    let counted_pairs = null;
    function is_counted_pair(counted_pairs, x) {
        return is_null(counted_pairs)
               ? false
               : head(counted_pairs) === x
               ? true
               : is_counted_pair(tail(counted_pairs), x);
    }
    function detect_cycle(x) {
        if (is_null(x)) {
            return false;
        } else if (is_counted_pair(counted_pairs, x)) {
            return true;
        } else {
            counted_pairs = pair(x, counted_pairs);
            return detect_cycle(tail(x));
        }
    }
    return detect_cycle(x);
}
	</kbd></span>
      
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.19" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.19">Exercise 3.19 </a></b> 
  
    
    Redo exercise&nbsp;<REF NAME="ex:find-cycle"><a class="superscript" id="3.3.1-ex-link-3.18" href="./3.3.1.html#ex_3.18">3.18</a></REF> using an algorithm that
    takes only a constant amount of space.  (This requires a very clever idea.)
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_64_8_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_64_8_div"><SOLUTION>
    
      Define a fast pointer and a slow pointer. The fast pointer goes forward
      2 steps every time, while the slow pointer goes forward 1 step every time.
      If there is a cycle in the list, the fast pointer will eventually catch
      up with the slow pointer.
      
      <span style="color:blue"><kbd class='snippet'>
function contains_cycle(x) {
    function detect_cycle(fast, slow) {
        return is_null(fast) || is_null(tail(fast))
               ? false
               : fast === slow
               ? true
               : detect_cycle(tail(tail(fast)), tail(slow));
    }
    return detect_cycle(tail(x), x);
}
	</kbd></span>
    </SOLUTION></div></div>
</EXERCISE></div>


  
  

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
     
    Mutation is just assignment
  </h2></div>

  
  
  
  

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    When we introduced compound data, we observed in
    section&nbsp;<REF NAME="sec:data?"><a class="superscript" id="3.3.1-sec-link-2.1.3" href="./2.1.3.html">2.1.3</a></REF> that pairs can be represented purely
    in terms of
    
      <span style="color:green">procedures:</span>
      <span style="color:blue">functions:</span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (cons x y)
  (define (dispatch m)
    (cond ((eq? m 'car) x)
          ((eq? m 'cdr) y)
          (else (error "Undefined operation - - CONS" m))))
  dispatch)

(define (car z) (z 'car))

(define (cdr z) (z 'cdr))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function pair(x, y) {
    function dispatch(m) {
        return m === "head"
               ? x
               : m === "tail"
               ? y
               : error(m, "undefined operation -- pair");
    }
    return dispatch;	      
}

function head(z) { return z("head"); }

function tail(z) { return z("tail"); }
      </kbd></span></td></tr></table>
    The same observation is true for mutable data.  We can implement
    mutable data objects as
    
      <span style="color:green">procedures</span>
      <span style="color:blue">functions</span>
    
    using assignment and local state. For instance, we can extend the above
    pair implementation to handle
    
      <span style="color:green"><kbd>set-car!</kbd></span>
      <span style="color:blue"><kbd>set_head</kbd></span>
    
    and
    
      <span style="color:green"><kbd>set-cdr!</kbd></span>
      <span style="color:blue"><kbd>set_tail</kbd></span>
    
    in a manner analogous to the way we implemented bank accounts using
    
      <span style="color:green"><kbd>make-account</kbd></span>
      <span style="color:blue"><kbd>make_account</kbd></span>
    
    in section&nbsp;<REF NAME="sec:local-state-variables"><a class="superscript" id="3.3.1-sec-link-3.1.1" href="./3.1.1.html">3.1.1</a></REF>:
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (cons x y)
  (define (set-x! v) (set! x v))
  (define (set-y! v) (set! y v))
  (define (dispatch m)
    (cond ((eq? m 'car) x)
          ((eq? m 'cdr) y)
          ((eq? m 'set-car!) set-x!)
          ((eq? m 'set-cdr!) set-y!)
          (else (error "Undefined operation - - CONS" m))))
  dispatch)

(define (car z) (z 'car))

(define (cdr z) (z 'cdr))

(define (set-car! z new-value)
  ((z 'set-car!) new-value)
  z)

(define (set-cdr! z new-value)
  ((z 'set-cdr!) new-value)
  z)
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function pair(x, y) {
    function set_x(v) { x = v; }
    function set_y(v) { y = v; }
    return m => m === "head"
                ? x
                : m === "tail"
                ? y
                : m === "set_head"
                ? set_x
                : m === "set_tail"
                ? set_y
                : error(m, "undefined operation -- pair");
}

function head(z) { return z("head"); }

function tail(z) { return z("tail"); }

function set_head(z, new_value) {
    z("set_head")(new_value);
    return z;
}
function set_tail(z, new_value) {
    z("set_tail")(new_value);
    return z;
}
      </kbd></span></td></tr></table>
  </p></div>

  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    Assignment is all that is needed, theoretically, to account for the
    behavior of mutable data.  As soon as we admit
    
      <span style="color:green"><kbd>set!</kbd></span>
      <span style="color:blue">assignment</span>
    
    to our language, we raise all the issues, not only of assignment, but of
    mutable data in general.<a class='superscript' id='footnote-link-7' href='#footnote-7'>[7]</a>
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.20" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.20">Exercise 3.20 </a></b> 
  
    Draw environment diagrams to illustrate the evaluation of the sequence
    of
    
      <span style="color:green">
	expressions
      </span>
      <span style="color:blue">
	statements
      </span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define x (cons 1 2))
(define z (cons x x))
(set-car! (cdr z) 17)

(car x)
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
const x = pair(1, 2);
const z = pair(x, x);
set_head(tail(z), 17);
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(car x)
      </kbd></span><kbd class='snippet-output'>
            17
      </kbd></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
head(x);
      </kbd><kbd class='snippet-output'>
17
      </kbd></span></td></tr></table>
    using the 
    
      <span style="color:green">
            procedural 
      </span>
      <span style="color:blue">
            functional
      </span>
    
    implementation of pairs given above.  (Compare
    exercise&nbsp;<REF NAME="ex:two-accounts"><a class="superscript" id="3.3.1-ex-link-3.11" href="./3.2.4.html#ex_3.11">3.11</a></REF>.)
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_64_9_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_64_9_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
  
  
  
  
<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1' >[1] </a>
    <FOOTNOTE>
    
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
	<kbd>Set-car!</kbd> and
	<kbd>set-cdr!</kbd> return
	implementation-dependent
	
	
	
	
	values.  Like <kbd>set!</kbd>, they should be used
	only for their effect.
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
	The functions <kbd>set_head</kbd> and
	<kbd>set_tail</kbd> return the value
	<kbd>undefined</kbd>.
	
	
	They should be used only for their effect.
      </span></td></tr></table>
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2' >[2] </a>
    <FOOTNOTE>
    We see from this that mutation operations on
    lists can create <QUOTE>garbage</QUOTE> that is not part of any accessible
    structure. We will see in section&nbsp;<REF NAME="sec:gc"><a class="superscript" id="3.3.1-sec-link-5.3.2" href="./5.3.2.html">5.3.2</a></REF> that
    
      <span style="color:green">Lisp</span>
      <span style="color:blue">JavaScript</span>
    
    memory-management systems include a 
    
    <EM>garbage collector</EM>, which identifies and recycles the memory
    space used by unneeded pairs.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3' >[3] </a>
    <FOOTNOTE>
    
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr><td><span style="color:green">
	<kbd>Get-new-pair</kbd>
	is one of the operations that must be implemented as part of the memory
	management required by a Lisp implementation.
	We will discuss this in
	section&nbsp;<REF NAME="sec:memory-as-vectors"><a class="superscript" id="3.3.1-sec-link-5.3.1" href="./5.3.1.html">5.3.1</a></REF>.
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
	Section&nbsp;<REF NAME="sec:memory-as-vectors"><a class="superscript" id="3.3.1-sec-link-5.3.1" href="./5.3.1.html">5.3.1</a></REF>
	will show how a memory-management system
	can implement <kbd>get_new_pair</kbd>.
      </span></td></tr></table>
  
    </FOOTNOTE></div>

    
    <div class='footnote'><span style="color:green">
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4' style="color:green">[4] </a>
    <FOOTNOTE>
    The two pairs are distinct because each call to
	<kbd>cons</kbd> returns a new pair.  The
        symbols are shared; in Scheme there is a
        
	unique symbol with any given
        name.  Since Scheme provides no way to mutate a symbol, this sharing is
        undetectable.  Note also that the sharing is what enables us to
        compare symbols using <kbd>eq?</kbd>, which simply checks equality of
        pointers.
    </FOOTNOTE></span></div>

    
    <div class='footnote'><span style="color:blue">
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5' style="color:blue">[5] </a>
    <FOOTNOTE>
    The two pairs are distinct
	because each call to <kbd>pair</kbd>
	returns a new pair. The strings are
        
	<QUOTE>the same</QUOTE> in the sense
	that they are primitive data (just like numbers) that are composed of
	the same characters in the same order. Since JavaScript provides no way
	to mutate a string, any sharing that the designers of a JavaScript
	interpreter might decide to implement for strings is undetectable.
	We consider primitive data such as numbers, booleans, and strings
	to be <EM>identical</EM> if and only if they are
	<EM>indistinguishable</EM>.
	
	
    </FOOTNOTE></span></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-6' href='#footnote-link-6' >[6] </a>
    <FOOTNOTE>
    The subtleties of dealing with sharing of mutable data
    objects reflect the underlying issues of <QUOTE>sameness</QUOTE> and
    <QUOTE>change</QUOTE> that were raised in
    section&nbsp;<REF NAME="sec:costs-of-assignment"><a class="superscript" id="3.3.1-sec-link-3.1.3" href="./3.1.3.html">3.1.3</a></REF>.  We mentioned there
    that admitting change to our language requires that a compound object must
    have an <QUOTE>identity</QUOTE> that is something different from the pieces
    from which it is composed.  In
    
      <span style="color:green">Lisp,</span>
      <span style="color:blue">JavaScript,</span>
    
    we consider this <QUOTE>identity</QUOTE> to be the quality that is tested by
    <span style="color:green"><kbd>eq?</kbd>,</span>
    <span style="color:blue"><kbd>===</kbd>,</span>
    
    i.e., by equality of pointers.  Since in most
    
      <span style="color:green">Lisp</span>
      <span style="color:blue">JavaScript</span>
    
    implementations a pointer is essentially a memory address, we are
    <QUOTE>solving the problem</QUOTE> of defining the identity of objects by
    stipulating that a data object <QUOTE>itself</QUOTE> is the information
    stored in some particular set of memory locations in the computer.  This
    suffices for simple
    
      <span style="color:green">Lisp</span>
      <span style="color:blue">JavaScript</span>
    
    programs, but is hardly a general way to resolve the issue of
    <QUOTE>sameness</QUOTE> in computational models.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-7' href='#footnote-link-7' >[7] </a>
    <FOOTNOTE>
    On the other hand, from the viewpoint of
    implementation, assignment requires us to modify the environment, which is
    itself a mutable data structure.  Thus, assignment and mutation are
    equipotent: Each can be implemented in terms of the other.
    </FOOTNOTE></div>

    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./3.3.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='66' href='./3.3.2.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      3.3.1&nbsp;&nbsp;
    Mutable List Structure
  
    </div>
    <script> var chapter_id = 65; </script>
    <script> var chapter_path = "chapters/3.3.1.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>