[{"id":"/sicpjs/3.3.4","tag":"TITLE","body":"3.3.4  \n    A Simulator for Digital Circuits"},{"tag":"TEXT","id":"#p1","child":[{"body":"\n    Designing complex digital systems, such as computers, is an important\n    engineering activity.  Digital systems are constructed by\n    interconnecting simple elements.  Although the behavior of these\n    individual elements is simple, networks of them can have very complex\n    behavior.  Computer simulation of proposed circuit designs is an\n    important tool used by digital systems engineers.  In this section we\n    design a system for performing digital logic simulations.  This system\n    typifies a kind of program called an \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"event-driven simulation","tag":"#text"}]},{"body":", in\n    which actions (\"","tag":"#text"},{"body":"events","tag":"#text"},{"body":"\") trigger further events that happen\n    at a later time, which in turn trigger more events, and so on.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p2","child":[{"body":"\n    Our computational model of a circuit will be composed of objects that\n    correspond to the elementary components from which the circuit is\n    constructed.  There are \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"wires","tag":"#text"}]},{"body":", which carry \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"digital signals","tag":"#text"}]},{"body":".  A digital signal may at any moment have only one of two\n    possible values,\n    0 and 1.  There are also various types of digital \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"function boxes","tag":"#text"}]},{"body":", which connect wires carrying input signals to other output\n    wires.  Such boxes produce output signals computed from their input\n    signals.  The output signal is \n    \n    delayed by a time that depends on the\n    type of the function box.  For example, an \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"inverter","tag":"#text"}]},{"body":" is a\n    primitive function box that inverts its input.  If the\n    input signal to an inverter changes to 0, then one ","tag":"#text"},{"tag":"EM","child":[{"body":"inverter-delay","tag":"#text"}]},{"body":"\n    later the inverter will change its output signal to 1.  If the input\n    signal to an inverter changes to 1, then one ","tag":"#text"},{"tag":"EM","child":[{"body":"inverter-delay","tag":"#text"}]},{"body":" later\n    the inverter will change its output signal to 0.  We draw an inverter\n    symbolically as in figure ","tag":"#text"},{"tag":"REF","body":"3.24","href":"/sicpjs/3.3.4#fig-3.24"},{"body":".  An \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"and-gate","tag":"#text"}]},{"body":",\n    also shown in figure ","tag":"#text"},{"tag":"REF","body":"3.24","href":"/sicpjs/3.3.4#fig-3.24"},{"body":", is a primitive\n    function box with two inputs and one output.  It drives its output signal\n    to a value that is the \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"logical and","tag":"#text"}]},{"body":" of the inputs.  That is, if both\n    of its input signals become 1, then one ","tag":"#text"},{"tag":"EM","child":[{"body":"and-gate-delay","tag":"#text"}]},{"body":" time\n    later the and-gate will force its output signal to be 1; otherwise the\n    output will be 0.  An \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"or-gate","tag":"#text"}]},{"body":" is a similar two-input primitive function\n    box that drives its output signal to a value that is the \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"logical or","tag":"#text"}]},{"body":" of the inputs.  That is, the output will become 1 if at least one\n    of the input signals is 1; otherwise the output will become 0.\n  ","tag":"#text"}]},{"tag":"FIGURE","scale":"70%","src":"img_original/ch3-Z-G-24.svg","id":"#fig-3.24","captionHref":"/sicpjs/3.3.4#fig-3.24","captionName":"Figure 3.24 ","captionBody":[{"body":"Primitive functions in the digital logic simulator.\n      ","tag":"#text"}]},{"tag":"TEXT","id":"#p3","child":[{"body":"\n    We can connect primitive functions together to construct more complex\n    functions.  To accomplish this we wire the outputs of some\n    function boxes to the inputs of other function boxes.  For example,\n    the \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"half-adder","tag":"#text"}]},{"body":" circuit shown in\n    figure ","tag":"#text"},{"tag":"REF","body":"3.25","href":"/sicpjs/3.3.4#fig-3.25"},{"body":" consists of an\n    or-gate, two and-gates, and an inverter.  It takes two input signals,\n    ","tag":"#text"},{"body":"$A$","tag":"LATEX"},{"body":" and ","tag":"#text"},{"body":"$B$","tag":"LATEX"},{"body":", and has\n    two output signals, ","tag":"#text"},{"body":"$S$","tag":"LATEX"},{"body":" and ","tag":"#text"},{"body":"$C$","tag":"LATEX"},{"body":".\n    ","tag":"#text"},{"body":"$S$","tag":"LATEX"},{"body":" will become 1\n    whenever precisely one of ","tag":"#text"},{"body":"$A$","tag":"LATEX"},{"body":" and ","tag":"#text"},{"body":"$B$","tag":"LATEX"},{"body":"\n    is 1, and ","tag":"#text"},{"body":"$C$","tag":"LATEX"},{"body":" will become 1 whenever\n    ","tag":"#text"},{"body":"$A$","tag":"LATEX"},{"body":" and ","tag":"#text"},{"body":"$B$","tag":"LATEX"},{"body":" are both 1.  We can see\n    from the figure that, because of the\n    delays involved, the outputs may be generated at different times.\n    Many of the difficulties in the design of digital circuits arise from\n    this fact.\n    ","tag":"#text"},{"tag":"FIGURE","scale":"80%","src":"img_original/ch3-Z-G-25.svg","id":"#fig-3.25","captionHref":"/sicpjs/3.3.4#fig-3.25","captionName":"Figure 3.25 ","captionBody":[{"body":"A half-adder circuit.\n      ","tag":"#text"}]}]},{"tag":"TEXT","id":"#p4","child":[{"body":"\n    We will now build a program for modeling the digital logic circuits we\n    wish to study.  The program will construct computational objects\n    modeling the wires, which will \"","tag":"#text"},{"body":"hold","tag":"#text"},{"body":"\" the signals.  Function\n    boxes will be modeled by\n    functions\n    that enforce the correct relationships among the signals.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p5","child":[{"body":"\n    One basic element of our simulation will be a\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_wire"},{"body":",\n    which constructs wires.  For example, we can construct six wires as follows:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":1,"eval":true,"prependLength":37,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIokYQzeiiirVOoNNgq7CTnQzABGs6qNW7S9yq6EMxIW-nu+XB5m1hPO8X56n7mvC8a+-vItGc5vz4cQA","body":"const a = make_wire();\nconst b = make_wire();\nconst c = make_wire();\nconst d = make_wire();\nconst e = make_wire();\nconst s = make_wire(); "},{"body":"\n    We attach a function box to a set of wires by calling a\n    function\n    that constructs that kind of box.  The arguments to the constructor\n    function\n    are the wires to be attached to the box.  For example, given\n    that we can construct and-gates, or-gates, and inverters, we can wire\n    together the half-adder shown in figure ","tag":"#text"},{"tag":"REF","body":"3.25","href":"/sicpjs/3.3.4#fig-3.25"},{"body":":\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":2,"eval":true,"prependLength":169,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAdgIBy0ywgULFBAGlkcXJwA4vqAASBCxaABB5nLPC-EQACcL+ASCGN0BQJC8MwaWvAAIzKRToTX8rBAGPSbAhUAAAyWBDwU5QNAAhN2dQAD8KC0FyAAFwPEgU9aBoBir4OQYA7BshMGsCQYQlBxCSrULIRQuQmDyHmzwR9RkbJqEuHUNHXgFAT46HsPoZhHCqIAIgbw-hcEhFRB4PoLeO8hqsgPkfBgJ9YrnyvjfO+D8SBPyzm-D+mJK65wNF0YBmQU4uCoEfA4R9CYxUrsvXoAYoKQ1kAHecCRfBjS-j-P+ACtC2F0PwLggCF5r2iROEJwjeBdFARLTIbcPodyLl3Mx1d0lJxcMw5mHiGwAD5yKhPsHwOxZAHFkFvPEHwGYkay3dnkYYljbHilcbxB8-ll6JPaS0sobj+pI1-OoKg4x1Bbxir-ckIZ8hfD4LxVSBs1ZBmYImRZKEAaeO5LQdQWQaAMEmUzHm4MdmWSWTEZJv4Zk8DmSQBZ4lLkPlMCqICbVmDNEJk-BW8ivD1LGghJGPz7aWCGWUVgY1ExIxiuqEYEZ4n8B8fUwm3ZUaIv+YkCGABCJ6W5MUxnyRi3xEMmzIqxUjImNzeB3N+A8rowxwWWBRGg05rsBajIOW4Y5RMmlNIOiQEgDAWQDLBbxTZ-cdmdK2WNCmlQ+5MorMkyoEcTlMxilkIMRwyD0tdAbH85kRjIM0EbeR6h8ksIeH8klFrZB4KNbQ9QMkzW2tAFQmw8Kym8Fdfa41PThjmrXpg-IQqRXSoDD6w8Ei2QjF4cQcYRAqACFoFQA4H086YgALSZqaKERRaqDXZU1awbVDyt4By4KHD5Xyy4w1vk2NaNb-YZzllWnETaA4nwbdW0IqqA6kvGlMDtLbIXdvbb25I2AskWKUnFFwWRDBAA","body":"or_gate(a, b, d); ","output":"\"ok\""},{"tag":"SNIPPET","latex":false,"id":3,"eval":true,"prependLength":165,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAc3sFUHQFAkLweTga8ACMykp4Tv6sCfj1NjfABk98PCnt+gCfbt1AA-G-H9yAAXA8G+T0mwIVAMVQBr936s2-qwF+wDQCgPAbAyBv8v4INQf-Q8VE0qvBTi4dQ0deAUCyA8KIPB9AYIAR9RkbJr74MIXBEhOh7D6C3gdbOucDRdDPpkPBFcCBkAOAIwm7C2jDF6AGKCkNZAB3nAkXwY0MZ7wPjwI+fItC2F0PwLgJ8F5r30cuDRzDeBdAvhLTIbcPodyLl3LOuROE107i4DBzMpENgAHzkU0fYPgVABFCLILeeIPgMxI1lu7PIwxuElGzsvCR-Ukb+WXqYmJYiyjxKWkzX86gqDjHUGwlqKjVG-BIF8PgvFVIGzVkGZgiZykoQBtI7ktB1BZBoAwfJTMebgyaZZCpMRzG-iKSGfIZTxL9IfKYFUQE2rMGaITHgTBSFaK8CEsaCEkaLMzuIipY1ExIxiuqEYEZjH8DkSEwm3ZUanNWYkCGABCJ6W5bkxhcTc+REMmznLuUjImQzeDFNGV0HZDTzHdNdgLbJbS3CdKJuE8JB0SAkAYCySJ6TeL1P7k0uJuymwU0qH3DJlgUQf0qBHLpTMYpZCDEcMgpTKaXKyo0EYr9NBGzIeoFxcgYFkJeQwLlsgAEsvgeoGSHKBWgBgTYY53jeASqFaypJwxOVr2-vkZFqKcUoXlVgmhlN8HEHGEQKgAhaBUAOB9POmIAC01qmihFYRSn85lqWsFpaUreAcuCh1mfMsuMNYo+pxH6-2Gc5ZBqmCGgOJCmxrSjWGz541I2hHJQHVgEa5kpuSNgOxVcuFKTii4EghggA","body":"and_gate(a, b, c); ","output":"\"ok\""},{"tag":"SNIPPET","latex":false,"id":4,"eval":true,"prependLength":160,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAc3gZEDH+Yfa2RAHAQZAuFQJ-H-jmUxdHsfMDml9QZDsgB-OCS+GNGN0BQJC8MwRBUGWFoWwuh+APxPgTJGdRW7tx7ofPesDO4uDdubJ+DYAB85EQH2D4OfMgl9bzxB8BmJGst3Z5GGIfAhzpd533AfjJGv51BUHGOoHiLUv4-z-gA5YqkDa-lYI9JsCEUFyAAPygAAIyiNkAALgeEIqRMjQASJEazeRH1GRslYC4dQ0deAUCyA8KIPB9Bbxir-ckIZ8hfD4LxPhTM1ZBn-nlexBNn7cloOoLINAGBsKZjzcGHjLJuIjig38lieDWJILY8SbiHymBVEBNqzBmiEx4EwYxoCvDELGghJGGTM7DF6AGQRTZExIxiuqEYEYdA4LfsQwm3ZUZ1L-u-CGABCJ6W4cmJE5MorJ9hekf3KTWdpUDkYRN4FE34MSujFLcRM-cLsIYGyJkwnxbh-FEzIWQg6JASAMBZBQsoJTKGVCaXIZeZyyhlObCcSofcbmWBRCgyoYTJZ1BilkIMRwyBzNdGsrKjQRiKM0EbEx6gBniMGW04h0K5FYjBTJSFCKVFYJqdg3gaL5Ggqek2dQ-ll5QrXhI-IhzjnXN4jiw8VE0qU10cQcYACBC0CoAcD6edMQAFpuVNFCGYgJTNfw-NYH8mJW8A5cFDiktJZcYaxRlTiOV-sM5yyVVMFVAcjFNjWlqtVENdWytCGEgOdy9UmuSNgW++82QkBcOIAwQA","body":"inverter(c, e); ","output":"\"ok\""},{"tag":"SNIPPET","latex":false,"id":5,"eval":true,"prependLength":165,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAc3sFUHQFAkLweTga8ACMykp4Tv6sCfj1NjfABk98PCnt+gCfbt1AA-G-H9yAAXA8G+T0mwIVAMVQBr936s2-qwF+wDQCgPAbAyBv8v4INQf-Q8VE0qvBTi4dQ0deAUCyA8KIPB9AYIAR9RkbJr74MIXBEhOh7D6C3gdbOucDRdDPpkPBFcCBkAOAIwm7C2jDF6AGKCkNZAB3nAkXwY0MZ7wPjwI+fItC2F0PwLgJ8F5r30cuDRzDeBdAvhLTIbcPodyLl3LOuROE107i4DBzMpENgAHzkU0fYPgVABFCLILeeIPgMxI1lu7PIwxuElGzsvCR-Ukb+WXqYmJYiyjxKWkzX86gqDjHUGwlqKjVG-BIF8PgvFVIGzVkGZgiZykoQBtI7ktB1BZBoAwfJTMebgyaZZCpMRzG-iKSGfIZTxL9IfKYFUQE2rMGaITHgTBSFaK8CEsaCEkaLMzuIipY1ExIxiuqEYEZjH8DkSEwm3ZUanNWYkCGABCJ6W5bkxhcTc+REMmznLuUjImQzeDFNGV0HZDTzHdNdgLbJbS3CdKJuE8JB0SAkAYCySJ6TeL1P7k0uJuymwU0qH3DJlgUQf0qBHLpTMYpZCDEcMgpTKaXKyo0EYr9NBGzIeoFxcgYFkJeQwLlsgAEsvgeoGSHKBWgBgTYY53jeASqFaypJwxOVr2-vkZFqKcUoXlVgmhlN8HEHGEQKgAhaBUAOB9POmIAC01qmihFYRSn85lqWsFpaUreAcuCh1mfMsuMNYo+pxH6-2Gc5ZBqmCGgOJCmxrSjWGz541I2hHJQHVgEa5kpuSNgOxVcuFZBcGsFEQA","body":"and_gate(d, e, s); ","output":"\"ok\""}]},{"tag":"TEXT","id":"#p6","child":[{"body":"\n    Better yet, we can explicitly name this operation by defining a\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"half_adder"},{"body":"\n    that constructs this circuit, given the four\n    external wires to be attached to the half-adder:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":6,"eval":true,"prependLength":201,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaJPoL49LX4AmJIOQllGGXAmwJkWlmoGWACQg2pEkA66NrruRAuMGC2+MLOWot0AiEAA","body":"function half_adder(a, b, s, c) {\n    const d = make_wire();\n    const e = make_wire();\n    or_gate(a, b, d);\n    and_gate(a, b, c);\n    inverter(c, e);\n    and_gate(d, e, s);\n    return \"ok\";\n} "},{"body":"\n    The advantage of making this definition is that we can use ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"half_adder"},{"body":" itself as a building block in creating more complex\n    circuits.  Figure ","tag":"#text"},{"tag":"REF","body":"3.26","href":"/sicpjs/3.3.4#fig-3.26"},{"body":", for example, shows a\n    ","tag":"#text"},{"tag":"EM","child":[{"body":"full-adder","tag":"#text"}]},{"body":" composed of two half-adders and an or-gate.","tag":"#text"},{"tag":"FOOTNOTE_REF","id":"#footnote-link-1","body":"1","href":"/sicpjs/3.3.4#footnote-1"},{"body":" We can construct a\n      full-adder as follows:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":7,"eval":true,"prependLength":211,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaW20iFyJkocvRdY0QfWBBlokCeSe3hiSZFpZqBlvIiSSAIom3UL8ASDAzcxfNqbBhAuMGC2+MLuWhsDSi3QF511NvbdC11w7QgBvRY+Zllye6eCzZuz1oNTWlZmbI4E2B9BDAJZRlNxJByDB-fS4t3IM3evSBB5NsHuSpFXdNFDtbsOACQX2pFDaDb40HjRciEGRDti76yesHfaNdugw38EOCAA","body":"function full_adder(a, b, c_in, sum, c_out) {\n    const s = make_wire();\n    const c1 = make_wire();\n    const c2 = make_wire();\n    half_adder(b, c_in, s, c1);\n    half_adder(a, s, sum, c2);\n    or_gate(c1, c2, c_out);\n    return \"ok\";\n} "},{"body":"\n    Having defined\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"full_adder"},{"body":"\n    as a\n    function,\n    we can now use it as a building block for creating still more complex\n    circuits.  (For example, see exercise ","tag":"#text"},{"tag":"REF","body":"3.30","href":"/sicpjs/3.3.4#ex-3.30"},{"body":".)\n  ","tag":"#text"},{"tag":"FIGURE","scale":"80%","src":"img_original/ch3-Z-G-26.svg","id":"#fig-3.26","captionHref":"/sicpjs/3.3.4#fig-3.26","captionName":"Figure 3.26 ","captionBody":[{"body":"A full-adder circuit.\n      ","tag":"#text"}]}]},{"tag":"TEXT","id":"#p7","child":[{"body":"\n    In essence, our simulator provides us with the tools to construct a\n    language of circuits.  If we adopt the general perspective on\n    languages with which we approached the study of\n    JavaScript\n    in section ","tag":"#text"},{"tag":"REF","body":"1.1","href":"/sicpjs/1.1"},{"body":",\n    we can say that the primitive function boxes form the primitive\n    elements of the language, that wiring boxes together provides a means\n    of combination, and that specifying wiring patterns as\n    functions\n    serves as a means of abstraction.\n  ","tag":"#text"}]},{"tag":"SUBHEADING","id":"#h1","child":[{"body":"Primitive function boxes","tag":"#text"}]},{"tag":"TEXT","id":"#p8","child":[{"body":"\n    The primitive function boxes\n    \n    implement the \"","tag":"#text"},{"body":"forces","tag":"#text"},{"body":"\" by which a\n    change in the signal on one wire influences the signals on other\n    wires.  To build function boxes, we use the following operations on\n    wires:\n    ","tag":"#text"},{"tag":"UL","child":[{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"get_signal("},{"tag":"META","body":"wire"},{"tag":"JAVASCRIPTINLINE","body":")"},{"tag":"BR"},{"body":"\n\treturns the current value of the signal on the wire.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"set_signal("},{"tag":"META","body":"wire"},{"tag":"JAVASCRIPTINLINE","body":","},{"tag":"META","body":"new-value"},{"tag":"JAVASCRIPTINLINE","body":")"},{"body":":\n\t  ","tag":"#text"},{"tag":"BR"},{"body":"\n        changes the value of the signal on the wire to the new value.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"add_action("},{"tag":"META","body":"wire"},{"tag":"JAVASCRIPTINLINE","body":","},{"tag":"META","body":"function-of-no-arguments"},{"tag":"JAVASCRIPTINLINE","body":")"},{"body":":\n\t  ","tag":"#text"},{"tag":"BR"},{"body":"\n        asserts that the designated\n        function\n        should be run whenever the signal on the wire changes value.  Such\n        functions\n        are the vehicles by which changes in the signal value on the wire are\n\tcommunicated to other wires.\n      ","tag":"#text"}]}]},{"body":"\n    In addition, we will make use of a\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"after_delay"},{"body":"\n    that takes a time delay and a\n    function\n    to be run and executes the given\n    function\n    after the given delay.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p9","child":[{"body":"\n    Using these\n    functions,\n    we can define the primitive digital logic functions.  To connect an input\n    to an output through an inverter, we use\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"add_action"},{"body":"\n    to associate with the input wire a\n    function\n    that will be run whenever the signal on the input wire changes value.\n    The\n    function\n    computes the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"logical_not"},{"body":"\n    of the input signal, and then, after one\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"inverter_delay"},{"body":",\n      \n    sets the output signal to be this new value:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":8,"eval":true,"prependLength":143,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAc3qG8DwIb5F8fC8apBtq0GzCJkfKEA5Dsi-uoWQ0Aw6hIzz4O3xZbHHzEEvcjv5L7xIIfcS38HymBVEBNqzBmiEx4EwB4UQ94JF8GNBCSM4GZ2GL0AMrAxqJiRjFdUIwIw6HsLEGsyDORuxRldRBXgfAQwAIRPS3PQxIVCBakN4GwlBTZ5yUKRkTX8JBd6AMPsvbBwwUTULfq7AW99H5uBfjIpmstQAHRICQBgLI8hYN4lffuH8JHHzGhTSofdJFlGkUTSoEdVFMxilkIMRwyBAMpoTH85kRiPSbJoI2iD1DUORgAfgQboJBDCgnLgAFxYh8aAdQMkAlRInKEohJDEEpLqLE7xT1fH+WXoEteoT8haJ0cYlCWS5CxI+oyNkIwXDqGIOMIgVABC0CoAcD6edMQAFpelNFCPoV+TNfxONYC4oBW8A5cFDlAmBZcYaxTmTiBZ-sM5yxWVMNZAcshbOgaEOxAcIZNjWjsjZuDTnzMOckbezoiAx3zB9VsRADgEDIC4Kg7y3n40yjFaOsdmA5h+VBD+Ad+EMLGhjOgFARF71acsLQthwkvJ+QTQRchW7tx7i8x52LO4uCqcjUFDYAB85FkVkK+WQH5t54gMPRfYuoBThioveRaB5gLgXvIfPfKg4xlG3BatC2F3CEWwgNr+S5LCEIpNCQARhSbE6VTZFWs1CbK1mNSqJpVeI06OvAKB7K4TwYZfsAVPLZCQFw4gDBAA","body":"function inverter(input, output) {\n    function invert_input() {\n        const new_value = logical_not(get_signal(input));\n        after_delay(inverter_delay, \n                    () => set_signal(output, new_value));\n    }\n    add_action(input, invert_input);\n    return \"ok\";\n}\nfunction logical_not(s) {\n    return s === 0\n           ? 1\n           : s === 1\n           ? 0\n           : error(s, \"invalid signal\");\n} "}]},{"tag":"TEXT","id":"#p10","child":[{"body":"\n    An and-gate is a little more complex.  The action\n    function\n    must be run if\n    either of the inputs to the gate changes.  It computes the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"logical_and"},{"body":"\n\t(using a function analogous to\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"logical_not"},{"body":")\n      \n    of the values of the signals on the input wires and sets up a change\n    to the new value to occur on the output wire after one\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"and_gate_delay"},{"body":".\n      ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":9,"eval":true,"prependLength":153,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAc3sFUHQFAkLweTga8ACMykp4Tv6sCfj1NjfABk98PCnt+gCfbt1AA-G-H9yAAXA8G+T0mwIVAMVQBr936s2-qwF+wDQCgPAbAyBv8v4INQf-Q8VE0qvBTi4dQ0deAUCyA8KIPB9AYIAR9RkbJr74MIXBEhOh7D6C3jFA+5IQz5C+HwXiqkDZqyDMwRMvCUIA0hrIX86gsg0AYOoJGPNwYSIsmxPhMQJbclQrwHgXCSA8PEmoh8pgVRATaswZohMeBMFIboHRCRfBjQQkjKxmdhi9ADKwMaiYkYxXVCMCMzDeCxBrPYzkH81aBLsT4CGABCJ6W4vDRMJkTSJiTEgQybPOUJSMia-g4To34eiuhuLUTkuQijXYCykTItw8iP6yzRHUA6JASAMBZHkEpKFRH92UcvdxwxPFNgppUPu-Sygog-pUCOTMGkxSyEGI4ZAimugNj+cyIxX6aCNmQ9QGC0GpNCXszBGz4HqBkjso5sgYE2H8bYWxlzQAAJOfE9Q-ll67LXt-fIrT2l9N4g8qh2C2QjHwcQcYRAqACFoFQA4H086YgALQIqaKEVhMyma-nmawRZeit4By4KHMxFiy4w1ioSnExL-YZzluSqYlKA4kKbGtel1KMnjTpaEaZAdBnsvMZy5I29MjZ1zgaLoZ9Mh4IrgQMgBxpWEwOtnP5XTkllmpVk6JY0MZ7w4UfPkWg7n2DFQvNeJrlz6siV0C+GjW7tx7l0YV1cO5F17qAB5E4oKNgAHzkQNUEqg0rZVkFvPEJJRimZvOGGKkoirOkBgfBGsolro1tFjf1JGUiqDjDqYMLOuQRV0RcLFFwJBDBAA","body":"function and_gate(a1, a2, output) {\n    function and_action_function() {\n        const new_value = logical_and(get_signal(a1),\n                                      get_signal(a2));\n        after_delay(and_gate_delay, \n                    () => set_signal(output, new_value));\n    }\n    add_action(a1, and_action_function);\n    add_action(a2, and_action_function);\n    return \"ok\";\n} "}]},{"tag":"EXERCISE","title":"Exercise 3.28","id":"#ex-3.28","child":[{"body":"\n    Define an\n    \n    or-gate as a primitive function box.  Your\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"or_gate"},{"body":"\n    constructor should be similar to\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"and_gate"},{"body":".\n      ","tag":"#text"}],"solution":[{"tag":"SNIPPET","latex":false,"id":10,"eval":true,"prependLength":0,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChslAMYD2AdgC4BOAlgEYCuZApgCag0CeoA4lWQBJ0aoOgGdGFQgBtGAQxIBOebgBmdEgTJVSoSUQDmVAjMkB9IhQAUIgIwAaUCIBMASlABvbKC+gKjMnQoSB2tQAF5w0AAGUAAyGIdHMIjIz2807wB+KNT0tIAuYKTQqNAAH1LC8OLrHNyvLKcikvKEppq63Kz2jvzQcQpzK0d7ACIqEgA3YypWESo9EmMR51q6gv7Bm1HxqckZh3nFyWWAbmwAXyA","body":"// contributed by GitHub user clean99\n\nfunction logical_or(s1, s2) {\n    return s1 === 0 && s2 === 0\n           ? 0\n           : s1 === 0 || s1 === 1\n           ? s2 === 0 || s2 === 1\n             ? 1\n             : error(s2, \"invalid signal\")\n           : error(s1, \"invalid signal\");\n} "},{"tag":"SNIPPET","latex":false,"id":11,"eval":true,"prependLength":112,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcmmqQW0ALZcANYMzJQjU9Z0s0RkfDPOoACOvkn+gQ3KoAAOXCIrFLMumwxJRqaVw6DziyyrfKw19Yr7ABYM2a+GoEGdzKDwYCwYS2Yl18-ykH0aZGO-DeBkBuGBllAY0mUK2YXeQX2RxORAIPB4LlJ5IBQL6mLwwhoLAOZGEfGhfkk8O+vyy7LxNPRdIyoi4wmYLLZHIJe1oiIo-GlqNpVQyEQqjMhkv5VzWFDIDBG73VPz+HJc+sNgqGIPVovF2vNoEtRrh6vlirxFoNRuVQtVtAorGYhpZAE9cbqddsuYTA8GqfwGUyJazo+JrRiMhQiNZhCwOenvVadnISDRWGRXO4JcdhKAALyHOt8F2Usk8ZJ1Ch4UCt4OhsgRwvSmoBOqydXJrVpp1xWsiLsTyc2e2pqVe6seYnCJeyYygBg8ayl5fupF8NeOgWUms7vcTu2-B2zzfz+9GOqmOpxjZ4m7+vc2JTFwjBEFkXB8DKny0DwQbLAADJmwq0CQSiiJCLygRCEHQY0pp8th4FcMhAagiwaHCBhzxnGEREQS4qxjnIJq8l0YEMaATEAVmVhgk8rDsThJFwr+HpCcRpH3OqjwQmQgn0VwLjzG8p7ngqEmcSpAw2vSIiVmw-FyZpImxrKoAEa8RlLApHEkVJIKiAZsk2SZeH7OJLnyW5DmYq00xUHkdmnOcmTDCUdnMbIvGgAARkeNB0MG8V4FQajaaeuwwc6CYdlZSUSAAPoVXG0aAAA8oLgphtF8JZ2l7t+0UoViExTPOqyGdVyyrCUwxRXU5a5lW6yNq1OKFg+sg5nmBZ4uyfX9J+E6-sB0y0V1TwhWs6yNeOMX+WQgVeYJGW1BOPZ9l562zHVbENY2DZNkxmXLjNDD5pGMLXYW9Vgm8YiLdUy1foex4MK9E5DZW9Qw89F7aSDy7Or2fDxTwiXJQwqVqE5ZBiANyN1OpyL-S4O58GtHUbV521AzQgPjkTzMs3Unn-QTU0TgeR4nudrOZDkAWbXJgl41zX5M-u45NaA0NVipY0nW5IOXWjCVEElzApWlYQPfzxM2MrilOFLAtyBTVM1p1tO9WF-TKRzjVg3zZuC7kR0i65iMyyk2Dy1xPxBcJY1rYpUFGAHOaeB9BrilkR5cGGY0AEyRxWVZcOBzB0FwBrMAnPBJ2NKDp8NoBpTnedTIXxdNgArEYukZFweBxwXidhnwtdhvTRCE4dgXhz3oAANRy+hck3WEZBB4pjPmxO3REKbi9s3PkUAdgIBy0ywgULFBAGlkcXJwA4vqAASBCxaABB5nLPC-EQACcL+ASCGN0BQJC8MwaWvAAIzKRToTX8rBAGPSbAhUAAAyWBDwU5QNAAhN2dQAD8KC0FyAAFwPEgU9aBoBir4OQYA7BshMGsCQYQlBxCSrULIRQuQmDyHmzwR9RkbJqEuHUNHXgFAT46HsPoZhHCqIAIgbw-hcEhFRB4PoLeO8hqsgPkfBgJ9YrnyvjfO+D8SBPyzm-D+mJK65wNF0YBmQU4uCoEfA4R9CYxUrsvXoAYoKQ1kAHecCRfBjS-j-P+ACtC2F0PwLggCF5r2iROEJwjeBdFARLTIbcPodyLl3Mx1d0lJxcMw5mHiGwAD5yKhPsHwOxZAHFkFvPEHwGYkay3dnkYYljbHilcbxB8-ll6JPaS0sobj+pI1-OoKg4x1A3CAA","body":"// contributed by GitHub user clean99\n\nfunction or_gate(a1, a2, output) {\n    function or_action_function() {\n        const new_value = logical_or(get_signal(a1),\n                                     get_signal(a2));\n        after_delay(or_gate_delay, \n                    () => set_signal(output, new_value));\n    }\n    add_action(a1, or_action_function);\n    add_action(a2, or_action_function);\n    return \"ok\";\n} "}]},{"tag":"EXERCISE","title":"Exercise 3.29","id":"#ex-3.29","child":[{"body":"\n    Another way to construct an\n    \n    or-gate is as a compound digital logic\n    device, built from and-gates and inverters.  Define a\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"or_gate"},{"body":"\n    that accomplishes this.  What is the delay time of the\n    or-gate in terms of\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"and_gate_delay"},{"body":"\n    and\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"inverter_delay"},{"body":"?\n      ","tag":"#text"}],"solution":[{"body":"\n      (contributed by github user ","tag":"#text"},{"tag":"LINK","body":"taimoon","href":"https://github.com/taimoon"},{"body":")\n      \n\n      Idea: ~(~a & ~b) = nand(~a, ~b) = ~~a | ~~b = a | b\n      ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":12,"eval":false,"body":"function nand_gate(a1, a2, out){\n    const tmp = make_wire();\n    and_gate(a1, a2, tmp);\n    inverter(tmp, out);\n}\n\nfunction or_gate(a1, a2, out){\n    const not_a1 = make_wire();\n    const not_a2 = make_wire();\n    inverter(a1, not_a1);\n    inverter(a2, not_a2);\n    nand_gate(not_a1, not_a2, out);\n}"},{"body":"\n      The delay time of the nand-gate is\n      ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"nand_gate_delay = and_gate_delay + inverter_delay"},{"body":" and the delay time of the or-gate above is\n      ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"or_gate_delay = nand_gate_delay + inverter_delay = and_gate_delay + 2 * inverter_delay"},{"body":".\n    ","tag":"#text"}]},{"tag":"EXERCISE","title":"Exercise 3.30","id":"#ex-3.30","child":[{"body":"\n    Figure ","tag":"#text"},{"tag":"REF","body":"3.27","href":"/sicpjs/3.3.4#fig-3.27"},{"body":" shows a \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"ripple-carry adder","tag":"#text"}]},{"body":" formed by stringing\n    together ","tag":"#text"},{"body":"$n$","tag":"LATEX"},{"body":" full-adders.\n    This is the simplest form of parallel adder\n    for adding two ","tag":"#text"},{"body":"$n$","tag":"LATEX"},{"body":"-bit binary numbers.\n    The inputs ","tag":"#text"},{"body":"$A_{1}$","tag":"LATEX"},{"body":",\n    ","tag":"#text"},{"body":"$A_{2}$","tag":"LATEX"},{"body":",\n    ","tag":"#text"},{"body":"$A_{3}$","tag":"LATEX"},{"body":", …,\n    ","tag":"#text"},{"body":"$A_{n}$","tag":"LATEX"},{"body":" and\n    ","tag":"#text"},{"body":"$B_{1}$","tag":"LATEX"},{"body":",\n    ","tag":"#text"},{"body":"$B_{2}$","tag":"LATEX"},{"body":",\n    ","tag":"#text"},{"body":"$B_{3}$","tag":"LATEX"},{"body":", …,\n    ","tag":"#text"},{"body":"$B_{n}$","tag":"LATEX"},{"body":"\n    are the two binary numbers to be added (each\n    ","tag":"#text"},{"body":"$A_{k}$","tag":"LATEX"},{"body":" and\n    ","tag":"#text"},{"body":"$B_{k}$","tag":"LATEX"},{"body":"\n    is a 0 or a 1).  The circuit generates\n    ","tag":"#text"},{"body":"$S_{1}$","tag":"LATEX"},{"body":",\n    ","tag":"#text"},{"body":"$S_{2}$","tag":"LATEX"},{"body":",\n    ","tag":"#text"},{"body":"$S_{3}$","tag":"LATEX"},{"body":",\n    …,\n    ","tag":"#text"},{"body":"$S_{n}$","tag":"LATEX"},{"body":",\n    the ","tag":"#text"},{"body":"$n$","tag":"LATEX"},{"body":" bits of the sum, and\n    ","tag":"#text"},{"body":"$C$","tag":"LATEX"},{"body":", the carry from\n    the addition.  Write a\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"ripple_carry_adder"},{"body":"\n    that generates this circuit.  The\n    function\n    should take as arguments three lists of\n    ","tag":"#text"},{"body":"$n$","tag":"LATEX"},{"body":" wires each—the\n    ","tag":"#text"},{"body":"$A_{k}$","tag":"LATEX"},{"body":", the\n    ","tag":"#text"},{"body":"$B_{k}$","tag":"LATEX"},{"body":", and the\n    ","tag":"#text"},{"body":"$S_{k}$","tag":"LATEX"},{"body":"—and\n    also another wire ","tag":"#text"},{"body":"$C$","tag":"LATEX"},{"body":".\n    The major drawback of the ripple-carry adder is the need to wait for the\n    carry signals to propagate.  What is the delay needed to obtain the\n    complete output from an ","tag":"#text"},{"body":"$n$","tag":"LATEX"},{"body":"-bit ripple-carry\n    adder, expressed in terms of the delays for and-gates, or-gates, and\n    inverters?\n    ","tag":"#text"}]},{"tag":"FIGURE","scale":"80%","src":"img_original/ch3-Z-G-27.svg","id":"#fig-3.27","captionHref":"/sicpjs/3.3.4#fig-3.27","captionName":"Figure 3.27 ","captionBody":[{"body":"\n      A ripple-carry adder for ","tag":"#text"},{"body":"$n$","tag":"LATEX"},{"body":"-bit numbers.\n    ","tag":"#text"}]},{"tag":"SUBHEADING","id":"#h2","child":[{"body":"Representing wires","tag":"#text"}]},{"tag":"TEXT","id":"#p11","child":[{"body":"\n    A wire\n    \n    in our simulation will be a computational object with two local\n    state variables:\n    a ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"signal_value"},{"body":"\n    (initially taken to be 0) and a collection of\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"action_functions"},{"body":"\n    to be run when the signal changes value.  We implement the wire,\n    using\n    \n    message-passing style, as\n    a collection of local\n    functions\n    together with a ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"dispatch"},{"body":"function\n    that selects the appropriate local operation, just as we did\n    with the simple bank-account object in section\n     ","tag":"#text"},{"tag":"REF","body":"3.1.1","href":"/sicpjs/3.1.1"},{"body":":\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":13,"eval":true,"prependLength":10,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIokYQzeiiirVOoNNgq7CTnQzABGs6qNW7S9yq6EMxIW-nu+XB5m1hPO8X56n7mvC8a+-vItGc5vz4cQA","body":"function make_wire() {\n    let signal_value = 0;\n    let action_functions = null;\n    function set_my_signal(new_value) {\n        if (signal_value !== new_value) {\n            signal_value = new_value;\n            return call_each(action_functions);\n        } else {\n            return \"done\";\n        }\n    }\n    function accept_action_function(fun) {\n        action_functions = pair(fun, action_functions);\n        fun();\n    }\n    function dispatch(m) {\n        return m === \"get_signal\"\n               ? signal_value\n               : m === \"set_signal\"\n               ? set_my_signal\n               : m === \"add_action\"\n               ? accept_action_function\n               : error(m, \"unknown operation -- wire\");\n    }\n    return dispatch;\n} "},{"body":"\n    The local\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"set_my_signal"},{"body":"\n    tests whether the new signal value changes the signal on the wire.\n    If so, it runs each of the action\n    functions,\n    using the following\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"call_each"},{"body":",\n    which calls each of the items in a list of no-argument\n    functions:","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":14,"eval":true,"prependLength":0,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wXIA","body":"function call_each(functions) {\n    if (is_null(functions)) {\n        return \"done\";\n    } else {\n        head(functions)();\n        return call_each(tail(functions));\n    }\n} "},{"body":"\n    The local\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"accept_action_function"},{"body":"\n    adds the given\n    function\n    to the list of\n    functions\n    to be run, and then runs the new\n    function\n    once.  (See exercise ","tag":"#text"},{"tag":"REF","body":"3.31","href":"/sicpjs/3.3.4#ex-3.31"},{"body":".)\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p12","child":[{"body":"\n    With the local ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"dispatch"},{"body":"function\n    set up as specified, we can\n    provide the following\n    functions\n    to access the local operations on\n    wires:","tag":"#text"},{"tag":"FOOTNOTE_REF","id":"#footnote-link-2","body":"2","href":"/sicpjs/3.3.4#footnote-2"},{"tag":"SNIPPET","latex":false,"id":15,"eval":true,"prependLength":0,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBzAUzIH0BnCuogQwBsAKAO4UATgwCUoAN7ZQs0KLIFhtIaL4AiRi3ade6sQG5sAX3zFy1WqyZsO3fqoYAaUEQYDmAN14FxUmXIKSioiDBrW2nZ6YnxuHt48voYmZqSUNKBcACZZzFwWNIKhLvnpRMyEaZYS0nLyTMGgjhrZuaWW+nztNBXmZcnGQA","body":"function get_signal(wire) {\n    return wire(\"get_signal\");\n}\nfunction set_signal(wire, new_value) {\n    return wire(\"set_signal\")(new_value);\n}\nfunction add_action(wire, action_function) {\n    return wire(\"add_action\")(action_function);\n} "}]},{"tag":"TEXT","id":"#p13","child":[{"body":"\n    Wires, which have time-varying signals and may be incrementally attached to\n    devices, are typical of mutable objects.  We have modeled them as\n    functions\n    with local state variables that are modified by assignment.  When a new\n    wire is created, a new set of state variables is allocated (by the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"let"},{"body":" statements in\n      ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_wire"},{"body":")\n    and a new ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"dispatch"},{"body":"function\n    is constructed and returned, capturing\n    the environment with the new state variables.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p14","child":[{"body":"\n    The wires are shared among the various devices that have been\n    connected to them.  Thus, a change made by an interaction with one\n    device will affect all the other devices attached to the wire.  The\n    wire communicates the change to its neighbors by calling the action\n    functions\n    provided to it when the connections were established.\n  ","tag":"#text"}]},{"tag":"SUBHEADING","id":"#h3","child":[{"body":"The agenda","tag":"#text"}]},{"tag":"TEXT","id":"#p15","child":[{"body":"\n    The only thing needed to complete the simulator is\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"after_delay"},{"body":".\n    The idea here is that we maintain a data structure, called an\n    ","tag":"#text"},{"tag":"EM","child":[{"body":"agenda","tag":"#text"}]},{"body":", that contains a schedule of things to do.\n    The following operations are defined for agendas:\n    ","tag":"#text"},{"tag":"UL","child":[{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"make_agenda()"},{"body":":\n\t  ","tag":"#text"},{"tag":"BR"},{"body":"\n\treturns a new empty agenda.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"is_empty_agenda("},{"tag":"META","body":"agenda"},{"tag":"JAVASCRIPTINLINE","body":")"},{"tag":"BR"},{"body":"\n\tis true if the specified agenda is empty.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"first_agenda_item("},{"tag":"META","body":"agenda"},{"tag":"JAVASCRIPTINLINE","body":")"},{"tag":"BR"},{"body":"\n\treturns the first item on the agenda.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"remove_first_agenda_item("},{"tag":"META","body":"agenda"},{"tag":"JAVASCRIPTINLINE","body":")"},{"tag":"BR"},{"body":"\n        modifies the agenda by removing the first item.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"add_to_agenda("},{"tag":"META","body":"time"},{"tag":"JAVASCRIPTINLINE","body":","},{"tag":"META","body":"action"},{"tag":"JAVASCRIPTINLINE","body":","},{"tag":"META","body":"agenda"},{"tag":"JAVASCRIPTINLINE","body":")"},{"tag":"BR"},{"body":"\n        modifies the agenda by adding the given action\n        function\n        to be run at the specified time.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"tag":"JAVASCRIPTINLINE","body":"current_time("},{"tag":"META","body":"agenda"},{"tag":"JAVASCRIPTINLINE","body":")"},{"tag":"BR"},{"body":"\n        returns the current simulation time.\n      ","tag":"#text"}]}]}]},{"tag":"TEXT","id":"#p16","child":[{"body":"\n    The particular agenda that we use is denoted by\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"the_agenda"},{"body":".\n    The\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"after_delay"},{"body":"\n    adds new elements to\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"the_agenda"},{"body":":","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":16,"eval":true,"prependLength":84,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfUrvYGcWBzLkTIAKTiwA0oAI4EWsgJSgA3tlBqATizIF1tAA4MK60RS6SZclvIDc2AL75i5arV4CWQjqZbDuipaCa2rqgABYsDAAmvjagDo6klDSgboJkbBayMcqBWjq0ZIYANjHWcbiEiS70zOyZPv65wfqGxkQERUWS7Z2x8ZXOyXjqNOl6ZMb1jUH5YRHRU2X9Tkm0mgzqbOOTsgo5MyGFFCWL5QmDrlpsw6NbE8L1khRkLHSNvOnhUQ+7EqDPrz6FRW1Q+bHWm22P0sTxebxyYKOJ1+sMBS2BVWSFG4bFe4wAnhlftC9gEDrRsWweiUbp4oVMgedVv8iLx1Ol6iS-gD4So1GoSDRuGRQEQWAB3LatUAAXlABiMwh53Q6RRsqn5FDwoCVOLxZEJnIZyg1-P5YNpY3uj1FEqlRnVZrNYIhdx2MNtkoV6kd-LsoBYRV4Jqd5quSOErvpv3k3Tt3t9oZdEUh1pRnvtPtsZocZvJ0l+tmWmNojFYbAYfA8kQYwmmeRCRWxIgADIyBsySDpNJ4xMJK9WGPXmnNvgOiDX2yDkmCu+oe+k++Oa5IxP5TWCvtFlwxV951Q4O6D+GluP2qxOh-sGwViufB1OSykrqkPGQzzvJG4-CG1Ii75+z58H4RZMtUeBGMKbCvkI96XsOsxbr4J5vh+F6To+Fy5FBMHvnBk7XiOEa4WhD6YcyUSRBwVAVuhtZiJIDAXIxdHrvyR7JAARoGNDAWw3F4FQmjIcBbFOvmlLUiJP4AD4yaAYigAAPEBaReFwwhId+8iJrmagcaWtRUnaYjQShsEMaATGrGJZqCqyIpSLKNTlpyiaaqyLDskSlgPIxFzuRoN4uewpm4SYZjSLppoGVZkRUWQNEkdJtmatqIlqX2Wn8H4igyvlCn7r+oZqBQnneZyuE+Vk2WibGVkBdmTr+oGwZ8iVApCiKmjCs5xE5YFTpajq3FFLxOICUJPg9WQOnFR1YaLne36SN6whluwYqSmF5kiJZ1kuLGpoLSdp0KctA06U1HUtUGLDzSdlHUWZ7hCGeM2DTmx1qHp5T8vZvXfs5yU7omw3CKN438SwgnCdpqWLS9p74bu31nfya0bcZ23eEjb4RX8B00PV8PXbdbVo3FCVJbtZ7aWT9i4ADIpkOEtGDs5WM7nWtjMyyABuXkvJskSBgw+LOQATLzXVWRObB8AwLxsKLRTi85KAyw5oBCQrSvsKr6tygArLYYHJAweDCyrYv4sIhv4v5NnzU9iXs5e9u26AADUoBzgu6k+Kz7Cg+IlOnUTRBh+jTrB+7k5FkAA","body":"function after_delay(delay, action) {\n    add_to_agenda(delay + current_time(the_agenda),\n                  action,\n                  the_agenda);\n} "}]},{"tag":"TEXT","id":"#p17","child":[{"body":"\n\tThe simulation is driven by the function\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"propagate"},{"body":", which executes each\n\tfunction on\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"the_agenda"},{"body":"\n\tin sequence.\n      \n    In general, as the simulation runs, new items\n    will be added to the agenda, and ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"propagate"},{"body":"\n    will continue the simulation as long as there are items on the agenda:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":17,"eval":true,"prependLength":76,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPYKGHZ4CQ0SwABzIEgEAEcCCxkV9XLRcj4kSiWCC+mDjFIGBI2LD4djUWImujUotEcjUT1QRVBpYIVDSXD6TiUhQyCw6I15pjucjefzBUz8SzVpYiSSyaKWOKBULIr9OhTlaA+aqpc8dso2ALYQBPNhapVoy5GogEeSddkWTnkhm4vEG4y8FjyaTsS1amazCh4UACI0msjmgNuoRB2azFgxKiunmgABE3t9-ItbpMDAdLF4oAA7nz3KAGLRI6bQFr01oMrMdKAfRExE2E1lIk6YVytUU6b2XVa4yUu7MLm4tePm6VmS9GKwrBQbEc1iMBPEUoGO5PvrRoe14du67HNtKXu8VzZ-ta3CKNkFLztr5bplSp606U+nttCQKVAAG7sHsByWMsbC6nQnx7pkJA0CodagAAvKs1QnLmOICGBbwbicnyNrMWZ+lhyKIkRmQhmGEZ0GaZG2AicZwV28wAvcKRSHhGF3GclG6K28jtqIeh-gStC0fRyywaInZfjqShsHaDr-PhvFAg8F4vsYw4xji8bUjaik1gxVqdhOmQAPytsmqZihmul5iQBa+sWZZkBWVatnRUZnjiDbmRZABcVx5MOiqBo2YkyrhEEaVBEoyeZ1HhsZPnmtJfEsV2SaQvC6bLAp3lmqAAC0pW7PshyQdBDazpkLZtiw2UJghRBIbF66cKhlXgV1m5nPVrGRNEsQ3gkGmTGpcSrrYnVVGOgX7jSjnYW+bo4VVlgLfxQS9G1SEeewhVoUux0acIJQHWQOpECBEj8iSWYMLWaEAExXYhN1VrwbCcAwObPa9qCfe1N0pn9APsEDPUAKwlNph6Qke-38sI2UpZJUYcBdR04wUzGyRZhluJmNAsOmQ2NUJzVExZ129Yc0E9Z1NWJXjg1LZknXQZdXNNHQwGgVt+P+AlApbp4ovdPz8nQsjXBQ3zCaiUAA","body":"function propagate() {\n    if (is_empty_agenda(the_agenda)) {\n        return \"done\";\n    } else {\n        const first_item = first_agenda_item(the_agenda);\n        first_item();\n        remove_first_agenda_item(the_agenda);\n        return propagate();\n    }\n} "}]},{"tag":"SUBHEADING","id":"#h4","child":[{"body":"A sample simulation","tag":"#text"}]},{"tag":"TEXT","id":"#p18","child":[{"body":"\n    The following\n    function,\n    which places a \"","tag":"#text"},{"body":"probe","tag":"#text"},{"body":"\" on a wire, shows the simulator in\n    action.  The probe tells the wire that, whenever its signal changes value,\n    it should print the new signal value, together with the current time and\n    a name that identifies the\n    \n\twire. \n      ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":18,"eval":true,"prependLength":32,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPXAkGgqVKeDhAhigAC89GY7GWwhKYKIEIoRAAbiwJGQ8WxeCx5AwAJ7w0AAJjR4LIoAYfDYnAYBKJJPJlJQtIx9KoEmZrPYxNJFIRAFYSn1DDtuJYlBROEQGJ0AO77FgzWYXNzqqQCABEcqOiuV8gNWlK0oqg3lppVAj1LBSRBYqrY2JVBE1Ygy2u+tCdhvmCqVKotAld7s98m9lq2MuM3l4HBtjo1KQYNrYzzCWsyOsDGsNydTAwjWYGOe2NHjwUTtAADhIqAAjWzKmwpJ35hm8FOVsLpqQpP2zccT0DCeEAPlAvGUjdFkYYNlAAGpQAatxux5P9weJyoJFjOBQ8GSBNFYlYKDYBGQoWcRJu94f35ODS63aAY97Kdur4fsBk7Hqe56XsaoZmsOmpCPBmxAA","body":"function probe(name, wire) {\n    add_action(wire, \n               () => display(name + \" \" +\n                             stringify(current_time(the_agenda)) + \n                             \", new value = \" + \n                             stringify(get_signal(wire))));\n} "}]},{"tag":"TEXT","id":"#p19","child":[{"body":"\n    We begin by initializing the agenda and specifying delays for the\n    primitive function boxes:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":19,"eval":true,"prependLength":17,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPXAkGgqVKeDhAhigAC89GY7GWwhKYKIEIoRAAbiwJGQ8WxeCx5AwAJ7w0AAJjR4LIoAYfDYnAYBKJJPJlJQtIx9KoEmZrPYxNJFIRAFZNEA","body":"const the_agenda = make_agenda();\nconst inverter_delay = 2;\nconst and_gate_delay = 3;\nconst or_gate_delay = 5; "},{"body":"\n    Now we define four wires, placing probes on two of them:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":20,"eval":true,"prependLength":76,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoak1VGr0K1Eaz0JriYnGxhKMg8MYRfK4SckcwmIhsyhlNg8Wdsef0PQruIBRPnucL7cT-O0cP70uX48UU+Py8LjKJ4Avo0jhveQQXleQG-jc47FNy75sJ0p5HkI-5Xjeg60Kk6QYc+Dg7ghSw7IGyGoWQ6FQYBOydKIhLhrhGTUfQMpeHRuQFJOeANEIZEod++HXhIt60BBPDsRRVFPteL67m+cJ8Uc5HftJAHCcu2GgExEkqWhQk5IRRQkMIMxkAE7IyaKFTVJZ6kqtgJk6DMFBEH0JZkCWLDWB49D7KKABMThOXxszziwnStjUPmMH5oooMFpmgOWEVRd5vn+aMACsTjEdsVqBi6pzdiBeRaSVPCWtaRW2pxeX0uGNo8CVMrnJC1wGtE8JxBV-rVSctVnL8UJ1ZOibJgKzUNGwMoCkKpSdaJXbTZV425tovbnks83aHV9U0GKZYAEZnj0p4yiVi1rZNLWgIWhhNMMAB8oDDsysX7Gc9CnqAADUFoA7993pn4fFGK5nRyJ9n6Hj+f7mTOMk5H9d0g2j0iWK1FygFCoqWCjwPo2BZDg0QkN4J9BVHDVU0mDkhmFLgIUuUQzIEGyACM1nTnUK25Mzsis+zLABdztkVfzSVCAQcZTuLfOJc58Slplcs1BLuXMsdZ7+jLmPtDLERAA","body":"const input_1 = make_wire();\nconst input_2 = make_wire();\nconst sum = make_wire();\nconst carry = make_wire();\n\nprobe(\"sum\", sum); ","output":"\"sum 0, new value = 0\""},{"tag":"SNIPPET","latex":false,"id":21,"eval":true,"prependLength":83,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoak1VGr0K1Eaz0JriYnGxhKMg8MYRfK4SckcwmIhsyhlNg8Wdsef0PQruIBRPnucL7cT-O0cP70uX48UU+Py8LjKJ4Avo0jhveQQXleQG-jc47FNy75sJ0p5HkI-5Xjeg60Kk6QYc+Dg7ghSw7IGyGoWQ6FQYBOydKIhLhrhGTUfQMpeHRuQFJOeANEIZEod++HXhIt60BBPDsRRVFPteL67m+cJ8Uc5HftJAHCcu2GgExEkqWhQk5IRRQkMIMxkAE7IyaKFTVJZ6kqtgJk6DMFBEH0JZkCWLDWB49D7KKABMThOXxszziwnStjUPmMH5oooMFpmgOWEVRd5vn+aMACsTjEdsVqBi6pzdiBeRaSVPCWtaRW2pxeX0uGNo8CVMrnJC1wGtE8JxBV-rVSctVnL8UJ1ZOibJgKzUNGwMoCkKpSdaJXbTZV425tovbnks83aHV9U0GKZYAEZnj0p4yiVi1rZNLWgIWhhNMMAB8oDDsysX7Gc9CnqAADUFoA7993pn4fFGK5nRyJ9n6Hj+f7mTOMk5H9d0g2j0iWK1FygFCoqWCjwPo2BZDg0QkN4J9BVHDVU0mDkhmFLgIUuUQzIEGyACM1nTnUK25Mzsis+zLABdztkVfzSVCAQcZTuLfOJc58Slplcs1BLuXMsdZ7+jLmPtDLuTYFrVAnZVDAq-rFtGPsERAA","body":"probe(\"carry\", carry); ","output":"\"carry 0, new value = 0\""},{"body":"\n    Next we connect the wires in a half-adder circuit (as in\n    figure ","tag":"#text"},{"tag":"REF","body":"3.25","href":"/sicpjs/3.3.4#fig-3.25"},{"body":"), set the signal on\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"input_1"},{"body":"\n    to 1, and run the simulation:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":22,"eval":true,"prependLength":228,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaTmZGWXOZx6BkXnK0nDunDwKcmcpvL2pnVdaQl0i003OmKcmTbIwA17l4BdWzUmT9BkzM9mIbpc2DGWChqAXVfopt7ZYQtpbcgXVCbnF+Dh0FElGbZAitLNQMuBNgU9lgmLXt1C-AExJQgCBxl++9xJDBSwlNB-93I2B2tUE6-6YHB32jA9h-DxHEOjD7BR1j-YsPAuMGC2+MLX2ZVffTUD5aeOIhAA","body":"half_adder(input_1, input_2, sum, carry); ","output":"\"ok\""},{"tag":"SNIPPET","latex":false,"id":23,"eval":true,"prependLength":230,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaTmZGWXOZx6BkXnK0nDunDwKcmcpvL2pnVdaQl0i003OmKcmTbIwA17l4BdWzUmT9BkzM9mIbpc2DGWChqAXVfopt7ZYQtpbcgXVCbnF+Dh0FElGbZAitLNQMuBNgU9lgmLXt1C-AExJQgCBxl++9xJDBSwlNB-93I2B2tUE6-6YHB32jA9h-DxHEOjD7BR1j-YsPAuMGC2+MLX2ZVffTUD5aePYeqd-WTmULyIhAA","body":"set_signal(input_1, 1); ","output":"\"done\""},{"tag":"SNIPPET","latex":false,"id":24,"eval":true,"prependLength":280,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaTmZGWXOZx6BkXnK0nDunDwKcmcpvL2pnVdaQl0i003OmKcmTbIwA17l4BdWzUmT9BkzM9mIbpc2DGWChqAXVfopt7ZYQtpbcgXVCbnF+Dh0FElGbZAitLNQMuBNgU9lgmLXt1C-AExJQgCBxl++9xJDBSwlNB-93I2B2tUE6-6YHB32jA9h-DxHEOjD7BR1j-YsPAuMGC2+MLX2ZVffTUD5aePYeqd-WTmULzYeTgyaYGoI0PITU2q1WqZB6qbzsl-Glq7Eo2A8GzgB8RmBsDWfUTxST3A7T5+RZSfmuEQJ4R6cMp0uq5UhsrKSOvsp696iI+GylI1Fu2CYMoVBQkLGtmyU2rHkryMJIk+esiI4AL4I7xxGFhnrVZ1FH3OEFGoJ50r-n+0w9fz3BHXRes4G2x0fIvuGv3oFCt-SSPu1-HDMJC1ZQ1c5GB9a45I3HOmrVsrttXaVeCIopXc80XlflJS9aLLyKXAFe85iRZJd7mXZBCNxDXq5eApWyMH7Z3S03e8O53Xvn3iMZp8IcL55lhTbVUV3VUAHYB5+9n8lNXrgM-r8SVPv2KFRRX5T-ReRyCWZrb6eTU2+tvfkzv2Pf9hpnZt7-m9wam-xQl-2kCz3I3pHh3FD3Q4w2gjyX0OH8WmRXwViF1zTJHsFVHP00RkEvz9yWlvyP15hd2ik21QJEW-znzN2ijtxqG-2PzIJQNmQ9CImgJ5jSQCS4X83YNgIiCAA","body":"propagate(); ","output":"\"sum 8, new value = 1\"\n\"done\""},{"body":"\n    The ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"sum"},{"body":" signal changes to 1 at time 8.\n    We are now eight time units from the beginning of the simulation.\n    At this point, we can set the signal on\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"input_2"},{"body":"\n    to 1 and allow the values to propagate:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":25,"eval":true,"prependLength":282,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaTmZGWXOZx6BkXnK0nDunDwKcmcpvL2pnVdaQl0i003OmKcmTbIwA17l4BdWzUmT9BkzM9mIbpc2DGWChqAXVfopt7ZYQtpbcgXVCbnF+Dh0FElGbZAitLNQMuBNgU9lgmLXt1C-AExJQgCBxl++9xJDBSwlNB-93I2B2tUE6-6YHB32jA9h-DxHEOjD7BR1j-YsPAuMGC2+MLX2ZVffTUD5aePYeqd-WTmULzYeTgyaYGoI0PITU2q1WqZB6qbzsl-Glq7Eo2A8GzgB8RmBsDWfUTxST3A7T5+RZSfmuEQJ4R6cMp0uq5UhsrKSOvsp696iI+GylI1Fu2CYMoVBQkLGtmyU2rHkryMJIk+esiI4AL4I7xxGFhnrVZ1FH3OEFGoJ50r-n+0w9fz3BHXRes4G2x0fIvuGv3oFCt-SSPu1-HDMJC1ZQ1c5GB9a45I3HOmrVsrttXaVeCIopXc80XlflJS9aLLyKXAFe85iRZJd7mXZBCNxDXq5eApWyMH7Z3S03e8O53Xvn3iMZp8IcL55lhTbVUV3VUAHYB5+9n8lNXrgM-r8SVPv2KFRRX5T-ReRyCWZrb6eTU2+tvfkzv2Pf9hpnZt7-m9wam-xQl-2kCz3I3pHh3FD3Q4w2gjyX0OH8WmRXwViF1zTJHsFVHP00RkEvz9yWlvyP15hd2ik21QJEW-znzN2ijtxqG-2PzIJQNmQ9CImgJ5jSQCS4X83YNgNpxvGEwp0ZwiCAA","body":"set_signal(input_2, 1); ","output":"\"done\""},{"tag":"SNIPPET","latex":false,"id":26,"eval":true,"prependLength":284,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQSBDAG0YH0BTekgCwApDTKNAM4BKUAG9soaaAp5QPCkJZECzPsXLUiosZJkHQAJzZkCR2gCIAJjTaWA3FJkBfUG0ZC2E54dBcOaw0BbVEeESc-aRMzCzomVg5uHjJ6CkZgrWERCN9QF2wC-E1BWgBbegBrNhYAdwoTcJ8DRlNQIQoAcyImFgA3JgJvAF5QAAZImVayUE5Sln4snVBR1WZJ6UXS9tMWMoBPFg7uph4iNlr+wbY9PIM5BWOe1gHGIdAAQmHVi6u3m+aUQMT16r3eP0uYLYGyBxlM5loDGY7E4vDm2gWJVCuSBbg8XkBsLhsSstnOjjurjyBQMW20sxIJDYAAcyCx0TRMSEaMFbkCOUQuUshCtQMy0kZggAaBnzOnZGG04jhGE0mTy2jWJTisjJMp8qIxBGgMorb6gSydXYgxiWSmwgD87S6zz+Q3tQIAXCazaNLF42Ta7UTDE6A3tDjaPVFvabvn76NZrOylsGQzInZwmayU3KsTRo35vWwjEYqJKyjLLMRKkQqLVaFRmSX6NsALRt0D1EyWHFUgxGuJaoQ67hOIoa0BWwMu07dgH6GSD2jzniW62z225AqT8M2njzmXnSHXA3ReFxVf+jcnLdnX5Q7fFbm0RPJgUHhpsGUCoWlM-EsaV5vrm2i9jwv4ak+z5LCaVQ1JQZQ1F4nRIUQZApBQSEygAjkMQxnsuYoSph2GgHhbAEeOMHbChaFsohbA8KIEiAXEASJsxET5Lgu5sKhbDoSwFFDFxrFEak6RcQ4PE0fSFTVMJ+FMXobG0OKDRnGojBHtp3ETvmtB4GWQmspKIkLmp-iBDwFn6bxhlwvQRgsGZtnKapElpBkdkyQZL47Gyxk0GybkWTKFBkGw+qseGHFBOFshRfqfkOQF4YmM5rlkOZykRclqnhpJPl5Ul0X2XJNCyMo0WsocFnuZRllEUoKjaXwJmhTljUERVk4UDoJZsg1iWReVhJ0MIMzHq5EqihpkpjZWoBrIwfbSA8ig1WUdVKU1PU3ABwK7MFpndYlM0LethgZRwLlhaVl0StdeKeN4i5+EV3k8Jl93nR5R6-FdioyLdWUPU1gOXMD1J5ERFnUZV5TweyVpENY9BNOIVmMEoGFjH1jkkOYJhCYxEFoxjnkXrQ8UU4JVOpUjgUsMTpaCQxWFMfQlP0DKjFnnFNk8wzfOgAL1F8QJ6FCPT6P0NTJLi99Ivy4T6XWvx9Gy6rGMyihLEfV9Um62LBtPpOeANEIgZaxzctU+JNPWZxdEczrvM5Ezk4mDbRx2zLDsK07SvFcxAdkB7ote7Jk4gWQVCo6LpHfrK2g-p7hKTgARh4NCdMoud4OWTHmxN55K61q3hwXYgAD51+LXOgAAPDs0uc0hPB0+b61qqAk4KTUM2Mf7Hcpz+SxHZNOgzDhopD3tonXRtg1GMNym2ZP-4g0Ri+j276ET+Rfe+HHSYsAnY-azXhuUpth+d0xPf8bovpN0h0-3GvG-7Y-S-Pxsr3be2gV75HcG9cuhgSBTThDbUUYdzYg3uPIHgudGD50LmwYujRfZkByFAoExsMgGxlAtHgi8R5c2vvbRiICaAiClIWdM6ZEGvxyGAgwr0CQfRDPHROj9ZZ4M4f2Qw-d+4wNnu3EUoxBFB3WptdBmCWBFxLrfAhvDQaaw7lHeWTCWFRHIZQ34B8I7HwFIw6RXtfDcPevafhNDA5IJsYUXAkj4FkACEneWC8UamxVNgdxMwBp9CGiWFg1gPD0H2KKAATE4IJsx0YsE6K2GokTGDRNFCgBJsDywpLSREqJMTRgAFYnDM3oHgKKLkMnRJ4HU-Y9CiAAQcf4xpoAADUdASYc0vlzFIXjTaMOYVEAU+iDEyE8TUYZiMQAzxyhQbOBAorWFANnGJABxSKAAJAg2dQAEC8EYOgrR6BEAAJwXLSrBDBnQKBIhYOWZiABGfWsSAJESEC89+YxQAADJ-ntFib85hToxjMO9N835oAG7tB+fGUALywXAphXCoQILEXIpYU6bF6ZiylmeRiqsISmAUDWUGEQkL3CEslN8klRBXjkudLeXscywCSMWcs1Z6ytm7P2Yc45pyOCXOuczfJqSooQTebMWJMoqArOZCsgCk58mQUMljD0iSZpQlFHch5vRnnTiOJuaVIzJkWr8Ma-c9APkiKqTUopmT9g8AlYUxpMpRlAiaMMAAfCzfcCqyBKrIFDN0h1VR5BAh+egMq1VLD-KAmE0algQTlaAeNeYXzXSIpYKglQKT+VuVQe5jzzlBHpcCz5ztoVYoBUCjF788WOiRdS2t5o-nooReaZtQIwyYo7bCxujasVevBV6glZY6XpssKS3GFLNy9mpSWKdryGVMoXay6CcdkmSu5jK218rFXKomju98CaNSaqBNqh81w9UloNawctPBrWmtjeay1n7pCvtvGm6x-JqnhMaRBXd7rimeq-QoMQfqA2mqDSGsNj4XpRovjGg9yT1XZuTah1Nh6knnqzVPGEub82FpudsEJYTFpEAQxm49+DT2OUo+vFgA0Q1XqiDek8-x72lt6HWDCP7niKBo8q+1gHanFJE6E9eQHwOgC9VEH1-q9xwfo4h08yGDAptKCJ2jzG2RseVcR52eaC2S0cvqx5AmxK8K+aCkMuK21NpRRCkMk6iXrrJZu54bLXHMy4EwPA7IkwlggjKbO+sZQkAAoktZoxF6rmuokkYcFFJJZhG6qVYtIugGsNdctBTssRei9dAzYWSAyhuMm0DUrrBVf1jm0zpHEaTmZGWXOZx6BkXnK0nDunDwKcmcpvL2pnVdaQl0i003OmKcmTbIwA17l4BdWzUmT9BkzM9mIbpc2DGWChqAXVfopt7ZYQtpbcgXVCbnF+Dh0FElGbZAitLNQMuBNgU9lgmLXt1C-AExJQgCBxl++9xJDBSwlNB-93I2B2tUE6-6YHB32jA9h-DxHEOjD7BR1j-YsPAuMGC2+MLX2ZVffTUD5aePYeqd-WTmULzYeTgyaYGoI0PITU2q1WqZB6qbzsl-Glq7Eo2A8GzgB8RmBsDWfUTxST3A7T5+RZSfmuEQJ4R6cMp0uq5UhsrKSOvsp696iI+GylI1Fu2CYMoVBQkLGtmyU2rHkryMJIk+esiI4AL4I7xxGFhnrVZ1FH3OEFGoJ50r-n+0w9fz3BHXRes4G2x0fIvuGv3oFCt-SSPu1-HDMJC1ZQ1c5GB9a45I3HOmrVsrttXaVeCIopXc80XlflJS9aLLyKXAFe85iRZJd7mXZBCNxDXq5eApWyMH7Z3S03e8O53Xvn3iMZp8IcL55lhTbVUV3VUAHYB5+9n8lNXrgM-r8SVPv2KFRRX5T-ReRyCWZrb6eTU2+tvfkzv2Pf9hpnZt7-m9wam-xQl-2kCz3I3pHh3FD3Q4w2gjyX0OH8WmRXwViF1zTJHsFVHP00RkEvz9yWlvyP15hd2ik21QJEW-znzN2ijtxqG-2PzIJQNmQ9CImgJ5jSQCS4X83YNgNpxvGEwp0Z3RzLBgM4IiCAA","body":"propagate(); ","output":"\"carry 11, new value = 1\"\n\"sum 16, new value = 0\"\n\"done\""},{"body":"The ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"carry"},{"body":" changes to 1 at time 11 and the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"sum"},{"body":" changes to 0 at time 16.\n  ","tag":"#text"}]},{"tag":"EXERCISE","title":"Exercise 3.31","id":"#ex-3.31","child":[{"body":"\n    The internal\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"accept_action_function"},{"body":"\n    defined in\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_wire"},{"body":"\n    specifies that when a new action\n    function\n    is added to\n    a wire, the\n    function\n    is immediately run.  Explain why this initialization\n    is necessary.  In particular, trace through the half-adder example in\n    the paragraphs above and say how the system's response would differ\n    if we had defined\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"accept_action_function"},{"body":"\n    as\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":27,"eval":false,"body":"function accept_action_function(fun) {\n   action_functions = pair(fun, action_functions);\n}"}]},{"tag":"SUBHEADING","id":"#h5","child":[{"body":"Implementing the agenda","tag":"#text"}]},{"tag":"TEXT","id":"#p20","child":[{"body":"\n    Finally, we give details of the agenda data structure, which holds the\n    functions\n    that are scheduled for future execution.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p21","child":[{"body":"\n    The agenda is made up of \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"time segments","tag":"#text"}]},{"body":".  Each time segment is a\n    pair consisting of a number (the time) and a \n    \n    queue (see\n    exercise ","tag":"#text"},{"tag":"REF","body":"3.32","href":"/sicpjs/3.3.4#ex-3.32"},{"body":") that holds the\n    functions\n    that are scheduled to be run during that time segment.\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":28,"eval":true,"prependLength":0,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfUrvYGcWBzLkTIAKTiwA0oAI4EWsgJSgA3tlBqATizIF1tAA4MK60RS6SZclvIDc2AL75i5arV4CWQjqZbDuipaCa2rqgABYsDAAmvjagDo6klDSgboJkbBayMcqBWjq0ZIYANjHWcUA","body":"function make_time_segment(time, queue) {\n   return pair(time, queue);\n}\nfunction segment_time(s) { return head(s); }\n\nfunction segment_queue(s) { return tail(s); } "},{"body":"\n    We will operate on the time-segment queues using the queue operations\n    described in section ","tag":"#text"},{"tag":"REF","body":"3.3.2","href":"/sicpjs/3.3.2"},{"body":".\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p22","child":[{"body":"\n    The agenda itself is a one-dimensional\n    \n    table of time segments.  It\n    differs from the tables described in section ","tag":"#text"},{"tag":"REF","body":"3.3.3","href":"/sicpjs/3.3.3"},{"body":"\n    in that the segments will be sorted in order of increasing time.  In\n    addition, we store the \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"current time","tag":"#text"}]},{"body":" (i.e., the time of the last action\n    that was processed) at the head of the agenda.  A newly constructed\n    agenda has no time segments and has a current time of 0:","tag":"#text"},{"tag":"FOOTNOTE_REF","id":"#footnote-link-3","body":"3","href":"/sicpjs/3.3.4#footnote-3"},{"tag":"SNIPPET","latex":false,"id":29,"eval":true,"prependLength":0,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPIA","body":"function make_agenda() { return list(0); }\n\nfunction current_time(agenda) { return head(agenda); }\n\nfunction set_current_time(agenda, time) {\n   set_head(agenda, time);\n}\nfunction segments(agenda) { return tail(agenda); }\n\nfunction set_segments(agenda, segs) {\n   set_tail(agenda, segs);\n}\nfunction first_segment(agenda) { return head(segments(agenda)); }\n\nfunction rest_segments(agenda) { return tail(segments(agenda)); } "}]},{"tag":"TEXT","id":"#p23","child":[{"body":"\n    An agenda is empty if it has no time segments:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":30,"eval":true,"prependLength":17,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPYKGHbKNgsOgABzIAE8OEDBGcxBlMhc3BCiAR5J0AZ8tKUgA","body":"function is_empty_agenda(agenda) {\n   return is_null(segments(agenda));\n} "}]},{"tag":"TEXT","id":"#p24","child":[{"body":"\n    To add an action to an agenda, we first check if the agenda is empty.\n    If so, we create a time segment for the action and install this in\n    the agenda.  Otherwise, we scan the agenda, examining the time of each\n    segment.  If we find a segment for our appointed time, we add the\n    action to the associated queue.  If we reach a time later than the one\n    to which we are appointed, we insert a new time segment into the\n    agenda just before it.  If we reach the end of the agenda, we must\n    create a new time segment at the end.\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":31,"eval":true,"prependLength":48,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfUrvYGcWBzLkTIAKTiwA0oAI4EWsgJSgA3tlBqATizIF1tAA4MK60RS6SZclvIDc2AL75i5arV4CWQjqZbDuipaCa2rqgABYsDAAmvjagDo6klDSgboJkbBayMcqBWjq0ZIYANjHWcbiEiS70zOyZPv65wfqGxkQERUWS7Z2x8ZXOyXjqNOl6ZMb1jUH5YRHRU2X9Tkm0mgzqbOOTsgo5MyGFFCWL5QmDrlpsw6NbE8L1khRkLHSNvOnhUQ+7EqDPrz6FRW1Q+bHWm22P0sTxebxyYKOJ1+sMBS2BVWSFG4bFe4wAnhlftC9gEDrRsWweiUbp4oVMgedVv8iLx1Ol6iS-gD4So1GoSDRuGRQEQWAB3LatUAAXlABiMwh53Q6RRsqn5FDwoCVOLxZEJnIZyg1-P5YNpY3uj1FEqlRnVZrNYIhdx2MNtkoV6kd-LsoBYRV4Jqd5quSOErvpv3k3Tt3t9oZdEUh1pRnvtPtsZocZvJ0l+tmWmNojFYbAYfA8kQYwmmeRCRWxIgADIyBsySDpNJ4xMJK9WGPXmnNvgOiDX2yDkmCu+oe+k++Oa5IxP5TWCvtFlwxV951Q4O6D+GluP2qxOh-sGwViufB1OSykrqkPGQzzvJG4-CG1Ii75+z58H4RZMtUeBGMKbCvkI96XsOsxbr4J5vh+F6To+Fy5FBMHvnBk7XiOEa4WhD6YcyUSRBwVAVuhtZiJIDAXIxdHrvyR7JAARoGNDAWw3F4FQmjIcBbFOvmlLUiJP4AD4yaAYigAAPEBaReFwwhId+8iJrmagcaWtRUnaYjQShsEMaATGrGJZqCqyIpSLKNTlpyiaaqyLDskSlgPIxFzuRoN4uewpm4SYZjSLppoGVZkRUWQNEkdJtmatqIlqX2Wn8H4igyvlCn7r+oZqBQnneZyuE+Vk2WibGVkBdmTr+oGwZ8iVApCiKmjCs5xE5YFTpajq3FFLxOICUJPg9WQOnFR1YaLne36SN6whluwYqSmF5kiJZ1kuLGpoLSdp0KctA06U1HUtUGLDzSdlHUWZ7hCGeM2DTmx1qHp5T8vZvXfs5yU7omw3CKN438SwgnCdpqWLS9p74bu31nfya0bcZ23eEjb4RX8B00PV8PXbdbVo3FCVJbtZ7aWT9hAA","body":"function add_to_agenda(time, action, agenda) {\n   function belongs_before(segs) {\n      return is_null(segs) || time < segment_time(head(segs));\n   }\n   function make_new_time_segment(time, action) {\n      const q = make_queue();\n      insert_queue(q, action);\n      return make_time_segment(time, q);\n   }\n   function add_to_segments(segs) {\n      if (segment_time(head(segs)) === time) {\n          insert_queue(segment_queue(head(segs)), action);\n      } else {\n          const rest = tail(segs);\n          if (belongs_before(rest)) {\n              set_tail(segs, pair(make_new_time_segment(time, action),\n                                  tail(segs)));\n          } else {\n              add_to_segments(rest);\n          }\n      }\n   }\n   const segs = segments(agenda);\n   if (belongs_before(segs)) {\n       set_segments(agenda,\n                    pair(make_new_time_segment(time, action), segs));\n   } else {\n       add_to_segments(segs);\n   }\n} "}]},{"tag":"TEXT","id":"#p25","child":[{"body":"\n    The\n    function\n    that removes the first item from the agenda deletes the\n    item at the front of the queue in the first time segment.  If this\n    deletion makes the time segment empty, we remove it from the list of\n    segments:","tag":"#text"},{"tag":"FOOTNOTE_REF","id":"#footnote-link-4","body":"4","href":"/sicpjs/3.3.4#footnote-4"},{"tag":"SNIPPET","latex":false,"id":32,"eval":true,"prependLength":43,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPYKGHZ4CQ0SwABzIEgEAEcCCxkV9XLRcj4kSiWCC+mDjFIGBI2LD4djUWImujUotEcjUT1QRVBpYIVDSXD6TiUhQyCw6I15pjucjefzBUz8SzVpYiSSyaKWOKBULIr9OhTlaA+aqpc8dso2ALYQBPNhapVoy5GogEeSddkWTnkhm4vEG4y8FjyaTsS1amazCh4UACI0msjmgNuoRB2azFgxKiunmgABE3t9-ItbpMDAdLF4oAA7nz3KAGLRI6bQFr01oMrMdKAfRExE2E1lIk6YVytUU6b2XVa4yUu7MLm4tePm6VmS9GKwrBQbEc1iMBPEUoGO5PvrRoe14du67HNtKXu8VzZ-ta3CKNkFLztr5bplSp606U+nttCQKVAAG7sHsByWMsbC6nQnx7pkJA0CodagAAvKs1QnLmOICGBbwbicnyNrMWZ+lhyKIkRmQhmGEZ0GaZG2AicZwV28wAvcKRSHhGF3GclG6K28jtqIeg6EAA","body":"function remove_first_agenda_item(agenda) {\n   const q = segment_queue(first_segment(agenda));\n   delete_queue(q);\n   if (is_empty_queue(q)) {\n       set_segments(agenda, rest_segments(agenda));\n   } else {}\n} "}]},{"tag":"TEXT","id":"#p26","child":[{"body":"\n    The first agenda item is found at the head of the queue in the first\n    time segment.  Whenever we extract an item, we also update the current\n    time:","tag":"#text"},{"tag":"FOOTNOTE_REF","id":"#footnote-link-5","body":"5","href":"/sicpjs/3.3.4#footnote-5"},{"tag":"SNIPPET","latex":false,"id":33,"eval":true,"prependLength":44,"program":"chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQYHMWiATBgBQBKUAG9QAJxZkCE2gBsKAZzICADEIDcoAL65CpSjVAlZUomTaU6LAVx78R4qTLmgAFiwa873Pgy1dfWJyalolaTZTCXNLa1t7fwAaUHinbFBMiMtPb18HBhS0zWw9A1DjCM4bCyV8-ydJaVlaMgYKeXrHbT18EKNwyKqasjrE-hSqpXTM0Gyrds7xwrmWTmmSsv6w0DwKCRU2YZ5VZcaXFo8vH2ParoDA3vKBpsPb0fvz5rc2joF3sZ+RyPYKGHbKNgsOgABzIAE8OEDBGcxBlMhc3BCiAR5J0AZ8tKVQRVaIxWFYKDYjmsRgJ4ikAI4EFjMmbo760aHtCR0yksRnM1mbPpgyo0k4Umz-L6uWi5G4gkUk1bVCVMlm2aZiJqy1KLaU9YkvPASGiWWE89Ws7UYuXXARWliK547KQMCRsC0OwVOm0cvV-R3O7Ziywms2esiWn0pChkKGNeby70a2PxujB0WDSxuj1ex1phPa+a-ToF0BxhOGpUvCFQ2EIx0p63Of1YnGdcMWSPRjVCTPKruWJtB1GzHWXOsw+FsEc+oRo8dLgD8oBYMSoveZKQAREPZz6TAxcSxeKAAO5x9ygBi0evw0COncLpevgBcVzy+-z88JTxDtB7AcljLGwlZ0J8Y6zBQeCgAIU4NoiBQElBr7rqaPI7ssFZKGu05wqAAC0hG7PshygeBz4lOOOhrvIESoUuJA0CopHAdSnCgAAvGxbzihYnzUa+qyWNEsSSgkSKTPxcR8gIQF8Zw-ZCa+tq7Ka3ZNu8B4avJZGWFUymLkEOhAA","body":"function first_agenda_item(agenda) {\n    if (is_empty_agenda(agenda)) {\n        error(\"agenda is empty -- first_agenda_item\");\n    } else {\n        const first_seg = first_segment(agenda);\n        set_current_time(agenda, segment_time(first_seg));\n        return front_queue(segment_queue(first_seg));\n    }\n} "}]},{"tag":"EXERCISE","title":"Exercise 3.32","id":"#ex-3.32","child":[{"body":"\n    The\n    functions\n    to be run during each time segment of the agenda are kept in a queue.\n    Thus, the\n    functions\n    for each segment are called in the order in which they were added to the\n    agenda (first in, first out).  Explain why this order must be used.  In\n    particular, trace the behavior of an and-gate whose inputs change from\n    0,1 to 1,0 in the same segment and say how the behavior would differ if\n    we stored a segment's\n    functions\n    in an ordinary list, adding and removing\n    functions\n    only at the front (last in, first out).\n    ","tag":"#text"}]},{"tag":"DISPLAYFOOTNOTE","id":"#footnote-1","count":1,"href":"/sicpjs/3.3.4#footnote-link-1","child":[{"body":"A\n      full-adder is a basic circuit element used in adding two binary\n      numbers.  Here ","tag":"#text"},{"body":"$A$","tag":"LATEX"},{"body":" and ","tag":"#text"},{"body":"$B$","tag":"LATEX"},{"body":"\n      are the bits at corresponding positions in the\n      two numbers to be added, and ","tag":"#text"},{"body":"$C_{\\mathit{in}}$","tag":"LATEX"},{"body":" is the\n      carry bit from the addition one place to the right.  The circuit generates\n      ","tag":"#text"},{"body":"$\\mathit{SUM}$","tag":"LATEX"},{"body":", which is the sum bit in the corresponding position, and\n      ","tag":"#text"},{"body":"$C_{\\mathit{out}}$","tag":"LATEX"},{"body":", which is the\n      carry bit to be propagated to the left.","tag":"#text"}]},{"tag":"DISPLAYFOOTNOTE","id":"#footnote-2","count":2,"href":"/sicpjs/3.3.4#footnote-link-2","child":[{"body":"These\n    functions\n    are simply syntactic sugar that allow\n    \n    us to use ordinary \n    \n        functional\n      \n    syntax to access the local\n    functions\n    of objects.  It is striking that we can interchange the role of\n    \"","tag":"#text"},{"body":"functions","tag":"#text"},{"body":"\"\n    and\n    \"","tag":"#text"},{"body":"data","tag":"#text"},{"body":"\" in such a simple way.  For example, if we write\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"wire(\"get_signal\")"},{"body":"\n    we think of ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"wire"},{"body":" as a\n    function\n    that is called with the message\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"\"get_signal\""},{"body":"\n    as input. Alternatively, writing\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"get_signal(wire)"},{"body":"\n    encourages us to think of ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"wire"},{"body":" as a data\n    object that is the input to a\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"get_signal"},{"body":".\n      \n    The truth of the matter is that, in a language in which we can deal with\n    functions\n    as objects, there is no fundamental difference between\n    \"","tag":"#text"},{"body":"functions","tag":"#text"},{"body":"\"\n    and \"","tag":"#text"},{"body":"data,","tag":"#text"},{"body":"\" and we can choose our syntactic sugar to allow us\n    to program in whatever style we choose.\n    ","tag":"#text"}]},{"tag":"DISPLAYFOOTNOTE","id":"#footnote-3","count":3,"href":"/sicpjs/3.3.4#footnote-link-3","child":[{"body":"The\n    agenda is a \n    \n    headed list, like the tables in section ","tag":"#text"},{"tag":"REF","body":"3.3.3","href":"/sicpjs/3.3.3"},{"body":",\n    but since the list is headed by the time, we do not need an additional\n    dummy header (such as the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"\"*table*\""},{"body":" string\n      \n    used\n    with tables).","tag":"#text"}]},{"tag":"DISPLAYFOOTNOTE","id":"#footnote-4","count":4,"href":"/sicpjs/3.3.4#footnote-link-4","child":[{"body":"Observe that the\n    \n\tconditional statement in this\n\tfunction has an\n\t\n\tempty block as its alternative statement.\n      \n    Such a\n    \"","tag":"#text"},{"body":"one-armed conditional statement","tag":"#text"},{"body":"\"\n    is used to decide whether to do something, rather than to select between two\n    statements.","tag":"#text"}]},{"tag":"DISPLAYFOOTNOTE","id":"#footnote-5","count":5,"href":"/sicpjs/3.3.4#footnote-link-5","child":[{"body":"In this way, the current time will always be the time\n    of the action most recently processed.  Storing this time at the head\n    of the agenda ensures that it will still be available even if the\n    associated time segment has been deleted.","tag":"#text"}]}]