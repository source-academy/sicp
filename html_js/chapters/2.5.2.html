<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="2.5.2&nbsp;&nbsp;
    Combining Data of Different Types
  " />
    <title>
      2.5.2&nbsp;&nbsp;
    Combining Data of Different Types
  
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

     
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html"> 
        Foreword
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./foreword.html"> Foreword to SICP, 1984</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./prefaces03.html"> 
    Preface
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-4">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                <a href="./prefaces84.html"> 
    Preface to the First Edition of SICP, 1984
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-5">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="false" aria-controls="sidebar-collapse-5">
                <a href="./prefaces96.html"> 
    Preface to the Second Edition of SICP, 1996
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./acknowledgements.html"> 
Acknowledgments
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./see.html"> </a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-8">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1 
    Building Abstractions with 
    
      
      Functions
    
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-8" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-9">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="true" aria-controls="sidebar-collapse-9">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="true" aria-controls="sidebar-collapse-9">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1 The Elements of Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-9" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.1.html"> 1.1.1 Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.2.html"> 1.1.2 Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.3.html"> 1.1.3 
    Evaluating
    
      
      Operator Combinations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.4.html"> 1.1.4 
    Compound 
    Functions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-14">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                <a href="./1.1.5.html"> 1.1.5 
    The Substitution Model for 
    
      
      
        Function
      
    
    Application
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.1.6.html"> 1.1.6 
    Conditional Expressions and Predicates
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.1.7.html"> 1.1.7 Example: Square Roots by Newton's Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.1.8.html"> 1.1.8 
    
      
      
        Functions
      
    
    as Black-Box Abstractions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-18">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2 
    
      
      Functions
    
    and the Processes They Generate
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-18" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.1.html"> 1.2.1 Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.2.html"> 1.2.2 Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-21">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                <a href="./1.2.3.html"> 1.2.3 Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.2.4.html"> 1.2.4 Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.2.5.html"> 1.2.5 Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.2.6.html"> 1.2.6 Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-25">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="true" aria-controls="sidebar-collapse-25">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="true" aria-controls="sidebar-collapse-25">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3 
        Formulating Abstractions with Higher-Order 
        
	  
	  Functions
	
      </a>
                </h5>
              </div>

              <div id="sidebar-collapse-25" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-26">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                <a href="./1.3.1.html"> 1.3.1 
    
      
      Functions
    
    as Arguments
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-27">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="false" aria-controls="sidebar-collapse-27">
                <a href="./1.3.2.html"> 1.3.2 
    
      
      Constructing Functions using Lambda Expressions
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./1.3.3.html"> 1.3.3 
    
      
    Functions
    as General Methods
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./1.3.4.html"> 1.3.4 
    
      
      Functions
    
    as Returned Values
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-30">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2 Building Abstractions with Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-30" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-31">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="true" aria-controls="sidebar-collapse-31">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="true" aria-controls="sidebar-collapse-31">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1 Introduction to Data Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-31" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-32">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                <a href="./2.1.1.html"> 2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.1.2.html"> 2.1.2 
    Abstraction Barriers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.1.3.html"> 2.1.3 
    What Is Meant by Data?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.1.4.html"> 2.1.4 
    Extended Exercise: Interval Arithmetic
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-36">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="true" aria-controls="sidebar-collapse-36">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="true" aria-controls="sidebar-collapse-36">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2 Hierarchical Data and the Closure Property</a>
                </h5>
              </div>

              <div id="sidebar-collapse-36" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-37">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                <a href="./2.2.1.html"> 2.2.1 
    Representing Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.2.2.html"> 2.2.2 
    Hierarchical Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.2.3.html"> 2.2.3 
    Sequences as Conventional Interfaces
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.2.4.html"> 2.2.4 
    Example: A Picture Language
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-41">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="true" aria-controls="sidebar-collapse-41">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="true" aria-controls="sidebar-collapse-41">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3 Symbolic Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-41" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-42">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                <a href="./2.3.1.html"> 2.3.1 
    
      
      Strings
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.3.2.html"> 2.3.2 
    Example: Symbolic Differentiation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.3.3.html"> 2.3.3 
    Example: Representing Sets
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.3.4.html"> 2.3.4 
    Example: Huffman Encoding Trees
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4 Multiple Representations for Abstract Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.4.1.html"> 2.4.1 
    Representations for Complex Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.4.2.html"> 2.4.2 
    Tagged data
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.4.3.html"> 2.4.3 
    Data-Directed Programming and Additivity
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5 Systems with Generic Operations</a>
                </h5>
              </div>

              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-51">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="false" aria-controls="sidebar-collapse-51">
                <a href="./2.5.1.html"> 2.5.1 
    Generic Arithmetic Operations
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./2.5.2.html"> 2.5.2 
    Combining Data of Different Types
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./2.5.3.html"> 2.5.3 
    Example: Symbolic Algebra
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-54">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3 Modularity, Objects, and State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-54" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1 Assignment and Local State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.1.1.html"> 3.1.1 
    Local State Variables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.1.2.html"> 3.1.2 
    The Benefits of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.1.3.html"> 3.1.3 
    The Costs of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-59">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="true" aria-controls="sidebar-collapse-59">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="true" aria-controls="sidebar-collapse-59">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2 The Environment Model of Evaluation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-59" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-60">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                <a href="./3.2.1.html"> 3.2.1 
    The Rules for Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.2.2.html"> 3.2.2 
    Applying Simple
    
      
      Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.2.3.html"> 3.2.3 
    Frames as the Repository of Local State
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.2.4.html"> 3.2.4 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-64">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3 Modeling with Mutable Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-64" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.1.html"> 3.3.1 
    Mutable List Structure
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-66">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="false" aria-controls="sidebar-collapse-66">
                <a href="./3.3.2.html"> 3.3.2 
    Representing Queues
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.3.3.html"> 3.3.3 
    Representing Tables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.3.4.html"> 3.3.4 
    A Simulator for Digital Circuits
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-69">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                <a href="./3.3.5.html"> 3.3.5 
    Propagation of Constraints
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4 Concurrency: Time Is of the Essence</a>
                </h5>
              </div>

              <div id="sidebar-collapse-70" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.4.1.html"> 3.4.1 
    The Nature of Time in Concurrent Systems
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.4.2.html"> 3.4.2 
    Mechanisms for Controlling Concurrency
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-73">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5 Streams</a>
                </h5>
              </div>

              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.1.html"> 3.5.1 
    Streams Are Delayed Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-75">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                <a href="./3.5.2.html"> 3.5.2 
    Infinite Streams
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-76">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="false" aria-controls="sidebar-collapse-76">
                <a href="./3.5.3.html"> 3.5.3 
    Exploiting the Stream Paradigm
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./3.5.4.html"> 3.5.4 
    Streams and Delayed Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./3.5.5.html"> 3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-79">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4 Metalinguistic Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-79" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-80">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1 The Metacircular Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-80" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.1.html"> 4.1.1 
    The Core of the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.2.html"> 4.1.2 
    Representing
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.3.html"> 4.1.3 
    Evaluator Data Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-84">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                <a href="./4.1.4.html"> 4.1.4 
    Running the Evaluator as a Program
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.1.5.html"> 4.1.5 
    Data as Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.1.6.html"> 4.1.6 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.1.7.html"> 4.1.7 
    Separating Syntactic Analysis from Execution
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2 
    
      
    
    Lazy Evaluation
</a>
                </h5>
              </div>

              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.2.1.html"> 4.2.1 
    Normal Order and Applicative Order
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.2.2.html"> 4.2.2 
    An Interpreter with Lazy Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.2.3.html"> 4.2.3 
    Streams as Lazy Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3 
    
      
    
    Nondeterministic Computing
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.3.1.html"> 4.3.1 
    
      
      Search and amb
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.3.2.html"> 4.3.2 
    Examples of Nondeterministic Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.3.3.html"> 4.3.3 
    Implementing the
    
      
       
    
    Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-96">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4 Logic Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-96" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-97">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                <a href="./4.4.1.html"> 4.4.1 
    Deductive Information Retrieval
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-98">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="false" aria-controls="sidebar-collapse-98">
                <a href="./4.4.2.html"> 4.4.2 
    How the Query System Works
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./4.4.3.html"> 4.4.3 
    Is Logic Programming Mathematical Logic?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./4.4.4.html"> 4.4.4 
    Implementing the Query System
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-101">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5 Computing with Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-102">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1 Designing Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-102" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.1.html"> 5.1.1 
    A Language for Describing Register Machines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-104">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                <a href="./5.1.2.html"> 5.1.2 
    Abstraction in Machine Design
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.1.3.html"> 5.1.3 
    Subroutines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.1.4.html"> 5.1.4 
    Using a Stack to Implement Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.1.5.html"> 5.1.5 
    Instruction Summary
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-108">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2 A Register-Machine Simulator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-108" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-109">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="false" aria-controls="sidebar-collapse-109">
                <a href="./5.2.1.html"> 5.2.1 
    The Machine Model
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.2.2.html"> 5.2.2 
    The Assembler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.2.3.html"> 5.2.3 
    
      
      Instructions and their Execution Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-112">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                <a href="./5.2.4.html"> 5.2.4 
    Monitoring Machine Performance
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3 Storage Allocation and Garbage Collection</a>
                </h5>
              </div>

              <div id="sidebar-collapse-113" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.3.1.html"> 5.3.1 
    Memory as Vectors
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.3.2.html"> 5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-116">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4 The Explicit-Control Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-116" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-117">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                <a href="./5.4.1.html"> 5.4.1 
    
      
      The Dispatcher and Basic Evaluation
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.4.2.html"> 5.4.2 
    
      
      
        Evaluating function applications
      
        
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.4.3.html"> 5.4.3 
    
      
      
        Blocks, Assignments, and Declarations
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.4.4.html"> 5.4.4 
    Running the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-121">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5 Compilation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-121" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.1.html"> 5.5.1 
    Structure of the Compiler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.2.html"> 5.5.2 
    Compiling
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.3.html"> 5.5.3 
    Compiling
    
      
      
	Applications and Return Statements
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./5.5.4.html"> 5.5.4 
    Combining Instruction Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./5.5.5.html"> 5.5.5 
    An Example of Compiled Code
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-127">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-127" aria-expanded="false" aria-controls="sidebar-collapse-127">
                <a href="./5.5.6.html"> 5.5.6 
    Lexical Addressing
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-128">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-128" aria-expanded="false" aria-controls="sidebar-collapse-128">
                <a href="./5.5.7.html"> 5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-129">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-129" aria-expanded="false" aria-controls="sidebar-collapse-129">
                <a href="./references.html"> References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-130">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-130" aria-expanded="false" aria-controls="sidebar-collapse-130">
                <a href="./making-of.html"> About the SICP JS Project</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    2.5.2&nbsp;&nbsp;
    Combining Data of Different Types
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    We have seen how to define a unified arithmetic system that
    encompasses ordinary numbers, complex numbers, rational numbers, and
    any other type of number we might decide to invent, but we have
    ignored an important issue.  The operations we have defined so far
    treat the different data types as being completely independent.  Thus,
    there are separate packages for adding, say, two ordinary numbers, or
    two complex numbers.  What we have not yet considered is the fact that
    it is meaningful to define operations that cross the type boundaries,
    such as the addition of a complex number to an ordinary number.  We
    have gone to great pains to introduce barriers between parts of our
    programs so that they can be developed and understood separately.  We
    would like to introduce the cross-type operations in some carefully
    controlled way, so that we can support them
    without seriously violating our module boundaries.
  </p></div>
  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    One way to handle
    
    
    
    cross-type operations is to design a different
    
      
    function
    for each possible combination of types for which the operation is valid.
    For example, we could extend the complex-number package so that it
    provides a
    
      
      function
    
    for adding complex numbers to ordinary numbers and installs this in the
    table using the tag
    <kbd>list("complex", "javascript_number")</kbd>:<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
    
    <div class='snippet' id='javascript_51_1_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
// to be included in the complex package
function add_complex_to_javascript_num(z, x) {
   return make_complex_from_real_imag(real_part(z) + x, imag_part(z));
}
put("add", list("complex", "javascript_number"),
    (z, x) => tag(add_complex_to_javascript_num(z, x)));</pre></div></div>
  </p></div>
  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    This technique works, but it is cumbersome.  With such a system, the
    cost of introducing a new type is not just the construction of the
    package of
    
      
      functions
    
    for that type but also the construction and installation of the
    
      
      functions
    
    that implement the cross-type operations.  This can easily be much more
    code than is needed to define the operations on the type itself.  The
    method also undermines our ability to combine separate packages additively,
    or least to limit the extent to which the implementors of the individual
    packages need to take account of other packages.  For instance, in the
    example above, it seems reasonable that handling mixed operations on
    complex numbers and ordinary numbers should be the responsibility of
    the complex-number package.  Combining rational numbers and complex
    numbers, however, might be done by the complex package, by the rational
    package, or by some third package that uses operations extracted from
    these two packages.  Formulating coherent policies on the division of
    responsibility among packages can be an overwhelming task in designing
    systems with many packages and many cross-type operations.
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    Coercion
  </h2></div>

  
  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    In the general situation of completely unrelated operations acting on
    completely unrelated types, implementing explicit cross-type operations,
    cumbersome though it may be, is the best that one can hope for.
    Fortunately, we can usually do better by taking advantage of additional
    structure that may be latent in our type system.  Often the different
    data types are not completely independent, and there may be ways by which
    objects of one type may be viewed as being of another type.  This process
    is called <EM>coercion</EM>.  For example, if we are asked to
    arithmetically combine an ordinary number with a complex number, we can
    view the ordinary number as a complex number whose imaginary part is zero.
    This transforms the problem to that of combining two complex numbers, which
    can be handled in the ordinary way by the complex-arithmetic package.
  </p></div>
  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    In general, we can implement this idea by designing
    
    coercion
    
      
      functions
    
    that transform an object of one type into an equivalent
    object of another type.  Here is a typical coercion
    
      
      function,
    
    which transforms a given ordinary number to a complex number with that real
    part and zero imaginary part:
    <div class='snippet' id='javascript_51_2_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function javascript_number_to_complex(n) {
   return make_complex_from_real_imag(contents(n), 0);
}</pre></div></div>
    
    
    We install these coercion
    
      
      functions
    
    in a special coercion table, indexed under the names of the two types:
    
    <div class='snippet' id='javascript_51_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAJgHQFY0oFA4DYCmALqAMYD2hATmQJYUB2A+vnQM6kC8ojArvnwBuPADM+jMsQaNyRAIbVmlGvSasOxABQBKUAG8coY+Sq0ZGzqB79BIgL5iJUmaAAOfYsrNrGW4gCeboQAjAA0oIHBKBF0xIQAtnqGJqB0oqBaHMy2+FoA5iTeqjL+QaERUYQoOrUGRqkmKubqbFY8bvJ01Fpt2lXhkeUxafFJYQ2NU9MzpiWtmjoiqfaghPjshPUz1CR81LLNvpbEyyaOjjjiktJMoIVeR6UDlcPJk6DXLncPzAO9mmYcUS7x2ewOoAAFoR5AATAGcIFjJYfRypL63WS-KooBFeYFJbbTXbEfayaFw-xdPJ9JEglErD4Y1y-Al4umElLE8HkmHw4jUql0GmAgm1BnnJnOTH3IpPdTAnoE9ig6bpTLZXJZMYq1WzUAksmgCSwwiiOiMQiws5TVbrTZE-WURhWYgUNzWKF87WJFU22aGiGEACOfHkeResq8-zdbjqADJ4zgAJD6tah8NlaIRbHDfzu2ofNPGAD8UY5+bjKdmAC5y-KWIqhXllbV-YyOyZA1i5T4LE2GycUZdmXcAFbyABu8nYZGodDcXn4CQARjQ-hRvAk3EQAB5aRh67ugBLyADWhC3O8Iu+YomoFASzF24aBp-yWmd8UYxHYB50EQAAzDngICgJAsjgBQ+xkIQEQJBQViji6UJTls8ifHQu5WrwfCrjQoAUBkij5HhhA-uwaA4GBWgACrQp80quH0aTsJEDFMPgARrLusGLjIlQUOxHCgOwQmiIoaA6NRYD0VsyGgPIbg7gEQIsCaNBcRa+TMBO06zvOi6KYIFAAO5sXwbFujJinKVximMNx+R0JO5GMTcrjXJEQnhvgaxEAk5G-oRGTEAxJFkT+oA2SxJHsBEM5pKF0LcaZNBbJsnTUPI8SKdQpGBRRVxMXcSkqVo1wJflKqOgaPK2SpanMBp1BaYwOl6TOc4LtolV5fkfo4COJWyGVXHMIUlrzmQWjulVA16qYLqkFUfzyANnqnm4WaXgK+TzYNqTOkhEieg8s1uK8wRrQt-rHgAhKxzWMKa5qWvC1zSWmZZjapFrPaarUBNpulTl1hm9RI8FKZ+TDfr+B2FmmdY0A+PR9BdV27etKoTMW0wAESMEJgVhRQsKfBQ1DsYQDpVGxAC0DMNeNk00HQZAEyBxUeaVsLwruEQBEe9W-RN5HszNBNwrCBMRBjgugMLIEKewfArloivC46x5i2z01aATasrnLoAK0LbZDTz3yyAkAiaxbOui3Zqn6xzht2-gpvm0rluOApsIuQ7vtO6SEJ6xLBsE4Hk7e5owfKw4Ti87IL74MwWXaAAXiLYejS74tTe7BNpxnijEHHnBaDnKsjWk75l9Q2e50aEdF1LdAN5nlfN7XKcnutjBxHwprVy34cF27UvvkPpKmj3Y99zbDn5EQY+h63k+R8X8jtUQC810nNnujQOUWAKK5EBEHikLvFMPDZ96PuQkJKfE1MAMyZJsy8f2gf8f2ktbGUM4xIzQvAECIuxKDUFhDVLkxhjyagEHkaBVM4FfX1GWDSb0rRFimCjDMeQIERApPCMhWg0GwN1Jg2YZYKFUIwfgxodZQEUHAYQSBkRBSMN1EfBSp4LxrUvoQXQtVjqkHwOw18F8iCegxgTAAVLIwgiiub+gUlIigZ4+DbQgcwQY+iai1SOkwKwxsVGejYRw1SgwBTCl6NI9OKjLYzHVFkdgAMzQWitFoCx8gRF1AQQGeqOCfHWmYaAO0GwtjBJmBIuqMCKY8GsVoIxlRBT+MCRKfUSDPFhPepQwgSTaH4xMNgl63j3qRORtwhxjCcmNDRJKdEdcLSbCbmkzhBiIjpNANOfAfBCCLVMctUS6tLEpPYGArptiMkOKkWQGRASiCuLVBkDxXjcHwiyaskZ0xNjRkFIs5ZIi8ZlKmJ0boeJZk9PcF0HofSBlDNqOci5sx7E0iccIvZjSVj+QdHE6YCTGFWOmew25IxPl+ImSs4Zfz1kanyZU7ZRSSn7NTAcoo0LdlwWrO8y5DytBXMed0kYzzhlvIJfqHFsLskokxcYaJgKalYqOfU4p6CIgUoRbaSJzSmVSn7oHdgnRiBkEhFoTkkTjwJGsFwHgBMtE6LcATVljQyzKt0eq1IdY5UKsVe0mgFcdXlLSC6Y1prjAo2oGjKVEQCYSDPMTUysgT7ZRlEzbhIj1Gog+MeEVYqJVHwSe6s+6hJkDyESo3QIgEkPE9GGzEPzRFKooNo3RvqEk30TcED1584WGyNU3X1wDXA5QFBKm6O0boRC-EFeB-r6okprXtOtcMG1LxlKtPaWhYQ5TwotPJZdrn9tJEkdV9DvRjsHeqm1dqZ0JAdSuOE3D8iFApou0AXqe3rV9f7Ou9aKJ9oHdK1Iw6W2LtKdMMs0Kr1zrWLaqmJ7x3LtXXtDdoAt1eqPb+fdydl7sAzLsTWQ76q7lAIo0Au5+FtOWr5Z8xSBTtQEIoMuZAzzrVEYtMCFp36MHDO5G27AhXL1Lpnde+g6p5y9JSHOQgomkZlJ3dajdm4GGo0aaF9HGOtP7oIy8T8nylxYx+LWyROMQhbeJhjAqiMyhnsPUeOcTFdnqqeMKzAgOdKA2GED5Hy6L1AAAaitWmXTihRGibY4vRpcmFK71XqIlTQLEHqZypCZgOVd5ZC7oZnOUCYTpwo4fP1fHl4CbvA+J8DdHOUISvstzNGW3UygxpzzlA-zyAAgaSDA9NPsAtFobLdm8CpFwz+GgElYLeRpnVKwRE6vsACJwRITHXC9t3IlyTo1iCVs872kuSHHOoeoKbLr-o5M30NgZkt8t45DakCN-AiguaBdfJnRp02CbWe7vNqui3kOkRW2NnLu3y5bc8B7QeSnCAL0O8t1bOXFNz2Gf6bbjn977e0A9lDJ21sr1We9q7BNItCcQ6+UTptfvHdW1S1ICc9BcAAHxrqleeQT0WIfp1E4jtZxhttg6x7F9q0PoFHdG3LSJ8XFJI9R72onj5mAk4-NQBL+OeugGjkwO7R92kCkEIhpbf20OdAw1h2NAHmPwcF24CgJ30OYcKGI4JFX8OEeQiR8LCmbuvco5zihPH7N10+85iTx5uNLF4yYARGOotM5ZzT7LHHjwpYS7J9rdxZvsdc7K3XI8zd5fS94LLe8zele164c7nSXPML9-kWeAf15pY81porpvF6Tc97bO34ORPvkR6pznLbg-ae0BZkDXWTOiWA6I5W8OynB+834LhXXSsfDV1V+QNW3R1d2A15KGUWtjGz2jqvVHdZ9e7wN9ahs5f-YiBN63BOQfe-u-Pp763gsXeBz96PFdvtz-l5v+urHNu7+uwn276-j+nehlf17l2fum5v-9nLpun-XaEXnoLb490Oo3zGwiGp3E2sHp1n0Z2E1-1x3Ew50J1z2J1Y0c2h0AKpxmCdzpzR0gOZyQPagwI52PG50tAJj5xl2C1v0VwlxRDLTuH5wQ0oG3D3EoOVxwzAE7jlybhwk10+Gi0SQpxOwcgpkAPuXF0KHYExVH2wPz1n1ANc053OlBwQKZ2kPyDJ2GxF1O0Ryz0jzuGwMdzZ1pyL3kJIC-0xwd1wNUIANvy5gwKzw7zYMqwOA1xGi1xtxN35ivD3GrkGCzmMTkL92-yxxUKKQ238xCD0GMzqlCJjxqAb2pTTH328IiNPx0hCxqAjzcP7mNk8JvG8IiF8O6wCLMKgMhwL29ySO3SiO3xiIAjM3iJSJsyznCMqMSIKIyOMAEQEByP3CaPyL8JlXc0CPMJ0jixeyTyaL0BTwf3GNiLqIJQzwmOrwWPSJEGTGN2FRcm6LyNAAKKMKKPtxiwsPR2mOU2aLADGOU1mPqPxgWOaOZmWMtjWLKxME72oGqy2F7371IEazCiH1awSFH17VjzBBowrWn2rQJgYOvF3FNnozCxMA+35nuyhL3GhxRJvAB2p16J2OMRRzRxli2OxLaM-yNnVmRMfGhLRIpNRJyyxJ8NxPAI-GyPRJ6PpPFAv1BwEHJMYIxIdRZMxPQKJIZKwK6JZO2OJI5Jjm5MpL5OpIxNpMFLZLALRxjkJLZLgJBykOgPfCpJ5JhOAPQNALxIZyUJKJxwL1gJJL0IsN1JlOinQIMOd2NIgNNJwJGLwMdPZKbRoyIN51SCthwDoMFxZOYOwxEBoJzyERDJ-1KJkItgQWPAUK1NjMsK535J0C0KtltyjLlNvHB30ISwTPqiTNdJZ1tJpNsIDJvmKBaD8AJk6gMh6hyDwjXCALTNzLQOLAbO6kXGbPwiUDdG6OoN+AbENm7Ihj7NbPLPlKECAA')">put_coercion("javascript_number", "complex",
             javascript_number_to_complex);
</pre></div></div>
    
    (We assume that there are
    
      
      <kbd>put_coercion</kbd>
      
    
    and
    
      
      <kbd>get_coercion</kbd>
    
    
      
      functions
    
    available for manipulating this table.)  Generally some of the slots in
    the table will be empty, because it is not generally possible to coerce
    an arbitrary data object of each type into all other types.  For example,
    there is no way to coerce an arbitrary complex number to an ordinary
    number, so there will be no general
    
      
      
	<kbd>complex_to_javascript_number</kbd>
      
    
    
      
      function
    
    included in the table.
  </p></div>
  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    Once the coercion table has been set up, we can handle coercion in a
    uniform manner by modifying the
    
      
      <kbd>apply_generic</kbd>
      
    
    
      
      function
    
    of section&nbsp;<REF NAME="sec:data-directed"><a class="superscript" id="2.5.2-sec-link-2.4.3" href="./2.4.3.html">2.4.3</a></REF>.  When asked to apply an
    operation, we first check whether the operation is defined for the
    arguments' types, just as before.  If so, we dispatch to the
    
      
      function
    
    found in the operation-and-type table. Otherwise, we try coercion.  For
    simplicity, we consider only the case where there are two
    arguments.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>  We check the coercion table to see if objects
    of the first type can be coerced to the second type.  If so, we coerce the
    first argument and try the operation again.  If objects of the first type
    cannot in general be coerced to the second type, we try the coercion the
    other way around to see if there is a way to coerce the second argument to
    the type of the first argument. Finally, if there is no known way to coerce
    either type to the other type, we give up. Here is the
    
      
      function:
    
     
    
    
    
    
    
    <div class='snippet' id='javascript_51_4_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAJgHQFY0oFA5KAPYAOApgE4CGALgJaEB2A+tZQEYA2pANKMQK7VQlBgBNQAc1LV8YAGblCAW1ABjABaVi1CqADMoABQBnUqrqN9aPdYCUOOfwbn6DYceOFVhgNakAnrzkZoTkosa2oADeOKBxoMHU-ORutMZMDPwcHIbBqqHh9vHFxQD8oE6ipHK0DKSisSUlAFygpACO-JQ5foGg6qSUooYDQ7khYRG2RU1N5aPDeQURjbPFrZQeXr4BvKy0OUuT0wDcOAC+Dk4ulkqUfizsXIaRMcX5DMZCHF7dj5ykUAAXlAHDS1EMACIAFSsAHQyG2M7FRzOCxuH6EHz8Yg7fxMACMvF6TBQr1WJQ+X1Axn4bDhXGB7k83hJRNA+xyP1UfwZpFOFOKtDkRjSTEq1Vq9RMdL502igtmiWSbglNTqomRs3ObQ4pgVa3ejGpR3EIM2LLxpL2lAOMvpT35SMVTWFovSaqliwmonlb0NTWVKQqYklGq1AZ1pD1gP9AeKQbcnPG+TCzvjoEuayz8RzcVRN1SnwoELZxIC1tAADduvx+QbZlShLSHQCmRbtmWObaub8OP8uAK1m7DGLPRr7XLyRnTNRHnbubzHdwXRm4sRbeRDGCvlb2RvaFuSSheDWOHXpiu12vk4v+1P09rdfq44amwkfe2tqyKyfu3aWynCNDRHMdQ3VaVTT9RUAEg1lnecckA5ccDg681gPLdMKtP8zwvK90OvZNkIBaZnTQuIoxjBtrwQ5NTVPWt+WA7NVzzTMKQLdFQFENIN2oDRDCUaclWkFVQBUIEpNASFMWxYhIVXWZyjknElKaVpJOkyFalMchqEUwjQHKXSS3U2ZWkhcd6iIMgqG4gBaBzuwBSFgPYxMeL4mgNDOS53xICgaFcAdARBO4Hj5F4znfKQhBBQL7JCqLZMILEcURGLjSEAR4tsoL0VCqFTP0zK8AISA3HAQhklUHgJMIakuNcYx+koKtAUoUAagADxszIlDYXRCBFShyAkfglFIBhqGMNBZCMAAVAZuuubidyENIORWxgOH8Noerq7RXD2Qhtq2zxurGtB7AIZbAWaywtGIPamFqcVQ3IPbagkJgACt2s2VRyFobRhGyQgAHdWv4VrqEIBbnr24QGH2iRaA6txHqxpwOTO7oOF1Ugppm1qRu2zrxsm6aZAIDbhHG4xeE2UA3WoAZ9shihAVMDd7MpiaSdmq40VcYRiBe-xDFRZnGZEuJPKR-F3olL7-B+-7AeMYHQYhGWGYkCI-JFwthFEYYet4fx5cViXXqkOoQe8SEhlESFeA2wxLdAa3nUubGaTpL2rZtsTgyVpgHYoWhnZbd3QXBYOfYFf21rFpQsiT62aNtyXI+m6PnYzjh48973feNgPeKrLPQ6ScO7fxKOnahavS8T8uU7wAOaFYDRHgkQxqH8MgB94D4dFJ+WP3rtxsOH0fWAkcfGEn2a-ZN7iF9IAfDFEGhJunzyxWw-ekmE8z5kGYYz8P8zWgoRQt1vpReEhNghm7CQpHEF-QCcjkI8d5LzKqnUWlgJ402MHvA+wkaIz3EifTcMDz4zENOUZML80FrAfuQJ+KDJpvw-uIJeP8eKwP-s5SBpNQHdzTpYXSrBsiaxrNrEG2gMiTSGuQJgG5VA+EoFIF48CA5Ly9tPBMYc3C90oP3MRkIAasJ1hwga3D449UfJRCkuUoSu3bruBRWtlFzlURQeOhilHsJMVwsxtgCJNFrsCAAfF-L2oAADUydNF8EEFCOOHtE4WKBlYzhg0zFv0UcE3WoS1F2NXI4oELixE9X-l44COjITF30RCIJbDommPIOYyJeSVE2MKXEtYCSkmCLcdCNJ2jfGQjbgEgxxTjExPCTJNpISCmInsSUKpriUlgArg0nJEVSBFKMT0sp7tVwpMSUMoc8RPJNMYJM42jCCYsKiaUsJPC+ECKEc6Te6d7g726fksphgGBHykZIaQUIJlTMsVc-ZiIbkbwWs3GONJoxmHhuQVa4DPjdVCGoZQL1SApIKcYOhIKPx-D5hCAAXnXcSEcfnO2CEisaBkWmoq7gHWgdxfrIsMGinO9zMUFxbjpUlvC8XZIpUS+hbhSUMFoEkKoLKqWz3FnnLFTzBGcu5ZMglLKN49wYBIZ4lK4y53trSmOuiZVcGZWiqVbKaSdDGqQcR8DPIpLqT1Y2pyGGfCYf2PIrAZVZDGoy-hgj9XTwDji-s5L5UIODAsFlJwOIom1SSwRjL9K8qiN6pMPY-UBviAHCZTAFDKCYO6t6pLHERs8thTu-r2LxpFVy-gPL5Wrk8ncdmTBjDtDDVWrowRxi4rDZqjx5l4K6vrcGsleLJXeLzdqkQsr9UlrWGWmg6gmA0BEKOBlnq7GIo9d2zV7lOLaoTUmpQTAGUDtyMzCRKz7nYSBXU8t478jQMoHOo9Ekx2VtqIYC9vaKQEFqDocgchZGAnhhTD81Jybsx5v4L4xMV0IuSXuhW1LqB93HfIm1A77WFN4Bo5dxQMmpuRcyyEcG7UcDGn0+dobqDeIyZ2wjmHsMTVw+U3gpHkXEcaRywtVRyMAvg1R-DjGxX0ZyQO9VEqsOsZw3hudvHmJjOFQ8ddKbBj9k7eYijCG5mVM7s41xa7FAbtTZ22uyz1wMfOYmjTm6Q0Dvk4JyjeH+nFB3cISIiyxHqeTVumVNmH3eNWaIdZbkLg4C2cwhTVHHVHJdWcc1RYvjbOIIQQLhznXCNfM+maFAGDdGBYWOFgaEWcaLUO14kb+jXxjX2hFonw35eTGi3NIHTaOY3c5we5Bd3RHy4e3dVXMum3Q4u8Do6JCipy7y49N6z33rVblx9HXuK0e6-A-d-LsvFsiENitxg72laXRSYrNWDNSa0+mlTr45viWwieyt1aIS1r1Qazxl362+ys9eU7k6GCGD6Box9T6wAvooO+uqeNv3BF-SKf9NJAM6CUNVreNSNHNcVlB2RMGamQii+xpDSJY16ZyV10q-GUfCaCDJwj3HiozqZbj6L+PWak-0sTzJBaxWYbx9R69fWmNidQ400TjOKfM9E7T2r0m-hybfkzpTsxBkOZ20Zvb0OQ66Z8eMqXTmTMyvMaLh7cRXN2eqYPAX9Wtfy4815zZlrIs86C3Fk5xLTfMPyEoKFPULfHPgc++3oQdDiGxq1ddH5zBsbGijcQTO+CyOCxluNq6leacJ9pg7pb7lxQkzvXbMfSVmb90J8ptcUMR6y1H4zv1t2Nds7No7wZE908k0Z+rauecfOLxe5dn3WZJZSKlr3kOxauyYHbh3FL2QorJKXiD8388y4a4Tz1BJIjuNbUZQMk-F1kg1-PgM02m3T5bavwi6-UVkgm7n02LYe+Qq4D1fvvBB-gfywL8fDaF0b8iA5Of2+IONr3xU1-a5d-96fy-1-P+V+B++Yq6WQJ+9uZ+F+oAV+w+N++e+uC2Q6m+0I-+8+iBFKy+qBRk62m+s+X+8Y62++ZwMEW23E1c4BfeKKA+Q+h2Ze7K8BKuuu9OA2VBkQwAWBhE6BV+K++BcQOBf+vBhohBAoJBeAxQiWr6v2n6Z0gOQgf6K0xgYOwGk2YsYiw6ok-KMiciSOveZ+8clWm24mLs5smGuh0K5iZhPUfS8SVBl+Q+9mNS3elhUBQBtO-iCcBilhFhp+5hn+Dith0B9hOu9oFBkBARrh6SDGWQphPhVhb8XhfhAy4RQRamYBzhyRZEkROSzSHhOSXh8RsR1hlSGRqmYi5B6R1BmRRht+qegi3hEB5hK+EuNSNRQu+2cu-ODBhequBRDRcR8SDe2uamXRE6Lmgxhu9yaydQ3mlwfm-YlhTuIW8K22DwCxKebRsuycCqCejyleye0utREg9RDuHyOaPm+aqxsRhmyu3RDWu62x-KFeeujBxxehtgWuZqBA+QFAqgYstIEs7ueAXAQg3x5AvxjATA9MIImQ2QoWAcqgXADqoJ4JzAns08yJIUUJoAMJHAZqAcuUJ+PxrgQ8QC7I28f4XKxM08oEHo4EXohgcUhJYJxJ28ZJQC++1+GJEJWJ2EnsrJew7JNG4OiRghXJqJ4Ivaz4sY8e-KYpkJ4Iy6lwYWDyc4YpJJZAbJZANBnelgjJrJ244Ib0wpsBnkvqG0RpVJOeIBCKep7JBpXwFpcCtBI+4kvqt4hplJwkwBaW3EjJnp9pc4np1+pphWyY7pDpQZ8upBYsjJcplJW4npEQsBNJnC2Qo44OUwsBki-K1kmobEUpWZ8Q748MxATIvqiZ3iI69yHQXQOQ-JKpLApJQ8JA8oAAZK2ahPGDWd0OqaQH+LaVqc2cQNMFgeUH6eDkOfYBRBpA2XGa+kPNGhWZWbmIYdmeJLGYQESRCfGYYHKRtF8j3I3PnI7CqiQLLIbOidlIAovIIq1OFFoL2WPAbEbBSO+KiEyInmedecAred4iOAAISsy0lVAQTDCojQRVmaGNzSxOC8B3C4jUKzTnlTDuQFnOmswijbjTQSDsz3pyzAjSTakZjFmkllmhlAIDwvnEVXnklkVjBhkUVLwoWtrviUAEh0XDBjQXksSNhXmUAoAcULl2hcXMXUWWocgEgsCEAsACUggblbkvb1nknLlNDFkoBSUsDsVyXSBMkom9l-iskqUlCeSAVgQgX0nUCSXwwyXYLoTlA0onneBnl8lWXSXUAoD3rT7Mz74cGgCtCmXAVhjSjuUaWWW2XXj2VHlCpfmexsV7DqXWWWX3ocm+W4L4KexfnbyUUilf6QgMBnRTTsyECe7gr-r6jbzGBlTZhoWtqeSPyhABmGCZWMW-k8GER5UFXSDqDFVgpAplWfpAKVVGXsSXBKkByXJ7LcIaXOG3J8riQJprEHEbGDyIXQK3K8AAAMXyBJapuS7SvSvRJxbV8QE11i+y01sRJy74qgTIC1Vx6xsm6aAALLwHoM6O+G4PeQ8KdR0luAAOwnKuy7m8C3InBAA')">function apply_generic(op, args) {
    const type_tags = map(type_tag, args);
    const fun = get(op, type_tags);
    if (! is_undefined(fun)) {
        return apply(fun, map(contents, args));
    } else {
        if (length(args) === 2) {
            const type1 = head(type_tags);
            const type2 = head(tail(type_tags));
            const a1 = head(args);
            const a2 = head(tail(args));
            const t1_to_t2 = get_coercion(type1, type2);
            const t2_to_t1 = get_coercion(type2, type1);
            return ! is_undefined(t1_to_t2)
                   ? apply_generic(op,list(t1_to_t2(a1), a2))
                   : ! is_undefined(t2_to_t1)
                   ? apply_generic(op, list(a1, t2_to_t1(a2)))
                   : error(list(op, type_tags),
                           "no method for these types");
        } else {
            return error(list(op, type_tags),
                         "no method for these types");
        }
    }
}
</pre></div></div>
  </p></div>
  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    This coercion scheme has many advantages over the method of defining
    explicit cross-type operations, as outlined above.  Although we still
    need to write coercion
    
      
      functions
    
    to relate the types (possibly $n^2$
    
      
      functions
    
    for a system with $n$ types), we need to write
    only one
    
      
      function
    
    for each pair of types rather than a different
    
      
      function
    
    for each collection of types and each generic operation.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>  What we are counting on here is the fact that the
    appropriate transformation between types depends only on the types
    themselves, not on the operation to be applied.
  </p></div>
  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    On the other hand, there may be applications for which our coercion
    scheme is not general enough.  Even when neither of the objects to be
    combined can be converted to the type of the other it may still be
    possible to perform the operation by converting both objects to a
    third type.  In order to deal with such complexity and still preserve
    modularity in our programs, it is usually necessary to build systems
    that take advantage of still further structure in the relations among
    types, as we discuss next.
  </p></div>

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
    
    Hierarchies of types
  </h2></div>

  
  
  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    The coercion scheme presented above relied on the existence of natural
    relations between pairs of types.  Often there is more <QUOTE>global</QUOTE>
    structure in how the different types relate to each other.  For
    instance, suppose we are building a generic arithmetic system to
    handle integers, rational numbers, real numbers, and complex numbers.
    In such a system, it is quite natural to regard an integer as a
    special kind of rational number, which is in turn a special kind of
    real number, which is in turn a special kind of complex number.  What
    we actually have is a so-called <EM>hierarchy of types</EM>, in which,
    for example, integers are a
    
    
    <EM>subtype</EM> of rational numbers (i.e.,
    any operation that can be applied to a rational number can
    automatically be applied to an integer).  Conversely, we say that
    rational numbers form a
    
    
    <EM>supertype</EM> of integers.  The particular
    hierarchy we have here is of a very simple kind, in which each type
    has at most one supertype and at most one subtype.  Such a structure,
    called a <EM>tower</EM>, is illustrated in
    figure&nbsp;<REF NAME="fig:tower"><a class="superscript" id="2.5.2-fig-link-2.25" href="./2.5.2.html#fig_2.25">2.25</a></REF>.
    
      
        <img class="scale_factor_" src="../img_original/ch2-Z-G-66.svg">
      
      
      
    
    <FIGURE>
      <img class="scale_factor_" id="fig_2.25" src="../img_original/ch2-Z-G-66.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.5.2.html#fig_2.25">Figure 2.25 </a></b>A tower of types.
      
      
      </div>
    </FIGURE>
  
  </p></div>
  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    If we have a tower structure, then we can greatly simplify the problem
    of adding a new type to the hierarchy, for we need only specify how
    the new type is embedded in the next supertype above it and how it is
    the supertype of the type below it.  For example, if we want to add an
    integer to a complex number, we need not explicitly define a special
    coercion
    
      
      function
    
    
      
      <kbd>integer_to_complex</kbd>.
      
    
    Instead, we define how an integer can be transformed into a rational
    number, how a rational number is transformed into a real number, and how
    a real number is transformed into a complex number.  We then allow the
    system to transform the integer into a complex number through these steps
    and then add the two complex numbers.
  </p></div>
  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    
     
    We can redesign our
    
      
      <kbd>apply_generic</kbd>
      
    
    
      
      function
    
    in the following way: For each type, we need to supply a
    <kbd>raise</kbd>
    
      
      function,
    
    which <QUOTE>raises</QUOTE> objects of that type one level in the tower.
    Then when the system is required to operate on objects of different types
    it can successively raise the lower types until all the objects are at
    the same level in the tower.  (Exercises&nbsp;<REF NAME="ex:raise"><a class="superscript" id="2.5.2-ex-link-2.83" href="./2.5.2.html#ex_2.83">2.83</a></REF>
    and &nbsp;<REF NAME="ex:apply-with-raise"><a class="superscript" id="2.5.2-ex-link-2.84" href="./2.5.2.html#ex_2.84">2.84</a></REF>
    concern the details of implementing such a strategy.)
  </p></div>
  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    Another advantage of a tower is that we can easily implement the notion
    that every type <QUOTE>inherits</QUOTE> all operations defined on a
    supertype.  For instance, if we do not supply a special
    
      
      function
    
    for finding the real part of an integer, we should nevertheless expect
    that
    
      
      <kbd>real_part</kbd>
    
    will be defined for integers by virtue of the fact that integers are a
    subtype of complex numbers.  In a tower, we can arrange for this to happen
    in a uniform way by modifying
    
      
      <kbd>apply_generic</kbd>.
      
    
    If the required operation is not directly defined for the type of the
    object given, we raise the object to its supertype and try again.  We thus
    crawl up the tower, transforming our argument as we go, until we either
    find a level at which the desired operation can be performed or hit the
    top (in which case we give up).
  </p></div>
  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    
    Yet another advantage of a tower over a more general hierarchy is that
    it gives us a simple way to <QUOTE>lower</QUOTE> a data object to the
    simplest representation.  For example, if we add
    $2+3i$ to $4-3i$,
    it would be nice to obtain the answer as the integer 6 rather than as the
    complex number $6+0i$.
    Exercise&nbsp;<REF NAME="ex:simplify"><a class="superscript" id="2.5.2-ex-link-2.85" href="./2.5.2.html#ex_2.85">2.85</a></REF> discusses a way to implement
    such a lowering operation.  (The trick is that we need a general way
    to distinguish those objects that can be lowered, such as
    $6+0i$, from those that cannot, such as
    $6+2i$.)
    
      
        <img class="scale_factor_" src="../img_original/ch2-Z-G-67.svg">
      
      
      
    
    <FIGURE>
      <img class="scale_factor_" id="fig_2.26" src="../img_original/ch2-Z-G-67.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.5.2.html#fig_2.26">Figure 2.26 </a></b>Relations among types of geometric figures.</div>
    </FIGURE>
  
  </p></div>

  
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
    
    Inadequacies of hierarchies
  </h2></div>

  
  <div class='permalink'>
<a name='p14' class='permalink'></a><p>
    If the data types in our system can be naturally arranged in a tower,
    this greatly simplifies the problems of dealing with generic operations
    on different types, as we have seen.  Unfortunately, this is usually
    not the case.  Figure&nbsp;<REF NAME="fig:relations-among-figures"><a class="superscript" id="2.5.2-fig-link-2.26" href="./2.5.2.html#fig_2.26">2.26</a></REF>
    illustrates a more complex arrangement of mixed types, this one showing
    relations among different types of geometric figures.  We see that, in
    general,
    
    
    
    a type may have more than one subtype.  Triangles and quadrilaterals,
    for instance, are both subtypes of polygons.  In addition, a type may
    have more than one supertype.  For example, an isosceles right
    triangle may be regarded either as an isosceles triangle or as a right
    triangle.  This multiple-supertypes issue is particularly thorny,
    since it means that there is no unique way to <QUOTE>raise</QUOTE> a type
    in the hierarchy.  Finding the <QUOTE>correct</QUOTE> supertype in which
    to apply an operation to an object may involve considerable searching
    through the entire type network on the part of a
    
      
      function
    
    such as
    
      
      <kbd>apply_generic</kbd>.
      
    
    Since there generally are multiple subtypes for a type, there is a similar
    problem in coercing a value <QUOTE>down</QUOTE> the type hierarchy.
    Dealing with large numbers of interrelated types while still preserving
    modularity in the design of large systems is very difficult, and is an area
    of much current research.<a class='superscript' id='footnote-link-4' href='#footnote-4'>[4]</a>
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.81" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.81">Exercise 2.81 </a></b> 
  
     
    Louis Reasoner has noticed that
    
      
      <kbd>apply_generic</kbd>
      
    
    may try to coerce the arguments to each other's type even if they
    already have the same type.  Therefore, he reasons, we need to put
    
      
      functions
    
    in the coercion table to <QUOTE>coerce</QUOTE> arguments of each type to
    their own type.  For example, in addition to the
    
      
      
	<kbd>javascript_number_to_complex</kbd>
      
    
    coercion shown above, he would do:
     
     
    <div class='snippet' id='javascript_51_5_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function javascript_number_to_javascript_number(n) {
    return n;
}
function complex_to_complex(n) {
    return n;
}
put_coercion("javascript_number", "javascript_number",
             javascript_number_to_javascript_number);
put_coercion("complex", "complex",
             complex_to_complex);</pre></div></div>

    <OL type="a">
      <LI>
        With Louis's coercion
        
	  
	  functions
	
        installed, what happens if
	
	  
	  <kbd>apply_generic</kbd>
	  
	
        is called with two arguments of type
	
	  
	  <kbd>"javascript_number"</kbd>
	  
	
	or two arguments of
        type
	
	  
	  <kbd>"complex"</kbd>
	  
	
	for an operation that is not found in the table for those types?
	For example, assume that we've defined a generic exponentiation
        operation:
        <div class='snippet' id='javascript_51_6_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function exp(x, y) {
    return apply_generic("exp", list(x, y));
}</pre></div></div>
        and have put a
        
	  
	  function
	
        for exponentiation in the
	
	  
	  JavaScript-number
	
        package but not in any other package:
        <div class='snippet' id='javascript_51_7_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
// following added to JavaScript-number package
put("exp", list("javascript_number", "javascript_number"),
    (x, y) => tag(math_exp(x, y))); // using primitive math_exp</pre></div></div>
        What happens if we call <kbd>exp</kbd> with two
	complex numbers as arguments?
      </LI>
      <LI>
        Is Louis correct that something had to be done about coercion with
	arguments of the same type, or does
	
	  
	  <kbd>apply_generic</kbd>
	  
	
        work correctly as is?
      </LI>
      <LI>
        Modify
	
	  
	  <kbd>apply_generic</kbd>
	  
	
	so that it doesn't try coercion if the two arguments have the
	same type.
      </LI>
    </OL>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_51_1_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_51_1_div"><SOLUTION>
    
    <OL type="a">
    <LI>If Louis puts the coercion functions into the operations table,
    <kbd>apply_generic</kbd> will enter an infinited loop
    </LI>
    <LI>
    Louis's code don't work. <kbd>apply_generic</kbd> works correctly as is.
    But we could modify it to exit with an error before attempting any same-type coercions.
    </LI>
    <LI>
    
    <div class='snippet' id='javascript_51_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAJgHQFY0oFA5KAPYAOApgE4CGALgJaEB2A+tZQEYA2pANKMQK7VQlBgBNQAc1LV8YAGblCAW1ABjABaVi1CqADMoABQBnUqrqN9aPdYCUOOfwbn6DYceOFVhgNakAnrzkZoTkosa2oADeOKBxoMHU-ORutMZMDPwcHIbBqqHh9vHFxQD8oE6ipHK0DKSisSUlAFygpACO-JQ5foGg6qSUooYDQ7khYRG2RU1N5aPDeQURjbPFrZQeXr4BvKy0OUuT0wDcOAC+Dk4ulkqUfizsXIaRMcX5DMZCHF7dj5ykUAAXlAHDS1EMACIAFSsAHQyG2M7FRzOCxuH6EHz8Yg7fxMACMvF6TBQr1WJQ+X1Axn4bDhXGB7k83hJRNA+xyP1UfwZpFOFOKtDkRjSTEq1Vq9RMdL502igtmiWSbglNTqomRs3ObQ4pgVa3ejGpR3EIM2LLxpL2lAOMvpT35SMVTWFovSaqliwmonlb0NTWVKQqYklGq1AZ1pD1gP9AeKQbcnPG+TCzvjoEuayz8RzcVRN1SnwoELZxIC1tAADduvx+QbZlShLSHQCmRbtmWObaub8OP8uAK1m7DGLPRr7XLyRnTNRHnbubzHdwXRm4sRbeRDGCvlb2RvaFuSSheDWOHXpiu12vk4v+1P09rdfq44amwkfe2tqyKyfu3aWynCNDRHMdQ3VaVTT9RUAEg1lnecckA5ccDg681gPLdMKtP8zwvK90OvZNkIBaZnTQuIoxjBtrwQ5NTVPWt+WA7NVzzTMKQLdFQFENIN2oDRDCUaclWkFVQBUIEpNASFMWxYhIVXWZyjknElKaVpJOkyFalMchqEUwjQHKXSS3U2ZWkhcd6iIMgqG4gBaBzuwBSFgPYxMeL4mgNDOS53xICgaFcAdARBO4Hj5F4znfKQhBBQL7JCqLZMILEcURGLjSEAR4tsoL0VCqFTP0zK8AISA3HAQhklUHgJMIakuNcYx+koKtAUoUAagADxszIlDYXRCBFShyAkfglFIBhqGMNBZCMAAVAZuuubidyENIORWxgOH8Noerq7RXD2Qhtq2zxurGtB7AIZbAWaywtGIPamFqcVQ3IPbagkJgACt2s2VRyFobRhGyQgAHdWv4VrqEIBbnr24QGH2iRaA6txHqxpwOTO7oOF1Ugppm1qRu2zrxsm6aZAIDbhHG4xeE2UA3WoAZ9shihAVMDd7MpiaSdmq40VcYRiBe-xDFRZnGZEuJPKR-F3olL7-B+-7AeMYHQYhGWGYkCI-JFwthFEYYet4fx5cViXXqkOoQe8SEhlESFeA2wxLdAa3nUubGaTpL2rZtsTgyVpgHYoWhnZbd3QXBYOfYFf21rFpQsiT62aNtyXI+m6PnYzjh48973feNgPeKrLPQ6ScO7fxKOnahavS8T8uU7wAOaFYDRHgkQxqH8MgB94D4dFJ+WP3rtxsOH0fWAkcfGEn2a-ZN7iF9IAfDFEGhJunzyxWw-ekmE8z5kGYYz8P8zWgoRQt1vpReEhNghm7CQpHEF-QCcjkI8d5LzKqnUWlgJ402MHvA+wkaIz3EifTcMDz4zENOUZML80FrAfuQJ+KDJpvw-uIJeP8eKwP-s5SBpNQHlTAM3GONJoxmHhuQVa4DPjdVCGoZQL1SA9VAANIa5BjDdzTpYYIfw+YQgAF513EhHBhztJH9mke3XcciN4B1oHcX60jDByJzmHNwiiC4tx0ropgaiPaJ00ZXcRbhdEMFoEkKoBj5ENzzkoqETiXH8CqOo2RXce4MAkM8QxcZc72zMTHKEIgwmkECe4rRDiaSdDGqQL2R9jGgAEdCXJxtN5i10qwbITA8isFCVkMaVjKCqB8JQKQLx4EBxUbU-S7jogIODAsdxJwOIolSToxp7SgldM8smOR-T2IBwijvBQyhymDH7MMwendxk5Owp3aZnFUm+NcZkiJq5PJ3HZkwYw7QOkXK6MEcYUixpBMiAAanMvBdJtzVmjOSY+SiuyOEowSZ018CYcmnPUEwGgIhRyWP0XIoIyyvl2IpDMvZ9x5mKCUEwSx8TcjM2niC2efBkFsPyWCpg+RoGUFsEEUApKaDguMLUQwVKfkDPiAQWoOhyByDqYCeGFMPzUnJuzHm-gvjEz+abJeWT4EEoUdQPu4LpWQgqfE6p5B449VZexXKUI2nWITruFVLC1UcDGoieF9z9Kst1RYkZBrPbGvMKa811LWYwoeTawQPjGnOIOUkp1lSJpmo1W6-Z-jmIUltfErgAbVVVJDRagFg5gK2rmUwBZmK2mrPjoGl1GqCJNFrsCAAfF-ISaKM0YqWX8VZtchzxDTZWzNWKRnxNzfG4N5rC0lFxcISIQIy3SvTS27FoS+0stZZ5SEohGCJONiUgmSznUJpqRuepjTMnOiKZYRdZTiCEBDbUjdTTp4cpmhQBg3R2GFlEYM-54a3ERO6W4XpUy2X5lSTGw5rwX3-hyO+lFD7m3VrHYPcgeKNmEuwhB-tOz72m31Q8oFLoTm+r8U+yIdKzkUuZaE8JDbfkIe4p82F+KFagvQwczp2GGVMu-ck9ykruIjurdm3RxbgUUeg8gslFyrnvMyVq0ATy0k3Myb7Ht6EyWQoYIYPoWrtV4GKOerlPK6p4wFcEIVIoRU0jFToJQzGxbSuE1EP9vc6lKsaVCA9ibeBavg4271xqrUGRsUauzrrLWqM9amlzpGHkBq86G3ggXrX+YhJCR9iSPNRZC0mmLXqovfuC4e7zybI3FCbQ8Ft7HGm5oS1J+IxbB3ltY4s-LayQ6Eb4C5irmKwOFfSwW1cE6B1Dpsw11tv0cWwcncBads66huQuDgPdqiWvHoaaes4O6ixfCXfkJQfCerTc3c018HKVuhB0OIbGrVM0fhXV2thIhxAhaJSe0gd74izJA5VhFdb1lce4+JOKPrctsae7ojtJrV2htrkx4j6cHuNbbeO-r5G3vBg+9FsHPWIWhOa4m2w7WmMUlU5e69B3jNPXNuS3hXAeoGPZDIsksr4hoa+492tHGkMdJkQSZ5ryjKBgRbCskxW2fxnC7I5nInWc8-iHzgxZIlMg8sC2QnK3iek94OT6Hf7utVbub5xnAuHJC+Fx+NzYvqXa+F6LpnkQtc6+vMb8XwO7t7KyDL1b8vQCK8pzDxxCOwMVokH6iNpOsOG6MjF-X3PzfFAYybwXIeAxh6t6hIDptq727l0zhXFPXvK-dxDwegfw-AH94RbPXO8-oTD5rov15o8ChgpcTHYBOUUHU3ys62mhDCpWsYAzErJdJhs0ctYisFVWd3pCZbq345TORVGlzrsA0j+J7m2f-CLVteT07inZXpWu0T-wx3ivau2rjnFqEC+erz6J4vg3awd9r864PaXx+r9kUiz4rIM+z8n7fsfpfl+V-O-X11u39+P+4uyWrcGMr+sui+H+b+X+swD+pa5aCegBZOwBT+8ONOWaP2BWUBEB7+bW6yf+WeCOqunce+9WGevWyO2Bo+we7W8Bw65BSO4GeKtWQ2c6o2lwE2W+a266M2W6c292Dwx+VatOKyHGnckSOScOKumBEgp+OBiIQOY2AhO8Qho6me7WEhhKUhDB7aVBc+aOUOhSBA+QFAqgYstIEsu2eAXAQgJh5AZhjATA9MIImQ2Q-BqSqgXANSdhDhzAns08PhIUzhgiWQHAhSAcuUhOphrgQ8QC7I28f4LixM08oEHo4EXohgcUUR9hMR288RQCwBLuPC0RjhwR2EnseRewBRYWhmF+keRoJRfh4I2qz4sYxyOSgRpR4ITG1eAcWRnRcmlRgCZAqeeObgWReR244Ib0tRRRnkvSG0MxyR1un6-yExBRUxXwSxcCae8x18Q8PYmxc4SRwkEuNuax0g2xRx2xSuexYwyYt40xJxj+E+XekglxAxSxW4JxEQRRqRGQoRo4hmUwRRcqwY1kmobErRoJ8Q748MxATIvSPxrKfeOSHQXQOQQx6xZABIQ8JA8oAAZASahPGOid0LESMbwNiaQCgHicQNMP7uUFkScXSfYBRBpO8XOJ8UkVuMmMiSibmK8VTpIR8YQI0V8YYJ8RtBvPNuLF4jEt4CQLLIbAEdlMMcAo0q1OFFoBSRqcvAbEbBSO+KiEyB9kqeqQPIaUKCKIYAAISsxpFVAQTDCojQSomEpKzSxOC8B3C4jUKzTKlTDuTQlp4jhcChLszMpyzAjSSjEZhwlxGIn7HbyWkClNAJkjFJn3GHEplLxBmvLviUAEhZnDBjQqksSNhqmUAoAlkHF2hln5nxlqnUAEgsCEAsA1kgj9Fik5GMC6n5EjFpmUjNkoBtksDFldmimNG6l-h5FDlglJiJlSQggJFF7lCPyhBHGGDmm5mal1H1ElCQgMBnRTTsyED7bcIir6jbzGCIhF6tD2lgROkZEtljnUBkhrlynRKOyxJKkVGtnwwdnMrM7Mzi73mgCPmOlhjSjvlvnM6fmmI-mKnECH5Fl7CjmAUtnMrAHgUblbiew7lAKpnB485HknnSDqDnlcJsJXl8pAK3lDlUQvivKeR4VbmEWLx7kkWERkUSQUVUVyCXkDDXn0VlSsTFCXC9FDKfClL9gAw1jawgzaAAmDQUDranotKpKma3E5KWb9zKryVAxKVzhCIUCapnHrhT7mwBqGWKW6wqXCK5q2U6zKWmWhZ4Ehx0E2YCKiYVyT5RYH6GpRbOXGUOVmVvwhX2VuUwFFr4E35ez-zJwgHRYv6H6QiRWuWTSOURVawuUmVZVmX7m9pxXlp5JJWoFtxpUZX5WqUFoyTVVhXuWX4lWmagBgB+XZYub8IKRVW5WhXRU5UKV5WNUxVGAtVdb0pMDdX1rJVzJOV9VRUFWtZrACIEFZJTo5IzpsELoyVLoNVuXqV8FiLAYPD7VLWGAMDZJaHSCfaxb1ULWZW1UKGXXhGpJnW1VjnvXCIXVXXiQMD2L-JCGAX36XXwKeT-VjaREDFQhfXhX3VDX9VLXuys6w3kCfUPU1XCLOhQ09m+FH7QF6GQGs5A3tnH7OgBzTUvYUhRJNwKlQjdVJIkGFLviqBMjpqo2GAAAszo74ZoEklaHNZIZw01qgvAvoJwQAA')">function apply_generic(op, args) {
    const type_tags = map(type_tag, args);
    const fun = get(op, type_tags);
    if (! is_undefined(fun)) {
        return apply(fun, map(contents, args));
    } else {
        if (length(args) === 2) {
            const type1 = head(type_tags);
            const type2 = head(tail(type_tags));
            const a1 = head(args);
            const a2 = head(tail(args));
            const t1_to_t2 = get_coercion(type1, type2);
            const t2_to_t1 = get_coercion(type2, type1);
            return type1 === type2
                   ? error(list(op, type_tags),
                                "no method for these types")
                   : ! is_undefined(t1_to_t2)
                   ? apply_generic(op,list(t1_to_t2(a1), a2))
                   : ! is_undefined(t2_to_t1)
                   ? apply_generic(op, list(a1, t2_to_t1(a2)))
                   : error(list(op, type_tags),
                           "no method for these types");
        } else {
            return error(list(op, type_tags),
                         "no method for these types");
        }
    }
}
</pre></div></div>
    </LI>
    </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.82" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.82">Exercise 2.82 </a></b> 
  
     
    Show how to generalize
    
      
      <kbd>apply_generic</kbd>
      
    
    to handle coercion in the general case of multiple arguments.  One
    strategy is to attempt to coerce all the arguments to the type of the
    first argument, then to the type of the second argument, and so on.
    Give an example of a situation where this strategy (and likewise the
    two-argument version given above) is not sufficiently general.
    (Hint: Consider the case where there are some suitable mixed-type
    operations present in the table that will not be tried.)
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_51_2_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_51_2_div"><SOLUTION>
    
      
      <div class='snippet' id='javascript_51_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAJgHQFY0oFA5KAPYAOApgE4CGALgJaEB2A+tZQEYA2pANKMQK7VQlBgBNQAc1LV8YAGblCAW1ABjABaVi1CqADMoABQBnUqrqN9aPdYCUOOfwbn6DYceOFVhgNakAnrzkZoTkosa2oADeOKBxoMHU-ORutMZMDPwcHIbBqqHh9vHFxQD8oE6ipHK0DKSisSUlAFygpACO-JQ5foGg6qSUooYDQ7khYRG2RU1N5aPDeQURjbPFrZQeXr4BvKy0OUuT0wDcOAC+Dk4ulkqUfizsXIaRMcX5DMZCHF7dj5ykUAAXlAHDS1EMACIAFSsAHQyG2M7FRzOCxuH6EHz8Yg7fxMACMvF6TBQr1WJQ+X1Axn4bDhXGB7k83hJRNA+xyP1UfwZpFOFOKtDkRjSTEq1Vq9RMdL502igtmiWSbglNTqomRs3ObQ4pgVa3ejGpR3EIM2LLxpL2lAOMvpT35SMVTWFovSaqliwmonlb0NTWVKQqYklGq1AZ1pD1gP9AeKQbcnPG+TCzvjoEuayz8RzcVRN1SnwoELZxIC1tAADduvx+QbZlShLSHQCmRbtmWObaub8OP8uAK1m7DGLPRr7XLyRnTNRHnbubzHdwXRm4sRbeRDGCvlb2RvaFuSSheDWOHXpiu12vk4v+1P09rdfq44amwkfe2tqyKyfu3aWynCNDRHMdQ3VaVTT9RUAEg1lnecckA5ccDg681gPLdMKtP8zwvK90OvZNkIBaZnTQuIoxjBtrwQ5NTVPWt+WA7NVzzTMKQLdFQFENIN2oDRDCUaclWkFVQBUIEpNASFMWxYhIVXWZyjknElKaVpJOkyFalMchqEUwjQHKXSS3U2ZWkhcd6iIMgqG4gBaBzuwBSFgPYxMeL4mgNDOS53xICgaFcAdARBO4Hj5F4znfKQhBBQL7JCqLZMILEcURGLjSEAR4tsoL0VCqFTP0zK8AISA3HAQhklUHgJMIakuNcYx+koKtAUoUAagADxszIlDYXRCBFShyAkfglFIBhqGMNBZCMAAVAZuuubidyENIORWxgOH8Noerq7RXD2Qhtq2zxurGtB7AIZbAWaywtGIPamFqcVQ3IPbagkJgACt2s2VRyFobRhGyQgAHdWv4VrqEIBbnr24QGH2iRaA6txHqxpwOTO7oOF1Ugppm1qRu2zrxsm6aZAIDbhHG4xeE2UA3WoAZ9shihAVMDd7MpiaSdmq40VcYRiBe-xDFRZnGZEuJPKR-F3olL7-B+-7AeMYHQYhGWGYkCI-JFwthFEYYet4fx5cViXXqkOoQe8SEhlESFeA2wxLdAa3nUubGaTpL2rZtsTgyVpgHYoWhnZbd3QXBYOfYFf21rFpQsiT62aNtyXI+m6PnYzjh48973feNgPeKrLPQ6ScO7fxKOnahavS8T8uU7wAOaFYDRHgkQxqH8MgB94D4dFJ+WP3rtxsOH0fWAkcfGEn2a-ZN7iF9IAfDFEGhJunzyxWw-ekmE8z5kGYYz8P8zWgoRQt1vpReEhNghm7CQpHEF-QCcjkI8d5LzKqnUWlgJ402MHvA+wkaIz3EifTcMDz4zENOUZML80FrAfuQJ+KDJpvw-uIJeP8eKwP-s5SBpNQHdzTpYXSrBsiaxrNrEG2gMiTSGuQJgG5VA+EoFIF48CA5Ly9tPBMYc3C90oP3MRkIAasJ1hwga3D449UfJRCkuUoSu3bruBRWtlFzlURQeOhilHsJMVwsxtgCJNFrsCAAfF-L2oAADUydNF8EEFCOOHtE4WKBlYzhg0zFv0UcE3WoS1F2NXI4oELixE9X-l44COjITF30RCIJbDommPIOYyJeSVE2MKXEtYCSkmCLcdCNJ2jfGQjbgEgxxTjExPCTJNpISCmInsSUKpriUlgArg0nJEVSBFKMT0sp7tVwpMSUMoc8RPJNMYJM42jCCYsKiaUsJPC+ECKEc6Te6d7g726fksphgGBHykZIaQUIJlTMsVc-ZiIbkbwWs3GONJoxmHhuQVa4DPjdVCGoZQL1SApIKcYOhIKPx-D5hCAAXnXcSEcfnO2CEisaBkWmoq7gHWgdxfrIsMGinO9zMUFxbjpUlvC8XZIpUS+hbhSUMFoEkKoLKqWz3FnnLFTzBGcu5ZMglLKN49wYBIZ4lK4y53trSmOuiZVcGZWiqVbKaSdDGqQcR8DPIpLqT1Y2pyGGfCYf2PIrAZVZDGoy-hgj9XTwDji-s5L5UIODAsFlJwOIom1SSwRjL9K8qiN6pMPY-UBviAHCZTAFDKCYO6t6pLHERs8thTu-r2LxpFVy-gPL5Wrk8ncdmTBjDtDDVWrowRxi4rDZqjx5l4K6vrcGsleLJXeLzdqkQsr9UlrWGWmg6gmA0BEKOBlnq7GIo9d2zV7lOLaoTUmpQTAGUDtyMzCRKz7nYSBXU8t478jQMoHOo9Ekx2VtqIYC9vaKQEFqDocgchZGAnhhTD81Jybsx5v4L4xMV0IuSXuhW1LqB93HfIm1A77WFN4Bo5dxQMmpuRcyyEcG7UcDGn0+dobqDeIyZ2wjmHsMTVw+U3gpHkXEcaRywtVRyMAvg1R-DjGxX0ZyQO9VEqsOsZw3hudvHmJjOFQ8ddKbBj9k7eYijCG5mVM7s41xa7FAbtTZ22uyz1wMfOYmjTm6Q0Dvk4JyjeH+nFB3cISIiyxHqeTVumVNmH3eNWaIdZbkLg4C2cwhTVHHVHJdWcc1RYvjbOIIQQLhznXCNfM+maFAGDdGBYWOFgaEWcaLUO14kb+jXxjX2hFonw35eTGi3NIHTaOY3c5we5Bd3RHy4e3dVXMum3Q4u8Do6JCipy7y49N6z33rVblx9HXuK0e6-A-d-LsvFsiENitxg72laXRSYrNWDNSa0+mlTr45viWwieyt1aIS1r1Qazxl362+ys9eU7k6GCGD6Box9T6wAvooO+uqeNv3BF-SKf9NJAM6CUNVreNSNHNcVlB2RMGamQii+xpDSJY16ZyV10q-GUfCaCDJwj3HiozqZbj6L+PWak-0sTzJBaxWYbx9R69fWmNidQ400TjOKfM9E7T2r0m-hybfkzpTsxBkOZ20Zvb0OQ66Z8eMqXTmTMyvMaLh7cRXN2eqYPAX9Wtfy4815zZlrIs86C3Fk5xLTfMPyEoKFPULfHPgc++3oQdDiGxq1ddH5zBsbGijcQTO+CyOCxluNq6leacJ9pg7pb7lxQkzvXbMfSVmb90J8ptcUMR6y1H4zv1t2Nds7No7wZE908k0Z+rauecfOLxe5dn3WZJZSKlr3kOxauyYHbh3FL2QorJKXiD8388y4a4Tz1BJIjuNbUZQMk-F1kg1-PgM02m3T5bavwi6-UVkgm7n02LYe+Qq4D1fvvBB-gfywL8fDaF0b8iA5Of2+IONr3xU1-a5d-96fy-1-P+V+B++Yq6WQJ+9uZ+F+oAV+w+N++e+uC2Q6m+0I-+8+iBFKy+qBRk62m+s+X+8Y62++ZwMEW23E1c4BfeKKA+Q+h2Ze7K8BKuuu9OA2VBkQwAWBhE6BV+K++BcQOBf+vBhohBAoJBeAxQiWr6v2n6Z0gOQgf6K0xgYOwGk2YsYiw6ok-KMiciSOveZ+8clWm24mLs5smGuh0K5iZhPUfS8SVBl+Q+9mNS3elhUBQBtO-iCcBilhFhp+5hn+Dith0B9hOu9oFBkBARrh6SDGWQphPhVhb8XhfhAy4RQRamYBzhyRZEkROSzSHhOSXh8RsR1hlSGRqmYi5B6R1BmRRht+qegi3hEB5hK+EuNSNRQu+2cu-ODBhequBRDRcR8SDe2uamXRE6Lmgxhu9yaydQ3mlwfm-YlhTuIW8K22DwCxKebRsuycCqCejyleye0utREg9RDuHyOaPm+aqxsRhmyu3RDWu62x-KFeeujBxxehtgWuZqBA+QFAqgYstIEs7ueAXAQg3x5AvxjATA9MIImQ2QoWAcqgXADqoJ4JzAns08yJIUUJoAMJHAZqAcuUJ+PxrgQ8QC7I28f4XKxM08oEHo4EXohgcUhJYJxJ28ZJQC++1+GJEJWJ2EnsrJew7JNG4OiRghXJqJ4Ivaz4sY8e-KYpkJ4Iy6lwYWDyc4YpJJZAbJZANBnelgjJrJ244Ib0wpsBnkvqG0RpVJOeIBCKep7JBpXwFpcCtBI+4kvqt4hplJwkwBaW3EjJnp9pc4np1+pphWyY7pDpQZ8upBYsjJcplJW4npEQsBNJnC2Qo44OUwsBki-K1kmobEUpWZ8Q748MxATIvqiZ3iI69yHQXQOQ-JKpLApJQ8JA8oAAZK2ahPGDWd0OqaQH+LaVqc2cQNMFgeUH6eDkOfYBRBpA2XGa+kPNGhWZWbmIYdmeJLGYQESRCfGYYHKRtF8vCSIEyXVCwIQL2QPEzN2ONNII2WQCJIrKoKoJNPajoIYOeUvATrSBwERs4hwSUIDlkEIO2aAH+dZtvAPMCNJKwNeXONvKAAAD7wWgXFAACErMtJVQEEwwG5W5L24FH5V5A5ToPB8Y1A5AdYJFAY+FgiRsPmyp6oogx59Qt5+q1Fhs959yYoOJ75NF2CJQ5QuZSkrQPIzAyJwCZ5bFl5bpQCF5I58YV8YwklfFM5DFTFjF28C5doSlB52qYlE6aZY0hsNoMFLFHFo+uIhlpRMlYihldmUFhlN528oF5QhloFrQOFzJjAPFg8tlxlRF7xvlc+hltFSpPcjc+cjsKqJAss7F8CxZ1lNFTIdwuIbFMVtFRolqwKTIie0VgCi8vFwEI4aFYEmF9JqI0EVZmhjc0sTgvAyVu5q8UCaVUZBZzpEKmV0FRFTIqlYl6lQC3l6VswRV6FH0pVE4nVjlQCFVhoiqTcyq3guVelBM96jMflk1d5y5lErVrankj8oQAZhguVSllF14kIDAZ0U07MhAnu4K-6+o28xgZUrExQlwoV2qlyey3Cp5oR0KnyfK4kCaaxBxGxg81Cs0nyvAAADF8gSWqbku0r0r0ScSdaAB9dYvst9ZYSchknovxvkTJPjZCAkQRFnJfkMVoYjoPETYUXVQZkDcmnfhSNjhCDDp4sza9jPgRrOv0j-qzVTiGuStnJ4oAWRFbv2ubCwOoMEPquXGTYatSuFUKsYW7BKrLdAV3DgO+KoElXTVcesbJumgACy8B6DOjvhuDhQGZo0dJbgADszo3e7M0tu548vAtyZwBAjtUtpA+qqgbtbtSIQAA')">function can_coerce_to(type_tags, target_type) {
  return accumulate((type_tag, result) =>
                       result && 
                       (type_tag === target_type ||
                        ! is_undefined(get_coercion(type_tag, target_type)),
                    true,
                    type_tags);
}

function find_coerced_type(type_tags) {
  return is_null(type_tags)
         ? undefined
         : can_coerce_to(type_tags, head(type_tags))
           ? head(type_tags)
           : find_coerced_type(tail(type_tags));
}

function coerce_all(args, target_type) {
  return map(arg => type_tag(arg) === target_type
                    ? arg
                    : get_coercion(type_tag(arg), target_type)(arg),
             args);
}

function apply_generic(op, args) {
    const type_tags = map(type_tag, args);
    const fun = get(op, type_tags);
    if (! is_undefined(fun)) {
        return apply(fun, map(contents, args));
    } else {
        const target_type = find_coerced_type(type_tags);
        if (! is_undefined(target_type)) {
          return apply_generic(op, coerce_all(args, target_type));
        } else {
            return error(list(op, type_tags),
                         "no method for these types");
        }
    }
}
</pre></div></div>
    A situation where this approach is not sufficient is if you have three
    types, A, B, C where A can be coerced to B and C can be coerced to B, and
    there is a registered operation for (A, B, B). Evaluating the operation for
    (A, B, C) will only try (A, B, C) and (B, B, B) while you can just coerce C
    to B and use the registered operation for (A, B, B)
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.83" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.83">Exercise 2.83 </a></b> 
  
    
    Suppose you are designing a generic arithmetic system for dealing with
    the tower of types shown in figure&nbsp;<REF NAME="fig:tower"><a class="superscript" id="2.5.2-fig-link-2.25" href="./2.5.2.html#fig_2.25">2.25</a></REF>:
    integer, rational, real, complex.  For
    each type (except complex), design a
    
      
      function
    
    that raises objects of that type one level in the tower.  Show how to
    install a generic <kbd>raise</kbd> operation that will
    work for each type (except complex).
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_51_3_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_51_3_div"><SOLUTION>
    
      
      
      <div class='snippet' id='javascript_51_10_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAJgHQFY0oFA5KAPYAOApgE4CGALgJaEB2A+tZQEYA2pANKMQK7VQlBgBNQAc1LV8YAGblCAW1ABjABaVi1CqADMoABQBnUqrqN9aPdYCUOOfwbn6DYceOFVhgNakAnrzkZoTkosa2oADeOKBxoMHU-ORutMZMDPwcHIbBqqHh9vHFxQD8oE6ipHK0DKSisSUlAFygpACO-JQ5foGg6qSUooYDQ7khYRG2RU1N5aPDeQURjbPFrZQeXr4BvKy0OUuT0wDcOAC+Dk4ulkqUfizsXIaRMcX5DMZCHF7dj5ykUAAXlAHDS1EMACIAFSsAHQyG2M7FRzOCxuH6EHz8Yg7fxMACMvF6TBQr1WJQ+X1Axn4bDhXGB7k83hJRNA+xyP1UfwZpFOFOKtDkRjSTEq1Vq9RMdL502igtmiWSbglNTqomRs3ObQ4pgVa3ejGpR3EIM2LLxpL2lAOMvpT35SMVTWFovSaqliwmonlb0NTWVKQqYklGq1AZ1pD1gP9AeKQbcnPG+TCzvjoEuayz8RzcVRN1SnwoELZxIC1tAADduvx+QbZlShLSHQCmRbtmWObaub8OP8uAK1m7DGLPRr7XLyRnTNRHnbubzHdwXRm4sRbeRDGCvlb2RvaFuSSheDWOHXpiu12vk4v+1P09rdfq44amwkfe2tqyKyfu3aWynCNDRHMdQ3VaVTT9RUAEg1lnecckA5ccDg681gPLdMKtP8zwvK90OvZNkIBaZnTQuIoxjBtrwQ5NTVPWt+WA7NVzzTMKQLdFQFENIN2oDRDCUaclWkFVQBUIEpNASFMWxYhIVXWZyjknElKaVpJOkyFalMchqEUwjQHKXSS3U2ZWkhcd6iIMgqG4gBaBzuwBSFgPYxMeL4mgNDOS53xICgaFcAdARBO4Hj5F4znfKQhBBQL7JCqLZMILEcURGLjSEAR4tsoL0VCqFTP0zK8AISA3HAQhklUHgJMIakuNcYx+koKtAUoUAagADxszIlDYXRCBFShyAkfglFIBhqGMNBZCMAAVAZuuubidyENIORWxgOH8Noerq7RXD2Qhtq2zxurGtB7AIZbAWaywtGIPamFqcVQ3IPbagkJgACt2s2VRyFobRhGyQgAHdWv4VrqEIBbnr24QGH2iRaA6txHqxpwOTO7oOF1Ugppm1qRu2zrxsm6aZAIDbhHG4xeE2UA3WoAZ9shihAVMDd7MpiaSdmq40VcYRiBe-xDFRZnGZEuJPKR-F3olL7-B+-7AeMYHQYhGWGYkCI-JFwthFEYYet4fx5cViXXqkOoQe8SEhlESFeA2wxLdAa3nUubGaTpL2rZtsTgyVpgHYoWhnZbd3QXBYOfYFf21rFpQsiT62aNtyXI+m6PnYzjh48973feNgPeKrLPQ6ScO7fxKOnahavS8T8uU7wAOaFYDRHgkQxqH8MgB94D4dFJ+WP3rtxsOH0fWAkcfGEn2a-ZN7iF9IAfDFEGhJunzyxWw-ekmE8z5kGYYz8P8zWgoRQt1vpReEhNghm7CQpHEF-QCcjkI8d5LzKqnUWlgJ402MHvA+wkaIz3EifTcMDz4zENOUZML80FrAfuQJ+KDJpvw-uIJeP8eKwP-s5SBpNQHdzTpYXSrBsiaxrNrEG2gMiTSGuQJgG5VA+EoFIF48CA5Ly9tPBMYc3C90oP3MRkIAasJ1hwga3D449UfJRCkuUoSu3bruBRWtlFzlURQeOhilHsJMVwsxtgCJNFrsCAAfF-L2oAADUydNF8EEFCOOHtE4WKBlYzhg0zFv0UcE3WoS1F2NXI4oELixE9X-l44COjITF30RCIJbDommPIOYyJeSVE2MKXEtYCSkmCLcdCNJ2jfGQjbgEgxxTjExPCTJNpISCmInsSUKpriUlgArg0nJEVSBFKMT0sp7tVwpMSUMoc8RPJNMYJM42jCCYsKiaUsJPC+ECKEc6Te6d7g726fksphgGBHykZIaQUIJlTMsVc-ZiIbkb1OZYCQqhhiUF4GwO5s9QBsGBNJAADMZYQoBWi-OGGwZmoAACkoKvkBy2cwpKjA-iHMEaQYRr4CC1B0Ckboq1wGfE4vQtwA0KDiPgZIkFCxxHuWpZSni01lAMtfEy8SyYNFspRDSiS5ymD2RubwX0jL4hcCEBIJk8LJU8W8Xy4M2E3BgGXjxUAWrvHsR7ubcVNBHG8pWfciZxqIR0q3Bo0AdSqgMG5dndx5k1w2sMNnB1XKlDiP6UZeIjruV2u9U631ozigGpFS2K1prVyeUtRKj1IbOVhs9ZEBybqMweq9am4NFSA0lCDb6lNxb036vZabYusbO4yoVhasVSbqa2siHUnNBbC2Bp9Qy0NzrllaOFRy6uNaQ51oQcGRNJrk2trzeGjtnbZ09tAO2itxRiUzQoHIWRgJ4YfmpOTdmPN-BfGJpWreNS7VmvrSCmRciamQmxQwbo6jV3xAyXolpOTH3Prft+ku87iiDLEa7EdXjvEZP8QnAxf7zEwYA-EIDNSY0Ss7v2nx4ysjZKhDB39wUcX-v9Qh2tiyxHVpQyHNDGTmlQa-Xhp9JdcPomffBuIiHB7DvI2B9JjTnmMdcD++JDApWRBIzUyd1rhNd0xf2P9vDZFHIJScgO4n+M5CEyq+Bnk4pPPObBujzHlW+mNgtZuMcaTRjMPDcgFLCytTkKENQygXqkBSQU4wdCOXBFxWNCEAAvOu4kI6medl5-sfMDKfsMP5jeGK7i-XC1FgLDc87BeKnFuTpVIvRcriKuLDBaBJCqIlnO9ygsFxbpkwR+XCuTKy13HuDAJDPH8yVm9jd86OxjroxrXAsPZYuN8twxhOhjQJZeiknkUl1J6sZjFnwmEycsyICaHAxpyf4fiwlZ6xahYy3514463Asv8ycDig7Ta0HSwllrURDv-hyCds78RlNioUMocVgx+yXYvaO27nlsKd1O1GjleWCv8CKzd+NDb2ZMGG-pEwI3gjjG8-D6LHis1NGG10JH334s+cS2h4HptlvNYkeakFdwYc0BEKOK7+P-NBE+3tgnQrnu5de4oJQTB0vLdyMzMn17xLYWs3Uyn6gmD5GgZQOxCR7Wiph8YWohhpevriOu0lW66p4wpnuoQB6VrGGPToJQ23LDJIF3d294v5F5FYI1rIY0X2s-XI03b4WsMPqW-b1b5TGco+oOBxpuO9se9t8th3vvWZ0-0oH8ZVWwdVFD17lbjuZeg5q7H7rTXas0ew8niPfSUbZ8z5Vh4b2ue7dx7B-PPu5mVOI9Uwelry8fb+Lj2ulGeMc-ezzxr1fzDh9r4R1j5B+fONcc3zn3PBFMF56P4QZFgKrNEOstyA3pMfYH97tbeLjlnEG6zeb2ziCEB9+thTW211gBJRQejNn0TufO9xdP4OCU3bu8dpET38wipJ2-g7nkyYj2ROz+3eXOveg88+0u0Qd2wu-OQOpubgbu9OAuCa8eNWxWouNA4ukuyuPW-+qu9+Yswe12qBDaEg1Wr+mB8u4uiuDAeB2eLOFIIBZyZeU+lecWcaokIK2EYusO7Q8OWOo2DKniQhSOvsw+GYfB1O9BfQGiFaFI6um6262uh6uuRAIoahhuJ6JuT+Ys5uMBis1Afc1u96J+Q+oAgq3+6Gee-uHu5hqefuYWPmJeJBPm9hp+jhUeM+4WJeL+iekWkIDhke-hzEYyWevWgRwRhef+fhYBreX2cW5i0RkhbGQk8RHBP2XG4RpeO8LeEByRnhhSqRUBImje6RbBPeM+c+-OaGy+q+myR+zCwR5+m2SmIqG++QSgzmPUrRxy8CxK3RoQOg4g2MdmnOH4W+Ke1mIg4gwRfA8m+Kj+bOIOGRTO7etaV6d22muRTALemREg-edu0xHygOzBiBoqlR4B1RjWfOC+Y6Wmjyux+RNxhxb80Rtgdx0ubKih1+G6ZKhMYxFxIGXRPRUW7IvmZIDxDaVxCRb0nByBqOBIkQrqC614iJfmZIkhaJJQbhSJKJGOC6eJmJhOFxMaoJXAPU4JvAkJFuaBsJBxyOzh+J-8hJnaGJUWWJbJhaxJ4JGa3JAavJtJhBymWQEuTmlJ1JoAtJ0JFO8REB6RFBCeb+yJ9qAp6EoRnJLGOJ8Qf+fJ6OOphoepwpZwMELBlgw6FJLmUpMpWx9JeRU+CpmpvmqpwA6p14zpXJhpawxpqpma3pswxpZI5Elwvxh+GuKhu6wQ+6mhBuRup6ehZuNSkOawRhJhu8kIVpPU8cJ25xxQ765sHuWZ5ixZ2pNpUJomg8IJEp1pLpNJwZJekGnsmZNZ2Zb8pZqRdZ0pFZ5R5JrZ5Zi+ORWSgRxZ7ZrZfS8SXZMplZQkYpWZA5neOS1GzZo5MkHZk5EJPZrilp-ZU5DZ3GceDJ6xSRY53RlJdeswaRk+72jJqGcRsJBRp5PRF5DipR4+pG8prxXxg5aqbgaydQa+lwnRrZfRim++L2DwWZex7Bx5WR1scYjxh5DpN5sFbxa545nxZxYCVaYqUFLxv0NRC+CF9yOx151xBFfeT555nxpRxmBA+QFAqgYstIEswxeAcqjmjFIU9MIImQ2Q4FIqqgXAa2DF5ATFjATAns08ol4lzAPFy6WQHAs2IquU4pXFjAQ8QC7I28f4BWxM08oEHo4EXohgcUalYlrgmlZA2lQCDZY6Ml3F4ITI2Ens28NlZAulxu2pC6DlElG0+qz4sYUOIKvlcl4IbKoZAcZloVVlpA7lpAUJr4UV0gLAWl244Ib0Xlsp4kLKG0mV+lzuRBPyKVOl6VXw+VcCdp9yLKt4GVelwkIpIqZl9VZVc49VdJ1V18Q8PY3VC4dVXlpJiZbg0VhA6lzAelW49VEQY6hlnC2Qo4xuUwY6v5IYVQEEmobEgVy18Q748MxATILKU1qq3B4kHQXQOQblvAZlblQ8JA8oAAZPdahPGGdd0LFX+NdbZbdcQNMNyeUM1cbt9fYBRBpA8nOKFflVuMmEdcdQOrmBNiRSlRDRNYYBDf5cpRymVp1t4CQLLIbNJdlIAovIIq1OFFoLFWPAbEbBSO+KiIqo8rjUTcAiTd4iOAAISsxGVrUmWojQSpmlaNzSxOC8B3C4jUKzR41TDuRbVbEjhcCNbszK5yzgogiJVuq7VaUHVdXbwDzU0Zga0eVa1jDJg61LxS3q2E2UAEhG3-JywsSNiW0oA229U5BjT42w2UiE3UAEgsCEAsBO0ggjVjWxXxVkj21NC7UoC+0sDW2B1I2jUWUaU6V7BaUe0rUc1gTc0Tje3R3UBkjqnlBY2FyGC42uU+3wz+3K7InMzBnqmtAZ1c1hjSh5253IkF3iwpblZdaM2exW17BR0V3e3K4Nl11tB4KhCtUl3EAp3E343YkBqQhOoSTSDqCECjEOaHr6jbzGBlTZgy1uqeSPwT2eyM2m0s3z3oSL1nRTTsxr3dQb0DBb1AI70e3sSXCRUipUBpBjYiS5z2xd0ha2imBYbyF0VgCuza4IDTK6wOQFILEbZSA4AZJf3AOBGXJ7KxL9ILIuIqb4ZJzInOggAEAQNRn6aEy76kALTINAM57NlwYrgEDFDYOXE7yhZ7wYy8DTpSrdryGENgDUPf2h5kMTmMPxDMOWp4UwVt6cHewQoChEPgPmza6hbwMKZUOu40NJ7MYMNgBMPj4SMgX7GoVJxyMnLvhdRk0PDoPWL7KGBh04DvhgqWOsNkN2O8B6DOgoMErfELReOGBAonBAA')">function raise(x) {
  return apply_generic("raise", list(x));
}

// add to Javascript-number package
put("raise", list("javascript_number"),
    x => make_rational(x, 1));
//// add to rational package
// put("raise", list("rational"),
//     x => make_real(div, numer(x), denom(x)));
// put("raise", list("rational"),
//     x => make_complex_from_real_imag(x, 0));
//// add to real package
// put("raise", list("real"),
//     x => make_complex_from_real_imag(x, 0));
</pre></div></div>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.84" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.84">Exercise 2.84 </a></b> 
  
     
    Using the <kbd>raise</kbd> operation of
    exercise&nbsp;<REF NAME="ex:raise"><a class="superscript" id="2.5.2-ex-link-2.83" href="./2.5.2.html#ex_2.83">2.83</a></REF>, modify the
    
      
      <kbd>apply_generic</kbd>
      
    
    
      
      function
    
    so that it coerces its arguments to have the same type by the method of
    successive raising, as discussed in this section.  You will need to devise
    a way to test which of two types is higher in the tower.  Do this in a
    manner that is <QUOTE>compatible</QUOTE> with the rest of the system and
    will not lead to problems in adding new levels to the tower.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_51_4_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_51_4_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.85" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.85">Exercise 2.85 </a></b> 
  
     
    
    This section mentioned a method for <QUOTE>simplifying</QUOTE> a data object
    by lowering it in the tower of types as far as possible.  Design a
    
      
      function
    
    <kbd>drop</kbd> that accomplishes this for the tower
    described in exercise&nbsp;<REF NAME="ex:raise"><a class="superscript" id="2.5.2-ex-link-2.83" href="./2.5.2.html#ex_2.83">2.83</a></REF>.  The key is to decide,
    in some general way, whether an object can be lowered.  For example, the
    complex number $1.5+0i$ can be lowered as far as
    
      
      <kbd>"real"</kbd>,
    
    the complex number $1+0i$ can be lowered as far
    as
    
      
      <kbd>"integer"</kbd>,
    
    and the complex number $2+3i$ cannot be lowered
    at all.  Here is a plan for determining whether an object can be lowered:
    Begin by defining a generic operation <kbd>project</kbd>
    that <QUOTE>pushes</QUOTE> an object down in the tower.  For example,
    projecting a complex number would involve throwing away the imaginary part.
    Then a number can be dropped if, when we
    <kbd>project</kbd> it and
    <kbd>raise</kbd> the result back to the type we started
    with, we end up with something equal to what we started with.  Show how to
    implement this idea in detail, by writing a
    <kbd>drop</kbd>
    
      
      function
    
    that drops an object as far as possible.  You will need to design the
    various projection operations<a class='superscript' id='footnote-link-5' href='#footnote-5'>[5]</a> and install
    <kbd>project</kbd> as a generic operation in the system.
    You will also need to make use of a generic equality predicate, such as
    described in exercise&nbsp;<REF NAME="ex:equ?"><a class="superscript" id="2.5.2-ex-link-2.79" href="./2.5.1.html#ex_2.79">2.79</a></REF>.  Finally, use
    <kbd>drop</kbd>
    to rewrite
    
      
      <kbd>apply_generic</kbd>
      
    
    from exercise&nbsp;<REF NAME="ex:apply-with-raise"><a class="superscript" id="2.5.2-ex-link-2.84" href="./2.5.2.html#ex_2.84">2.84</a></REF> so that it
    <QUOTE>simplifies</QUOTE> its answers.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_51_5_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_51_5_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.86" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.86">Exercise 2.86 </a></b> 
  
    Suppose we want to handle complex numbers whose real
    parts, imaginary parts, magnitudes, and angles can be either ordinary
    numbers, rational numbers, or other numbers we might wish to add to
    the system.  Describe and implement the changes to the system needed
    to accommodate this.  You will have to define operations such as
    <kbd>sine</kbd> and <kbd>cosine</kbd>
    that are generic over ordinary numbers and rational numbers.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_51_6_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_51_6_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
  
  

<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    We
    also have to supply an almost identical
    
      
      function
    
    to handle the types
    
      
      
	<kbd>list("javascript_number", "complex")</kbd>.
      
    
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    See exercise&nbsp;<REF NAME="ex:multi-coercion"><a class="superscript" id="2.5.2-ex-link-2.82" href="./2.5.2.html#ex_2.82">2.82</a></REF> for
    generalizations.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3'>[3] </a>
    <FOOTNOTE>
    If we are
    clever, we can usually get by with fewer than
    $n^2$ coercion
    
      
    functions.
    For instance, if we know how to convert from type 1 to type 2 and from
    type 2 to type 3, then we can use this knowledge to convert from type 1 to
    type 3.  This can greatly decrease the number of coercion
    
      
      functions
    
    we need to supply explicitly when we add a new type to the system.  If we
    are willing to build the required amount of sophistication into our system,
    we can have it search the <QUOTE>graph</QUOTE> of relations among types and
    automatically generate those coercion
    
      
      functions
    
    that can be inferred from the ones that are supplied
    explicitly.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4'>[4] </a>
    <FOOTNOTE>
    This statement, which also appears in
    the first edition of this book, is just as true now as it was when we wrote
    it twelve years ago. Developing a useful, general framework for expressing
    the relations among different types of entities (what philosophers call
    <QUOTE>ontology</QUOTE>) seems intractably difficult.  The main difference
    between the confusion that existed ten years ago and the confusion that
    exists now is that now a variety of inadequate ontological theories have
    been embodied in a plethora of correspondingly inadequate programming
    languages.  For example, much of the complexity of
    
    
    object-oriented programming languages—and the subtle and confusing
    differences among contemporary object-oriented
    languages—centers on the treatment of generic operations on
    interrelated types.  Our own discussion of computational objects in
    chapter&nbsp;3 avoids these issues entirely.  Readers familiar with
    object-oriented programming will notice that we have much to say in
    chapter&nbsp;3 about local state, but we do not even mention
    <QUOTE>classes</QUOTE> or <QUOTE>inheritance.</QUOTE>  In fact, we suspect
    that these problems cannot be adequately addressed in terms of
    computer-language design alone, without also drawing on work in knowledge
    representation and automated reasoning.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5'>[5] </a>
    <FOOTNOTE>
    A real number can be projected to
    an integer using the
    
    
    
      
      
	<kbd>math_round</kbd>
      
    
    primitive, which returns the closest integer
    to its argument.
    </FOOTNOTE></div>

    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./2.5.1.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='53' href='./2.5.3.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      2.5.2&nbsp;&nbsp;
    Combining Data of Different Types
  
    </div>
    <script> var chapter_id = 52; </script>
    <script> var chapter_path = "chapters/2.5.2.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>