<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="3.5.3&nbsp;&nbsp;
    Exploiting the Stream Paradigm
  " />
    <title>
      3.5.3&nbsp;&nbsp;
    Exploiting the Stream Paradigm
  
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

     
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html"> 
        Foreword
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./foreword.html"> Foreword to SICP, 1984</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./prefaces03.html"> 
    Preface
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-4">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                <a href="./prefaces84.html"> 
    Preface to the First Edition of SICP, 1984
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-5">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="false" aria-controls="sidebar-collapse-5">
                <a href="./prefaces96.html"> 
    Preface to the Second Edition of SICP, 1996
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./acknowledgements.html"> 
Acknowledgments
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./see.html"> </a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-8">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1 
    Building Abstractions with 
    
      
      Functions
    
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-8" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-9">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="true" aria-controls="sidebar-collapse-9">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="true" aria-controls="sidebar-collapse-9">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1 The Elements of Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-9" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.1.html"> 1.1.1 Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.2.html"> 1.1.2 Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.3.html"> 1.1.3 
    Evaluating
    
      
      Operator Combinations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.4.html"> 1.1.4 
    Compound 
    Functions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-14">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                <a href="./1.1.5.html"> 1.1.5 
    The Substitution Model for 
    
      
      
        Function
      
    
    Application
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.1.6.html"> 1.1.6 
    Conditional Expressions and Predicates
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.1.7.html"> 1.1.7 Example: Square Roots by Newton's Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.1.8.html"> 1.1.8 
    
      
      
        Functions
      
    
    as Black-Box Abstractions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-18">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2 
    
      
      Functions
    
    and the Processes They Generate
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-18" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.1.html"> 1.2.1 Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.2.html"> 1.2.2 Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-21">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                <a href="./1.2.3.html"> 1.2.3 Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.2.4.html"> 1.2.4 Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.2.5.html"> 1.2.5 Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.2.6.html"> 1.2.6 Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-25">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="true" aria-controls="sidebar-collapse-25">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="true" aria-controls="sidebar-collapse-25">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3 
        Formulating Abstractions with Higher-Order 
        
	  
	  Functions
	
      </a>
                </h5>
              </div>

              <div id="sidebar-collapse-25" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-26">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                <a href="./1.3.1.html"> 1.3.1 
    
      
      Functions
    
    as Arguments
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-27">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="false" aria-controls="sidebar-collapse-27">
                <a href="./1.3.2.html"> 1.3.2 
    
      
      Constructing Functions using Lambda Expressions
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./1.3.3.html"> 1.3.3 
    
      
    Functions
    as General Methods
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./1.3.4.html"> 1.3.4 
    
      
      Functions
    
    as Returned Values
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-30">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2 Building Abstractions with Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-30" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-31">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="true" aria-controls="sidebar-collapse-31">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="true" aria-controls="sidebar-collapse-31">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1 Introduction to Data Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-31" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-32">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                <a href="./2.1.1.html"> 2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.1.2.html"> 2.1.2 
    Abstraction Barriers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.1.3.html"> 2.1.3 
    What Is Meant by Data?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.1.4.html"> 2.1.4 
    Extended Exercise: Interval Arithmetic
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-36">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="true" aria-controls="sidebar-collapse-36">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="true" aria-controls="sidebar-collapse-36">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2 Hierarchical Data and the Closure Property</a>
                </h5>
              </div>

              <div id="sidebar-collapse-36" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-37">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                <a href="./2.2.1.html"> 2.2.1 
    Representing Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.2.2.html"> 2.2.2 
    Hierarchical Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.2.3.html"> 2.2.3 
    Sequences as Conventional Interfaces
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.2.4.html"> 2.2.4 
    Example: A Picture Language
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-41">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="true" aria-controls="sidebar-collapse-41">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="true" aria-controls="sidebar-collapse-41">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3 Symbolic Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-41" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-42">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                <a href="./2.3.1.html"> 2.3.1 
    
      
      Strings
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.3.2.html"> 2.3.2 
    Example: Symbolic Differentiation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.3.3.html"> 2.3.3 
    Example: Representing Sets
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.3.4.html"> 2.3.4 
    Example: Huffman Encoding Trees
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4 Multiple Representations for Abstract Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.4.1.html"> 2.4.1 
    Representations for Complex Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.4.2.html"> 2.4.2 
    Tagged data
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.4.3.html"> 2.4.3 
    Data-Directed Programming and Additivity
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5 Systems with Generic Operations</a>
                </h5>
              </div>

              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-51">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="false" aria-controls="sidebar-collapse-51">
                <a href="./2.5.1.html"> 2.5.1 
    Generic Arithmetic Operations
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./2.5.2.html"> 2.5.2 
    Combining Data of Different Types
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./2.5.3.html"> 2.5.3 
    Example: Symbolic Algebra
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-54">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3 Modularity, Objects, and State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-54" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1 Assignment and Local State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.1.1.html"> 3.1.1 
    Local State Variables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.1.2.html"> 3.1.2 
    The Benefits of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.1.3.html"> 3.1.3 
    The Costs of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-59">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="true" aria-controls="sidebar-collapse-59">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="true" aria-controls="sidebar-collapse-59">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2 The Environment Model of Evaluation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-59" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-60">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                <a href="./3.2.1.html"> 3.2.1 
    The Rules for Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.2.2.html"> 3.2.2 
    Applying Simple
    
      
      Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.2.3.html"> 3.2.3 
    Frames as the Repository of Local State
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.2.4.html"> 3.2.4 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-64">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3 Modeling with Mutable Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-64" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.1.html"> 3.3.1 
    Mutable List Structure
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-66">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="false" aria-controls="sidebar-collapse-66">
                <a href="./3.3.2.html"> 3.3.2 
    Representing Queues
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.3.3.html"> 3.3.3 
    Representing Tables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.3.4.html"> 3.3.4 
    A Simulator for Digital Circuits
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-69">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                <a href="./3.3.5.html"> 3.3.5 
    Propagation of Constraints
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4 Concurrency: Time Is of the Essence</a>
                </h5>
              </div>

              <div id="sidebar-collapse-70" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.4.1.html"> 3.4.1 
    The Nature of Time in Concurrent Systems
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.4.2.html"> 3.4.2 
    Mechanisms for Controlling Concurrency
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-73">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5 Streams</a>
                </h5>
              </div>

              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.1.html"> 3.5.1 
    Streams Are Delayed Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-75">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                <a href="./3.5.2.html"> 3.5.2 
    Infinite Streams
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-76">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="false" aria-controls="sidebar-collapse-76">
                <a href="./3.5.3.html"> 3.5.3 
    Exploiting the Stream Paradigm
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./3.5.4.html"> 3.5.4 
    Streams and Delayed Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./3.5.5.html"> 3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-79">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4 Metalinguistic Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-79" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-80">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1 The Metacircular Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-80" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.1.html"> 4.1.1 
    The Core of the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.2.html"> 4.1.2 
    Representing
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.3.html"> 4.1.3 
    Evaluator Data Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-84">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                <a href="./4.1.4.html"> 4.1.4 
    Running the Evaluator as a Program
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.1.5.html"> 4.1.5 
    Data as Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.1.6.html"> 4.1.6 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.1.7.html"> 4.1.7 
    Separating Syntactic Analysis from Execution
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2 
    
      
    
    Lazy Evaluation
</a>
                </h5>
              </div>

              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.2.1.html"> 4.2.1 
    Normal Order and Applicative Order
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.2.2.html"> 4.2.2 
    An Interpreter with Lazy Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.2.3.html"> 4.2.3 
    Streams as Lazy Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3 
    
      
    
    Nondeterministic Computing
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.3.1.html"> 4.3.1 
    
      
      Search and amb
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.3.2.html"> 4.3.2 
    Examples of Nondeterministic Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.3.3.html"> 4.3.3 
    Implementing the
    
      
       
    
    Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-96">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4 Logic Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-96" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-97">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                <a href="./4.4.1.html"> 4.4.1 
    Deductive Information Retrieval
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-98">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="false" aria-controls="sidebar-collapse-98">
                <a href="./4.4.2.html"> 4.4.2 
    How the Query System Works
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./4.4.3.html"> 4.4.3 
    Is Logic Programming Mathematical Logic?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./4.4.4.html"> 4.4.4 
    Implementing the Query System
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-101">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5 Computing with Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-102">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1 Designing Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-102" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.1.html"> 5.1.1 
    A Language for Describing Register Machines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-104">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                <a href="./5.1.2.html"> 5.1.2 
    Abstraction in Machine Design
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.1.3.html"> 5.1.3 
    Subroutines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.1.4.html"> 5.1.4 
    Using a Stack to Implement Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.1.5.html"> 5.1.5 
    Instruction Summary
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-108">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2 A Register-Machine Simulator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-108" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-109">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="false" aria-controls="sidebar-collapse-109">
                <a href="./5.2.1.html"> 5.2.1 
    The Machine Model
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.2.2.html"> 5.2.2 
    The Assembler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.2.3.html"> 5.2.3 
    
      
      Instructions and their Execution Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-112">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                <a href="./5.2.4.html"> 5.2.4 
    Monitoring Machine Performance
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3 Storage Allocation and Garbage Collection</a>
                </h5>
              </div>

              <div id="sidebar-collapse-113" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.3.1.html"> 5.3.1 
    Memory as Vectors
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.3.2.html"> 5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-116">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4 The Explicit-Control Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-116" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-117">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                <a href="./5.4.1.html"> 5.4.1 
    
      
      The Dispatcher and Basic Evaluation
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.4.2.html"> 5.4.2 
    
      
      
        Evaluating function applications
      
        
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.4.3.html"> 5.4.3 
    
      
      
        Blocks, Assignments, and Declarations
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.4.4.html"> 5.4.4 
    Running the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-121">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5 Compilation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-121" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.1.html"> 5.5.1 
    Structure of the Compiler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.2.html"> 5.5.2 
    Compiling
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.3.html"> 5.5.3 
    Compiling
    
      
      
	Applications and Return Statements
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./5.5.4.html"> 5.5.4 
    Combining Instruction Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./5.5.5.html"> 5.5.5 
    An Example of Compiled Code
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-127">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-127" aria-expanded="false" aria-controls="sidebar-collapse-127">
                <a href="./5.5.6.html"> 5.5.6 
    Lexical Addressing
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-128">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-128" aria-expanded="false" aria-controls="sidebar-collapse-128">
                <a href="./5.5.7.html"> 5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-129">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-129" aria-expanded="false" aria-controls="sidebar-collapse-129">
                <a href="./references.html"> References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-130">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-130" aria-expanded="false" aria-controls="sidebar-collapse-130">
                <a href="./making-of.html"> About the SICP JS Project</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    3.5.3&nbsp;&nbsp;
    Exploiting the Stream Paradigm
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  
  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    Streams with delayed evaluation can be a powerful modeling tool,
    providing many of the benefits of local state and assignment.
    Moreover, they avoid some of the theoretical tangles that accompany
    the introduction of assignment into a programming language.
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    The stream approach can be illuminating because it allows us to build
    systems with different
    
    module boundaries than systems organized around
    assignment to state variables.  For example, we can think of an entire
    time series (or signal) as a focus of interest, rather than the values
    of the state variables at individual moments.  This makes it
    convenient to combine and compare components of state from different
    moments.
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    Formulating iterations as stream processes
  </h2></div>

  

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    In section&nbsp;<REF NAME="sec:recursion-and-iteration"><a class="superscript" id="3.5.3-sec-link-1.2.1" href="./1.2.1.html">1.2.1</a></REF>, we introduced
    iterative processes, which proceed by updating state variables.  We know now
    that we can represent state as a <QUOTE>timeless</QUOTE> stream of values
    rather than as a set of variables to be updated.  Let's adopt this
    perspective in revisiting the square-root
    
      
      function
    
    from section&nbsp;<REF NAME="sec:sqrt"><a class="superscript" id="3.5.3-sec-link-1.1.7" href="./1.1.7.html">1.1.7</a></REF>.  Recall that the idea is to
    generate a sequence of better and better guesses for the square root of
    $x$ by applying over and over again the
    
      
      function
    
    that improves guesses:
    
    <div class='snippet' id='javascript_75_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgCGAbgKYBO9A5swBQAeANKACeASlABvHKGmhWzcoVZ0+oANTCxYAEwBuHAF88RMlVqgAzgEdW5APqUAtgAdW1Ftw6Fm584N5jJGVl5RTomNk4eT29fUF5QMGifET1DHCsbe2dXdwBGNC1BLRSgA')">function sqrt_improve(guess, x) {
    return average(guess, x / guess);
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    In our original
    
    <kbd>sqrt</kbd>
    
      
      function,
    
    we made these guesses be the successive values of a state variable. Instead
    we can generate the infinite stream of guesses, starting with an initial
    
      
      
	guess of 1:
      
    
    <div class='snippet' id='javascript_75_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgCGAbgKYBO9A5swBQAeANKACeASlABvHKGmhWzcoVZ0+oANTCxYAEwBuHAF88RMlVqgAzgEdW5APqUAtgAdW1Ftw6Fm584N5jJGVl5RTomNk4eT29fUF5QMGifET1DHFJac3JQB3peWwATSnMnABt6IVAAXlAATj1jCho6IpLyoVssuXoHbnMAqRlG0xbisorO8m6He3I2PvJBYgGgoMp8UG5i22JCUtKFkRXV6X1QZlLzZlB1zboqh9AABmOToNbxoW4Acm-BACI0ED-ilBiczhcrhIwW9pB92twABbMegFQ6g2HvMbtSbTWbzLoombkeiUA5ZERLUAAWlAAEYMW9DEFmTJ4RNCT18aw+oJcvl2aJUkYSE0zFYbLiiXxXsEFEpQE5STy6YJuGIqgA+CxTIm2XJODxeHzVbUwzEWy1BCV2RwuNxRY2xfz8c1W90nG1Snoyo7CnCC729L2c3paP1AA')">function sqrt_stream(x) {
    return pair(1, () => stream_map(guess => 
                                      sqrt_improve(guess, x),
                                    sqrt_stream(x)));
}
</pre></div></div>
    <div class='snippet' id='javascript_75_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4MYD2AdgM4AuoAtgIYAeA+gCYCWpADgDY0CeoAvKACcAbhwAzAK7F85FiVCsO3HgwoAnAKY0qAClIBKUAG8coc6Cky5CpV15ryWnQxblN6-eQA0oYkdMLINAWcVBdNgZiSU5OLwMAs2DzAF9QTU5STRCw3WIBfkEABkTk5LsVXQByKt8AIjRGuoMxMtA0jKyTJLbzCt5dAAttJniWnt7+1Q1tKld3TxmXchoWOIoDX3yAWlAARnG2lInjoKnHZzm3D31fWkYp8eOJaVl5fJoANw8aAHNNXR0Xw8UoWLTkSTqfKA0AAalAINAYAATGJnlY3gpSABHdTkVxUdjqQjfXS-SSaUikXx0UHmcGQj7fdR-AHkynU0B0JGgdlUp54DE2fI4vEXWaAumgBlQ0DsVaePa+XRGfgAPlASzmtHYZIpVIEGomvRNpqCovxLEJxNJfM5tO8xrNzuSFvFOklCTReHOWv0uPxfuRXqAA')">display_stream(sqrt_stream(2));
</pre><pre class='prettyprintoutput'>
1
1.5
1.4166666666666665
1.4142156862745097
1.4142135623746899
...</pre></div></div>
    We can generate more and more terms of the stream to get better and
    better guesses.  If we like, we can write a
    
      
      function
    
    that keeps generating terms until the answer is good enough.
    (See exercise&nbsp;<REF NAME="ex:stream-limit"><a class="superscript" id="3.5.3-ex-link-3.64" href="./3.5.3.html#ex_3.64">3.64</a></REF>.)
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    Another iteration that we can treat in the same way is to generate an
    approximation to
    
    
    
    
    
    
    $\pi$, based upon the
    alternating series that we saw in
    section&nbsp;<REF NAME="sec:procedures-as-parameters"><a class="superscript" id="3.5.3-sec-link-1.3.1" href="./1.3.1.html">1.3.1</a></REF>:
    
      \[
      \frac {\pi}{4} = 1-\frac{1}{3}+\frac{1}{5}-\frac{1}{7}+\cdots
      \]
    
    We first generate the stream of summands of the series (the reciprocals
    of the odd integers, with alternating signs).  Then we take the stream
    of sums of more and more terms (using the 
    
      
      <kbd>partial_sums</kbd> function
      
    
    of exercise&nbsp;<REF NAME="ex:partial-sums"><a class="superscript" id="3.5.3-ex-link-3.55" href="./3.5.2.html#ex_3.55">3.55</a></REF>) and scale the result by 4:
    <div class='snippet' id='javascript_75_4_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4MYD2AdgM4AuoAtgIYAeA+gCYCWpADgDY0CeoAvKACcAbhwAzAK7F85FiVCsO3HgwoAnAKY0qAClIBKUAG8coc6Cky5CpV15ryWnQxblN6-eQA0oYkdMLINAWcVBdNgZiSU5OLwMAs2DzAF9QTU5STRCw3WIBfkEABkTk5LsVXQByKt8AIjRGuoMxMtA0jKyTJLbzCt5dAAttJniWnt7+1Q1tKld3TxmXchoWOIoDX3yAWlAARnG2lInjoKnHZzm3D31fWkYp8eOJaVl5fNJ8Gk5NC9mvS6+cQ0WSEdSlCxaciSdQfJyzBi0di6OgCAB8oFRACpLCDyGDvBNer0llQnngrG8FFRNFRCLorAEAJBBCY-SjfZxMVTqaQCXGZTStCzs0BaUgxSiCaRMTTiFjETRMYXmKEw-K6Iz8DGBYlBULhACEnJGPOkEL1yXFkv5Vk1KstQRNNG5DF5+UETkkQqJjrFmmhsP9Es45Adeo6gu6fuCaqD1tD4eJp2TYmelJscMuiJo7AYACYGb5SHti-mLf7A-lItFYvoDqAAGSNkKkKIxdbl33BAD8fg73aCAC5W+26yWjAAfSej2udgyDix9jzqMF5Dv1aSaOjsTSyJWgGjqADmkhpxEo212pJzefzzUX5hH7FWnnEQxG9c2wxd+nLm1AR82hpOldE1dFQBvJECyLSD4WWVZ1gOQkY1QvUbxWNY-wSBI0wpV5M0PJgmD+HRSHrMsKzjLMEWgwsUVLTFywgug9lAABqJji0Y0hyzwl5rHeUAX3UORvjUM9yMMaNIQDdVhNfD9f0MFCY3A7UiJI0kpPguZMPWTYgLQ5IRLEzgJKoKScP4jMhPYFgLNoYgmHI-wZNVOSgxfFhPDYsBiF8IygnUjEoNzFEIN2OhVOMx17McmhnNcjjQH-ILzHJAgSAoYSHNJfkJk+b5flJXRTJYcSJUssq8rPJyXN0A4AIAFnGHBzlK+LSRaIA')">function pi_summands(n) {
    return pair(1 / n, 
                () => stream_map(x => - x,
                                 pi_summands(n + 2))
               );
}

const pi_stream = 
    scale_stream(partial_sums(pi_summands(1)), 4);
</pre></div></div>
    <div class='snippet' id='javascript_75_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4MYD2AdgM4AuoAtgIYAeA+gCYCWpADgDY0CeoAvKACcAbhwAzAK7F85FiVCsO3HgwoAnAKY0qAClIBKUAG8coc6Cky5CpV15ryWnQxblN6-eQA0oYkdMLINAWcVBdNgZiSU5OLwMAs2DzAF9QTU5STRCw3WIBfkEABkTk5LsVXQByKt8AIjRGuoMxMtA0jKyTJLbzCt5dAAttJniWnt7+1Q1tKld3TxmXchoWOIoDX3yAWlAARnG2lInjoKnHZzm3D31fWkYp8eOJaVl5fNJ8Gk5NC9mvS6+cQ0WSEdSlCxaciSdQfJyzBi0di6OgCAB8oFRACpLCDyGDvBNer0llQnngrG8FFRNFRCLorAEAJBBCY-SjfZxMVTqaQCXGZTStCzs0BaUgxSiCaRMTTiFjETRMYXmKEw-K6Iz8DGBYlBULhACEnJGPOkEL1yXFkv5Vk1KstQRNNG5DF5+UETkkQqJjrFmmhsP9Es45Adeo6gu6fuCaqD1tD4eJp2TYmelJscMuiJo7AYACYGb5SHti-mLf7A-lItFYvoDqAAGSNkKkKIxdbl33BAD8fg73aCAC5W+26yWjAAfSej2udgyDix9jzqMF5Dv1aSaOjsTSyJWgGjqADmkhpxEo212pJzefzzUX5hH7FWnnEQxG9c2wxd+nLm1AR82hpOldE1dFQBvJECyLSD4WWVZ1gOQkY1QvUbxWNY-wSBI0wpV5M0PJgmD+HRSHrMsKzjLMEWgwsUVLTFywgug9lAABqJji0Y0hyzwl5rHeUAX3UORvjUM9yMMaNIQDdVhNfD9f0MFCY3A7UiJI0kpPguZMPWTYgLQ5IRLEzgJKoKScP4jMhPYFgLNoYgmHI-wZNVOSgxfFhPDYsBiF8IygnUjEoNzFEIN2OhVOMx17McmhnNcjjQH-ILzHJAgSAoYSHNJfkJk+b5flJXRTJYcSJUssq8rPJyXN0A4AIAFnGHBzlK+LSRaIA')">display_stream(pi_stream);
</pre><pre class='prettyprintoutput'>
4
2.666666666666667
3.466666666666667
2.8952380952380956
3.3396825396825403
2.9760461760461765
3.2837384837384844
3.017071817071818
...</pre></div></div>
    This gives us a stream of better and better approximations to
    $\pi$, although the approximations converge
    rather slowly.  Eight terms of the sequence bound the value of
    $\pi$ between 3.284 and 3.017.
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    So far, our use of the stream of states approach is not much different
    from updating state variables.  But streams give us an opportunity to do
    some interesting tricks.  For example, we can transform a stream with a 
    
    
    <EM>sequence accelerator</EM> that converts a sequence of approximations to a
    new sequence that converges to the same value as the original, only faster.
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    One such accelerator, due to the eighteenth-century Swiss mathematician
    
    Leonhard Euler, works well with sequences that are partial sums of
    alternating series (series of terms with alternating signs). In
    Euler's technique, if $S_n$ is the
    $n$th term of the original sum sequence, then
    the accelerated sequence has terms
    
      \[ 
      S_{n+1} - \frac{(S_{n+1}-S_n)^2}{S_{n-1}-2S_n+S_{n+1}}
      \]
     
    Thus, if the original sequence is represented as a stream of values,
    the transformed sequence is given by
    <kbd class='snippet'>
function euler_transform(s) {
    const s0 = stream_ref(s, 0);     // $S_{n-1}$
    const s1 = stream_ref(s, 1);     // $S_{n}$
    const s2 = stream_ref(s, 2);     // $S_{n+1}$
    return pair(
             s2 - square(s2 - s1) / (s0 + (-2) * s1 + s2),
             memo(() => euler_transform(stream_tail(s))));
}
      </kbd>
    
      
	  Note that we make use of the memoization optimization of
	  section&nbsp;<REF NAME="sec:delayed-lists"><a class="superscript" id="3.5.3-sec-link-3.5.1" href="./3.5.1.html">3.5.1</a></REF>, because in the
	  following we will rely on repeated evaluation of the resulting stream.
      
    
  </p></div>
  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    We can demonstrate Euler acceleration with our sequence of
    approximations to $\pi$:
    <div class='snippet' id='javascript_75_6_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgDOAjoQIYBOApgBQAeAlKADeOUKNCdyhNnR6gAVKB4BuHAF88RMlVqgAth13UumgYICQY0CLEAbDuVAsbnFgBMAngH02JUAF5QfCd6DhVLOwdOekIbBwCSVw58SmIOVzCxCSk6LgE-AD4ha0sSy0p8UC4AQicXD28SU2LSlsyOaNj-QJJcjNb+2o43Lx86APIfUOb+0qzpcXaY8j6Z0VVQDhsQotXWuboopZXV9ROVdQISCho6DhiONk8JlmJ6fGo2XS56JstSWnoDnoAAYuoCXLpvElvgAaUDAvhKEogUAAEnAnkExAAtABGVSo5r-V5A3FgiZDSGcfCw0C4xHIsDozHEAlEgFAgBM5IhUJp9DhnIZlhRzKxAGp8YTLPtQAAHFiUNhcaatejc7EMZjsbjq0Ca+j00Bgb6g8WVbFC+QMMnm9V8GGqlr6QxcXL+Qp3OyPZ6vd6fb4UliQ8iKmzfPiRxFqPDEwF6Fg8TyuSj0OU2FjuLoAThUmmuOhTaYzXnBlIjOzE+e0dCL6cznjLwc8lHID0DcOIvxa5Uqqc8xBi4cBkcrpXWm22va4Yz8AQRY-6dZLXAA5Ku4QAiNA7zfR1oTrYcRetZeZrgACyGrkDkeOLTPpaDkNb7abIbDt87+rp+5apzEADREfRtnxbNtlQFBMk0faMLmrG4GFIJwOFAiFAwhOEggoD5u1EWV308XQWDlXgPUUa1sPID5HV2GZ3zgjQrhrBgwOIuVPE5Yw4UNHirWEGV7GyUB+0HGxhyNAAySSRPoAch2+IUnUsAB+UAxJsZSxAALlk+TxO+I0AB8jL0jTFL4LTRDUh42A+Gchy3EgOB4OUOAoNJHDYABzQh9GIBxsQNNiSM4vcrNAXSFSVYxL2vQyHSvNwLIdKw6JKF0jHdApWN5djOO43LKSeT9DQdCL0sq0RCNDShhyFKNziYrRELcVw0MpehDL4vCFkkeZCPyrjeFxOEeCtHKeFtRROR40aGCFJrLhanQFTYKgnEbPyup+RdZWi5UkpvH5aMq7LCjajrgx2sDauHcqqse+V2A2mwtt0HbGpjZaCzoOVKHe4jiFcLquz2oT5gOrgyTAYg4QqyxzqK5t2LInLNR4U6nro-7AZeEGZ1Ac0GoR0RGJwOMHFx98umaehkLsK6vjW173q66m-KBgn6VSgAWaMcBA98uC9B4njYF43g+ZmAYYxEgA')">display_stream(euler_transform(pi_stream));
</pre><pre class='prettyprintoutput'>
3.166666666666667
3.1333333333333337
3.1452380952380956
3.13968253968254
3.1427128427128435
3.1408813408813416
3.142071817071818
3.1412548236077655
...</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    Even better, we can accelerate the accelerated sequence, and recursively
    accelerate that, and so on.  Namely, we create a stream of streams (a
    structure we'll call a 
    
    <EM>tableau</EM>) in which each stream is the transform of the preceding one:
    <div class='snippet' id='javascript_75_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgC2AhgNYCmA+uYwEYA2rjQgApyAJ0bEAzvmqj6AGlCSAlKADeOUFtCjW5QqLoAHRpVFDJioaoC8APgYsOXPgOFiJ02QtAepMuQtlYIBuHABfIA')">function make_tableau(transform, s) {
    return pair(s, () => make_tableau(transform, transform(s)));
}
</pre></div></div>
    The tableau has the form
    
      \[
      \begin{array}{llllll}
      s_{00} & s_{01} & s_{02} & s_{03} & s_{04} & \ldots\\
      & s_{10} & s_{11} & s_{12} & s_{13} & \ldots\\
      &        & s_{20} & s_{21} & s_{22} & \ldots\\
      &        &        &        & \ldots &
      \end{array}
      \]
    
    Finally, we form a sequence by taking the first term in each row of
    the tableau:
    <div class='snippet' id='javascript_75_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgC2AhgNYCmA+uYwEYA2rjQgApyAJ0bEAzvmqj6AGlCSAlKADeOUFtCjW5QqLoAHRpVFDJioaoC8APgYsOXPgOFiJ02QtAepMuQtlYIBuHABfPCIyKlolAEdCRl0hAA9VDW0dPQM6VNAAKlBUsMiCEgoaOnpWemohaIyASCzNbX5yUEZeXUYAEwBPdlESUBtQfG7JVjCsjuzJQl5O8ZI+1nxKYlY+2e1dfUNQazGHTKyLi8p8Y4BCbt7B4ZIMtsv3rN1F5bGJkms9h8gQ8BE8RnRxmJCDM3kD3gdcgsluRAXCtOFQKxeNN1LC0Z8ckcvsjUWjImTSlEKrE6KwlqxRJxxP5vEFcVlSLRJJ1JAAGX7c3r0YYbCyKXnKEIXECgAAk4HYamIAFoAIzhWWwzlSHmqgViATC3T4MWgVWS6VgeWK4garVcnkAJn1QpFJssoEdFqyMutSoA1OrNQTDsZTOY8R9JM7lQkkilo6BY5JzaAwBZ+f7jsqvYUlHqs9HlPJI+8anUhCd7Jj6Yy-F5AoLDZxTLwgsFJRE8NruY5Uuw+pRJEZeIwBr8AJxhaKVOKD4ejoZNxj0NnnLQzmmgecjsfsZfCyjkBkWciKYivD7XY5D9jEJZt7nBdnvDFYnHXoQQmzjCUvuE7ouQgAOTAYoABEaBQeBnYfG+2KsP+QKAWOQgABagqeoSlhcKFLgaK7sEeJ4Hi2lCPuQxagHQsbmqS2jkgxsJ4fuBGHse5gekw-Z4Z2ZSblUSikN0HAHqeQqKJMFCyJe+yEnQpFMEYaSnMUeZSeQsglvicIHnxVIxIJimMEY7COg0igppZubrtkoagLe968I+qYAGSuQ5kh3g+Fhejh2gAPzUQ+-laAAXJ53nORYqYAD6xZFTmPn5aJBQyoiyF+D4QSQrCpEYrAUDsXSiAA5oQNTEJ0yrJmx7BKWZMGhaAEUmGYDToZhKbFhh-S+cEijNWWtT1FWDjGaZ5n4JZdVcORMXFkNOnLdopFzclHb6eUhlxP0fSsUKkgxdZslaAiRwTWZlapKqiipLm1Y3aAWb3ZZt1KF6lLbbOYaiFQ3T7hVR0qEh51hu1vV9EE2krWNXR9PtB7A7NrbQ0tK2XCYf2UADiz0MDHZfQJcRGJQgP0EwxB9EdF6g-JoBteYepgMQg0Y3DE0qdWsapDDGMraT5OU9TX7PZ6wTo6AW09p0gsHr8sKSMJ-AHYaQhY-9vDk0dcsVcLR3mlRAAsnbfVujCkKQWIMowx6I6wiSsGQrAiMyDY+CDtlg0odVKZ1-SKEwbAtq4giu54AQe9hZQsWJFtW-w4h2-uDvQs7Qh0onTIR94fP8xjctsaEQA')">function accelerated_sequence(transform, s) {
    return stream_map(head, make_tableau(transform, s));
}
</pre></div></div>
  </p></div>
  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    We can demonstrate this kind of <QUOTE>super-acceleration</QUOTE> of the
    $\pi$ sequence:
    <div class='snippet' id='javascript_75_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgC2AhgNYCmA+uYwEYA2rjQgApyAJ0bEAzvmqj6AGlCSAlKADeOUFtCjW5QqLoAHRpVFDJioaoC8APgYsOXPgOFiJ02QtAepMuQtlYIBuHABfPCIyKlpQRlJSVn5xclYAE3ZJVgBHQlYyVhFxf29FFXVNbV19QyUxAXp2JiMhAAsBdMUmNk4efkFizwCfFWUwyIISCho6STzGXSEAD1UNbR09Azpl0AAqUGWJqOnYunpWemohaLWASA2qrX5yeN5dRnSAT3ZRElAbKB8IxeNkwhsXptJIReK9ASR0qx8JRiBlwdUtnVrACHOsNvj8ZR8KAhABCEEfb6-EhrJ4E+kY6GwgFAkjWdEMzkUzo-P50QFifIczn0mrbKEw8jCkWgcKgZLZSoyhliuq6JlSukyyLa45TGKzeUw1iiTglLyBCp4rSkWiSV6SAAMLPtHyaunwFkUjvG+JAoAAJOB2GpiABaACM4QDdNtUgdEZdDUY7qRXtAEd9G39QZDxGjsbtDoATEm3b805ZQMWs9oc8HQwBqKMxjaq4ymcxahmSUthpQLJa90D9ySZ0BgCzOxsksM1-ZKRMz3vKeTd+kXK5CbH2I0pM3DbwWZNNLiUXhBYLjCJ4OP2xzLdjpSiSIy8RhfFkATjC0RmcWfV93x+V1GiCJVtD-M5QEAt8PyyE92EoNJzHtRRiFpBkiRJF92GIGEL3tYIIIJOUFVYUBsKEfkbEBH0SM5WDgKEAByFjFAAIjQbiOOvBkyNBCjrUYl84K+dpOmPUJ13xJj4NAlMkJQ49yzPQjyFXUA6H7TNpW0HV9LpOSQMQ5CTXTJhH2M69Jigw1JFIEEOAU+gVMaRRgQoWRMIxWo5kQloVhxQ4F088hZDXZURRcmyTgNOIXOaRgjHYYsbnKCNynnYT20oyQ8IIixxwAMmKvKCt4Qiaxk7QAH4tIImqtAALnK-DKqK1QAB8urawqVya0B6pNURZGogjOJIVhliMVgKAyeJRAAc0IC5iFeMNRwC5LUt4wbWpMMwbgkz5OvkDpTpXTTBo3S5rh3BxEpaVL0vqVTTEIzNIqin6fsStSLBrK89TsuJPkyFzJCKrKfK0XKnp2tKVkyw5513ZYl1RjKYZB05DRMUQqBBLJVqhq06Vyw7zAu9Igm+n6HvidIIZPMnEIBlR6d+7mCaJ3gSfoMngZvfV-2MSgBaYYh0ihjCGMpzshETMBiEUG6NkZhHWl2Xd+2WLnuaiowJehegpZl6jQBnIH1a0WKcDvV5jYQt0WTpBynJdsDecoYnTah53TfNqHM00gAWa8cGMr2UyEBIkhSRg0gh3J8kKIRWGNU0-AtBRbcN-FA5PUIgA')">display_stream(accelerated_sequence(euler_transform,
                                    pi_stream));
</pre><pre class='prettyprintoutput'>
4
3.166666666666667
3.142105263157895
3.141599357319005
3.1415927140337785
3.1415926539752927
3.1415926535911765
3.141592653589778
...</pre></div></div>
    The result is impressive.  Taking eight terms of the sequence yields the
    correct value of $\pi$ to 14 decimal places.
    If we had used only the original $\pi$ sequence,
    we would need to compute on the order of $10^{13}$
    terms (i.e., expanding the series far enough so that the individual terms
    are less then $10^{-13}$) to get that much
    accuracy!
    
  </p></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    We could have implemented these acceleration techniques without using
    streams.  But the stream formulation is particularly elegant and convenient
    because the entire sequence of states is available to us as a data structure
    that can be manipulated with a uniform set of operations.
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.63" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.63">Exercise 3.63 </a></b> 
  
    
    
      
      
	Louis Reasoner is not happy with the performance of the stream
	produced by the
	<kbd>sqrt_stream</kbd> function and
	tries to optimize it using memoization:
	<div class='snippet' id='javascript_75_10_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function sqrt_stream_optimized(x) {
    return pair(1,
                memo(() => stream_map(guess => 
                                        sqrt_improve(guess, x),
                                      sqrt_stream(x))));
}</pre></div></div>
	Alyssa P. Hacker instead proposes
	<div class='snippet' id='javascript_75_11_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function sqrt_stream_optimized_2(x) {
    const guesses = pair(1,
                         memo(() => stream_map(guess => 
                                                 sqrt_improve(guess, x),
                                                 guesses)));
    return guesses;
}</pre></div></div>
        and claims that Louis's version is 
	considerably less efficient than hers, because it performs
	redundant computation. Explain Alyssa's answer.
	Would Alyssa's approach without memoization be more
	efficient 
	than the original <kbd>sqrt_stream</kbd>?
      
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.64" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.64">Exercise 3.64 </a></b> 
  
  Write a
   
  
    
    function <kbd>stream_limit</kbd>
    
  
  that takes as arguments a stream
  and a number (the tolerance).  It should examine the stream until it
  finds two successive elements that differ in absolute value by less
  than the tolerance, and return the second of the two elements.  Using
  this, we could compute square roots up to a given tolerance by
  <div class='snippet' id='javascript_75_12_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function sqrt(x, tolerance) {
    return stream_limit(sqrt_stream(x), tolerance);
}</pre></div></div>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_2_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_2_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.65" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.65">Exercise 3.65 </a></b> 
  
    Use the series 
    
      \[
      \ln 2 = 1-\frac{1}{2}+\frac{1}{3}-\frac{1}{4}+\cdots
      \]
    
    to compute three sequences of approximations to the natural logarithm of 2,
  
    in the same way we did above for $\pi$.
    How rapidly do these sequences converge?
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_3_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_3_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
    
    Infinite streams of pairs
  </h2></div>

  
  
  

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    In section&nbsp;<REF NAME="sec:nested-mappings"><a class="superscript" id="3.5.3-sec-link-2.2.3" href="./2.2.3.html">2.2.3</a></REF>, we saw how the
    sequence paradigm handles traditional nested loops as processes defined
    on sequences of pairs. If we generalize this technique to infinite streams,
    then we can write programs that are not easily represented as loops, because
    the <QUOTE>looping</QUOTE> must range over an infinite set.
  </p></div>

  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    For example, suppose we want to generalize the 
     
    
      
      <kbd>prime_sum_pairs</kbd> function
      
    
    of section&nbsp;<REF NAME="sec:nested-mappings"><a class="superscript" id="3.5.3-sec-link-2.2.3" href="./2.2.3.html">2.2.3</a></REF> to produce the stream
    of pairs of <EM>all</EM> integers $(i,j)$ with
    $i \leq j$ such that
    $i+j$
    is prime.  If
    
      
      <kbd>int_pairs</kbd>
    
    is the sequence of all pairs of integers $(i,j)$
    with $i \leq j$, then our required stream is
    simply<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
    
    <div class='snippet' id='javascript_75_13_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgDOAjoQIYBOApgBQAeAlKADeOUKNCdyhNnR6gAVKB4BuHAF88RMlVqhK9APoATSgDc9lAEYAbbjwA0oAJ4DB4jpOmLQAUiegAvIGgAAxKoOoEJBQ0dJTE5BwA5hxsBvTk7FTEifr4bNQAtlzELiJiElJ0AA4slGzFDlwC-gB8uvFJKWkZbFk5eYXFoADUoACMfHwqEZrROnr6VWyUBdwlQmWis9qxCfVV9KVix24edEysnFwAFhwshlwHk6BtxJsnH6AA-KDkbIQcd6fY4ALl0BmMZnolhsDVAt3uj0OfCBwNEP3wLCs9EBaI+YMoey46U4LAK+gylCsSMmKmO6mOFU8hJSj2Wq0O0xwpFo6VASxWHHoAX5tXqACY7Ki8ccmgE2iS7uT8FSidKZRqFgLVg51Rq8XEEslUvp0pk4v18kUUJM9Xiphoojt2nsbCwTNx6GMHPRxUdyu5KuD9MRCFZqV6UTKfr67aAwTU6jc7g9I7r9Sc5a0XSk3R7iZKGH8lRTahGJlGM6IHTMnTFRXV6MSHOR-aImdUxVwrHpyMnEYcHAiHq2+Omq1m2obc3d84qyfoCiwqrx5aAe+l+6mx4ox3GqwfRPPyZTqaOpYeD4nUsTiwvT8Sd-vL2jj6WqVxR7S1HgecQ+dOxrCv4OZAaaPR9LkVpcBMKjcry5CgEuPBGHoVRWCwjgigAnCo2z1sY9DoZh4GkkUhwbMc+E6IRxGOKRJYsvU6QOOswjApQ+CgFwCyhuGt7POxnyqKAHDYhwuhcUMgQgcEbZorRGGOFwADkKkOAARGg2kaQ6wIiWJOKUTKimYVuAl6SZaFKQxC5MbeZHvhGrasaAAC04yWR8DJiD5oimfRb72fQDjIahRFKTWv4IS6ixisBDY3oBXQOMlqQOjgb4qlYRLXmuWrstww6PGKAijMVD7XpMe4ZoacWNlMQA')">stream_filter(pair => is_prime(head(pair) + head(tail(pair))),
              int_pairs);
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p14' class='permalink'></a><p>
    Our problem, then, is to produce the stream
    
      
      <kbd>int_pairs</kbd>.
    
    More generally, suppose we have two streams
    $S = (S_i)$ and
    $T = (T_j)$,
    and imagine the infinite rectangular array
    
      \[
      \begin{array}{cccc}
      (S_0,T_0) & (S_0,T_1) & (S_0, T_2) & \ldots\\
      (S_1,T_0) & (S_1,T_1) & (S_1, T_2) & \ldots\\
      (S_2,T_0) & (S_2,T_1) & (S_2, T_2) & \ldots\\
      \ldots
      \end{array}
      \]
    
    We wish to generate a stream that contains all the pairs in the array
    that lie on or above the diagonal, i.e., the pairs
    
      \[
      \begin{array}{cccc}
      (S_0,T_0) & (S_0,T_1) & (S_0, T_2) & \ldots\\
      & (S_1,T_1) & (S_1, T_2) & \ldots\\
      &           & (S_2, T_2) & \ldots\\
      &           &            & \ldots
      \end{array}
      \]
    
    (If we take both $S$ and
    $T$ to be the stream of integers, then this
    will be our desired stream
    
    <kbd>int_pairs</kbd>.)
    
  </p></div>

  <div class='permalink'>
<a name='p15' class='permalink'></a><p>
    Call the general stream of pairs
    
    <kbd>pairs(S, T)</kbd>,
    
    and consider it to be composed of three parts: the pair
    $(S_0,T_0)$, the rest of the pairs in the first
    row, and the remaining pairs:<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
    
      \[
      \begin{array}{c|ccc}
      (S_0,T_0) & (S_0,T_1) & (S_0, T_2) & \ldots\\
      \hline{} %--------------------------------------------------- \\
      & (S_1,T_1) & (S_1, T_2) & \ldots\\
      &           & (S_2, T_2) & \ldots\\
      &           &            & \ldots
      \end{array}
      \]
    
    Observe that the third piece in this decomposition (pairs that are not in
    the first row) is (recursively) the pairs formed from 
    
      
      <kbd>stream_tail(S)</kbd>
      
    
    and
    
      
      <kbd>stream_tail(T)</kbd>.
      
    
    Also note that the second piece (the rest of the first row) is
    <div class='snippet' id='javascript_75_14_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
stream_map(x => list(head(s), x),
           stream_tail(t));</pre></div></div>
    Thus we can form our stream of pairs as follows:
    <kbd class='snippet'>
function pairs(s, t) {
    return pair(list(head(s), head(t)), 
                () => $combine$-$in$-$some$-$way$(
                         stream_map(x => list(head(s), x),
                                    stream_tail(t)),
                         pairs(stream_tail(s), stream_tail(t)))
               );
}
      </kbd>
  </p></div>

  <div class='permalink'>
<a name='p16' class='permalink'></a><p>
    In order to complete the
    
      function,
    
    we must choose some way to
    
    combine the two inner streams.  One idea is to
    use the stream analog of the <kbd>append</kbd>
    
      
      function
    
    from section&nbsp;<REF NAME="sec:sequences"><a class="superscript" id="3.5.3-sec-link-2.2.1" href="./2.2.1.html">2.2.1</a></REF>:
    
    <div class='snippet' id='javascript_75_15_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgDO5ATgKYCGAtgPpsAOvLYgBMAFPQCMAGgYAmAJSgA3jlCrQrcoSZ1K9LsUIAbQ2PFyVay2oD8si1csAuULzaUmIgBbtREudPsHINURBQBeAD4GZnZuPgFhMRjOLnI3Ez9penlA4Ks5AG4cAF88UlpGUFoWelAwlzcPKVBQuqjq+kKccuJK8gB3alr613cRGWlWyNABoa6eyvjBIRYhOujWFKXEjulZzqLGTe5WfBFtlaFpcQAGG8KgA')">function stream_append(s1, s2) {
    return is_null(s1)
           ? s2
           : pair(head(s1), 
                  () => stream_append(stream_tail(s1), s2)
                 );
}
</pre></div></div>
    This is unsuitable for infinite streams, however, because it takes all the
    elements from the first stream before incorporating the second stream. In
    particular, if we try to generate all pairs of positive integers using
    
    <div class='snippet' id='javascript_75_16_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgDO5ATgKYCGAtgPpsAOvLYgBMAFPQCMAGgYAmAJSgA3jlCrQrcoSZ1K9LsUIAbQ2PFyVay2oD8si1csAuULzaUmIgBbtREudPsHINURBQBeAD4GZnZuPgFhMRjOLnI3Ez9penlA4Ks5AG4cAF88IjIqWhc3JnoxaXIFZUsNLTpXdxFDXXIvHzF-UG82UUbB3LyQ8KjGVhT4wVEJybzZ2K4OPhEAD1BI0G7GPpGB6W3-ZZWrhzWUtMoTMclL68sO2qS57nuMwdvv9IiMbmV6gQolPCkWiMUCbbZcIS6XiGNgATz2oAAnEVyhQaHREfRkWiuP8BkpArjKgSkSjUaTktxKOQWB5GNJiE1LpR8KARLp9EYMmMKcFiqAWIZ6CxQDy+XQworQAAGLlXQnE1EiADk2ukACI0Eb9eCxRKpTLmisNXTjr4xkV1bSSf8uMzWZ91j8koM6ABaUBmR1BUqWUNqG0uxlulls6RwhHO1Hg0oEEh4qqUYgsgDmrL0jDYTCoxBzXHwTGoHBEnNFala2mqnWI0lCeyiWdz+YZRZLZYrVZroAA1IG5CnIdDyLLsyw87UMZ2593C8Ws-3K9Wg3h3nUl-P6NJ9-nwThI-Sybv+bOD0ebyfCkA')">pairs(integers, integers);
</pre></div></div>
    
    our stream of results will first try to run through all pairs with the
    first integer equal to 1, and hence will never produce pairs with any
    other value of the first integer.
  </p></div>

  <div class='permalink'>
<a name='p17' class='permalink'></a><p>
    To handle infinite streams, we need to devise an order of combination
    that ensures that every element will eventually be reached if we let
    our program run long enough.  An elegant way to accomplish this is
    with the following <kbd>interleave</kbd>
    function:<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
    
    <div class='snippet' id='javascript_75_17_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4MYD2AdgM4AuoAtgIYAeA+gCYCWpADgDY0CeoAvKACcAbhwAzAK7F85FiVCsO3HgwoAnAKY0qAClIBKUAG8coc6Cky5CpV15ryWnQxblN6-eQA0oYkdMLINAWcVBdNgZiSU5OLwMAs2DzAF9QTU5STRCw3WIBfkEABkTk5LsVXQByKt8AIjRGuoMxMtA0jKyTJLbzCt5dAAttJniWnt7+1Q1tKld3TxmXchoWOIoDX3yAWlAARnG2lInjoKnHZzm3D31fWkYp8eOJaVl5fJZiBc5tADdNfR7XykABMpQsWnIknUH1IURi6wOEzKAH5QKDkckAFygdirTzDGijUgHXyY3oWXRGfgAPhCXw8Pxo-30IOBTlmDBWa0BCXJFKeeCIZEoJE0pAEuPxuiB4WpdLFhjEwoooHIAHdCBLBHiWJ42XKBHSNVrxirKJ9vn9NExJZbGdbdIrfCalThzks9Pb1Ez-kwWkA')">function interleave(s1, s2) {
    return is_null(s1)
           ? s2
           : pair(head(s1), 
                  () => interleave(s2, stream_tail(s1))
                 );
}
</pre></div></div>
    Since <kbd>interleave</kbd> takes elements alternately
    from the two streams, every element of the second stream will eventually
    find its way into the interleaved stream, even if the first stream is
    infinite.
  </p></div>

  <div class='permalink'>
<a name='p18' class='permalink'></a><p>
    We can thus generate the required stream of pairs as
    <div class='snippet' id='javascript_75_18_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGiXHkCmATgDZMCGAbkwBQBnAIwAaUAIBMASlABvHKEWgWTcoRZ1KAgPrFCbNoKFSFSs0oD84iafNmAXKAAOnSiz4ALLgBMjUsbZ2QYp8MgC8AHz0jKwcPPySYgLkKpwAttrkrobCUibBBVIA3DgAvniktMmgaZwAHtreWk5snACeoGGgAJwlRGRUtKBNAi3t2smpaYIy8mb9FDR0I2NtEylcGZTM7slixLOBZpT4oHxauvo55HlyR0qloExsAkz0p3x0Yd+gAAyHBSUK1abT4AHIwWIAERoWFQ4r3RSPZ6vO6AxTA9qeHyCG4I9HDZog9ZTbTbVi40lZSjXfygOgAWlAxhKwXKZnZQKJ40mmzJO0EYlqDUxbQR5QIJEWQwYzAA5qwdMlOCwqMQ5dp8CxqNMDmilCo1BpnK53MQxKFOlFZUwFSwlVlVQwNVqdZ9QABqZl5EoSyrEao2u0CTrReWK9YqtUu7XTFl4BaDOguNwCQWgG76xSG9TJ018NhacjYzi+AR0rylvh4gIEsyWyJh2JcXiUvm1Jx8OpW0CF5Ilst0ur+RF1seA3npTLZat5ESj8eAlP2ttT6k5OkLxdjycZdezvLivCikmbPjLtNBxViK-2n1AA')">function pairs(s, t) {
    return pair(list(head(s), head(t)), 
                () => interleave(stream_map(x => list(head(s), x),
                                            stream_tail(t)),
                                 pairs(stream_tail(s), 
                                       stream_tail(t))));
}
</pre></div></div>
    

  </p></div>

  
    <div class="permalink">
    <a name="ex_3.66" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.66">Exercise 3.66 </a></b> 
  
    Examine the stream
    
      
      <kbd>pairs(integers, integers)</kbd>.
      
    
    Can you make any general comments about the order in which the pairs are
    placed into the stream? For example, approximately how many pairs precede
    the pair (1,100)? the pair (99,100)? the pair (100,100)? (If you can make
    precise mathematical statements here, all the better. But feel free to give
    more qualitative answers if you find yourself getting bogged down.)
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_4_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_4_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.67" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.67">Exercise 3.67 </a></b> 
  
    Modify the <kbd>pairs</kbd>
    
      
      function
    
    so that
    
      
      <kbd>pairs(integers, integers)</kbd>
      
    
    will produce the stream of <EM>all</EM> pairs of integers
    $(i,j)$ (without the condition
    $i \leq j$).  Hint: You will need to
    mix in an additional stream.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_5_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_5_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.68" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.68">Exercise 3.68 </a></b> 
  
    Louis Reasoner thinks that building a stream of pairs from three parts is
    unnecessarily complicated.  Instead of separating the pair
    $(S_0,T_0)$ from the rest of the pairs in the
    first row, he proposes to work with the whole first row, as follows:
    <div class='snippet' id='javascript_75_19_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function pairs(s, t) {
    return interleave(stream_map(x => list(head(s), x),
                                 t), 
                      pair(stream_tail(s), stream_tail(t)));
}</pre></div></div>
    Does this work?  Consider what happens if we evaluate
    
      
      <kbd>pairs(integers, integers)</kbd>
      
    
    using Louis's definition of <kbd>pairs</kbd>.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_6_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_6_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.69" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.69">Exercise 3.69 </a></b> 
  
    Write a
    
      
      function
    
    <kbd>triples</kbd> that takes three infinite streams,
    $S$, $T$, and
    $U$, and produces the stream of triples
    $(S_i,T_j,U_k)$ such that
    $i \leq j \leq k$. Use
    <kbd>triples</kbd> to generate the stream of all 
    
    Pythagorean triples of positive integers, i.e., the triples
    $(i,j,k)$ such that
    $i \leq j$ and
    $i^2 + j^2 =k^2$.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_7_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_7_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.70" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.70">Exercise 3.70 </a></b> 
  
    
    It would be nice to be able to generate
    
    streams in which the pairs
    appear in some useful order, rather than in the order that results
    from an <EM>ad hoc</EM> interleaving process.  We can use a technique
    similar to the <kbd>merge</kbd>
    
      
      function
    
    of exercise&nbsp;<REF NAME="ex:merge"><a class="superscript" id="3.5.3-ex-link-3.56" href="./3.5.2.html#ex_3.56">3.56</a></REF>, if we define a way to say that
    one pair of integers is <QUOTE>less than</QUOTE> another.  One way to do
    this is to define a
    <QUOTE>weighting function</QUOTE>
    $W(i,j)$ and stipulate that
    $(i_1,j_1)$ is less than
    $(i_2,j_2)$ if
    $W(i_1,j_1) < W(i_2,j_2)$.  Write a
     
    
      
      function <kbd>merge_weighted</kbd>
      
    
    that is like <kbd>merge</kbd>, except that
    
      
      <kbd>merge_weighted</kbd>
      
    
    takes an additional argument <kbd>weight</kbd>, which is a
    
      
      function
    
    that computes the weight of a pair, and is used to determine the order in
    which elements should appear in the resulting merged stream.<a class='superscript' id='footnote-link-4' href='#footnote-4'>[4]</a> Using this, generalize <kbd>pairs</kbd>
    to a
    
      
      function <kbd>weighted_pairs</kbd>
      
    
    that takes two streams, together with a
    
      
      function
    
    that computes a weighting function, and generates the stream of pairs,
    ordered according to weight.  Use your
    
      
      function
    
    to generate
    <OL type="a">
      <LI>
	the stream of all pairs of positive integers
	$(i,j)$ with $i \leq
        j$ ordered according to the sum
	$i + j$
      </LI>
      <LI>
	the stream of all pairs of positive integers
	$(i,j)$ with $i \leq
        j$, where neither $i$ nor
	$j$ is divisible by 2, 3, or 5, and the
	pairs are ordered according to the sum
	$2 i + 3 j + 5 i j$.
      </LI>
    </OL>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_8_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_8_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.71" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.71">Exercise 3.71 </a></b> 
  
    Numbers that can be expressed as the sum of two cubes in more than one
    way are sometimes called
    
    <EM>Ramanujan numbers</EM>, in honor of the
    mathematician Srinivasa Ramanujan.<a class='superscript' id='footnote-link-5' href='#footnote-5'>[5]</a> Ordered streams of pairs provide an elegant solution
    to the problem of computing these numbers.  To find a number that can be
    written as the sum of two cubes in two different ways, we need only generate
    the stream of pairs of integers $(i,j)$ weighted
    according to the sum $i^3 + j^3$ (see
    exercise&nbsp;<REF NAME="ex:weighted-pairs"><a class="superscript" id="3.5.3-ex-link-3.70" href="./3.5.3.html#ex_3.70">3.70</a></REF>), then search the stream for
    two consecutive pairs with the same weight.  Write a
    
      
      function
    
    to generate the Ramanujan numbers.  The first
    such number is 1,729.  What are the next five?
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_9_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_9_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.72" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.72">Exercise 3.72 </a></b> 
  
    In a similar way to exercise&nbsp;<REF NAME="ex:ramanujan-nums"><a class="superscript" id="3.5.3-ex-link-3.71" href="./3.5.3.html#ex_3.71">3.71</a></REF> generate
    a stream of all numbers that can be written as the sum of two squares in
    three different ways (showing how they can be so written).
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_10_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_10_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
  
  

  
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
     
    Streams as signals
  </h2></div>

  
  
  
  <div class='permalink'>
<a name='p19' class='permalink'></a><p>
    We began our discussion of streams by describing them as computational
    analogs of the <QUOTE>signals</QUOTE> in signal-processing systems.
    In fact, we can use streams to model signal-processing systems in a very
    direct way, representing the values of a signal at successive time
    intervals as consecutive elements of a stream.  For instance, we can
    implement an 
    
    <EM>integrator</EM> or 
    <EM>summer</EM> that, for an input stream
    $x=(x_{i})$, an initial value $C$, and a small increment $dt$,
    accumulates the sum
    
      \[ S_i =C +\sum_{j=1}^{i} x_{j} \, dt \]
    
    and returns the stream of values $S=(S_{i})$.
    The following <kbd>integral</kbd>
    
      
      function
    
    is reminiscent of the <QUOTE>implicit style</QUOTE> definition of the
    stream of integers (section&nbsp;<REF NAME="sec:infinite-streams"><a class="superscript" id="3.5.3-sec-link-3.5.2" href="./3.5.2.html">3.5.2</a></REF>):
    
    <div class='snippet' id='javascript_75_20_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQFY0oFA4GYCuAdgMYAuAlgPbGgC2ApvdQBRHECUoA3gJChBoHENAAbRuVABDMQCdG0gCYBPAPpySoALyh8sgM6MA3CKESpCg4TFTdJJY3yVijJadELyhOXVbdtAD5eM1Ew0Up8UFYAQlkFZXVNLhDwtPCrGzs9En8PdIKZeUVVDS1dck0TUMKMyR86TNt82sEAX1BGMSNU1rrvX1Am8hbWtpq0ttNxghIKGjoDSsV6NXppAAc1ACZ2ABpQAwBGA4Nt7h4arwbQSgM1YhsxVmPuADI32-vHsWezzgm4QA-KAfmJAWEAFxfB5PF5HbgAH0RMLBL3OENEIMYcjk1DkrDBBwARCRGAAPDaMChuGRyADmhCYxCkAFpWYdltJVustttiQDatCNtJKAT8KwABYleGcPbS5Tozhy4R9MJMFisfw6YJLBI8zY7fac-Vqciiv4IvaYtW2sJ6lZmi1K5WcaZ4DjzWgyJRKNQO7kGeGnc69QTXQYBg18rXkk6gcmhoIJo6gADUCe2p3j-3dszIVG9BlIskY-q59BeFYO+go+IuV3qkYra02rHJOoToAAVHppHW5Na7eEo26cDNPYW6C5yIx6XJZKwZ3OF8QlAcXJQqLI1AA3WSERgHJTkBuiUi0Ja3FlznSgEVi1g22qb7diPcHo+q4eCbXJ5R+lGQbPj+xaluW+pLje87SGux6nkOP4FMu9KCsOY6eE207QXmk4LKCTIAEY4vcSzSHIVDEPSaj4HilbkPBZ5CBGdAPgSDEgWEf7BI89DEXIpHmhRLjUbR1D0emoAnoxnFCGO4wXsQV4nneAAMaCqUcxh8DgilXmILiKHId68fxgnkZRol0awqmMdpaS6ZeUgGa45FqChC5iHeHmLi5RkHLZUmnqYICgBe9AbIQlnXrOMFeWJ9CgKpoDkNQqCgNQUQSuSAQJjgoWsOQ0oxSushfKA9Ltrl6kYAmAB6WYyGuKXSgo+D4ow+VgEVjBDIw1i2OVrnGTVPaoA1d4ACyYACUYaE4rB+W5PliAc6xFRo1AOKwKCgGAJ7KsYQA')">function integral(integrand, initial_value, dt) {
    const integ = pair(
                    initial_value, 
                    () => add_streams(
                            scale_stream(integrand, dt),
                            integ)
                  );
    return integ;
}
</pre></div></div>
    
      
      
        
          
          
        
    <FIGURE>
      <img class="scale_factor_" id="fig_3.32" src="../img_javascript/ch3-Z-G-49.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.5.3.html#fig_3.32">Figure 3.32 </a></b>The <kbd>integral</kbd>
          function viewed as a signal-processing system.
          </div>
    </FIGURE>
  
      
    
</p></div>
<div class='permalink'>
<a name='p20' class='permalink'></a><p>

    
      
      
	Figure&nbsp;<REF NAME="fig:integral"><a class="superscript" id="3.5.3-fig-link-3.32" href="./3.5.3.html#fig_3.32">3.32</a></REF>
      
    
    is a picture of a signal-processing
    system that corresponds to the <kbd>integral</kbd>
    
      
      function.
    
    The input stream is scaled by $dt$ and passed
    through an adder, whose output is passed back through the same adder.
    The self-reference in the definition of
    
      
      
	<kbd>integ</kbd>
      
    
    is reflected in the figure by the feedback loop that
    connects the output of the adder to one of the inputs.
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.73" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.73">Exercise 3.73 </a></b> 
  
    
      We can model electrical circuits using streams to represent the values
      of currents or voltages at a sequence of times.  For instance, suppose
      we have an
      
      
      
      <EM>RC circuit</EM> consisting of a resistor of resistance
      $R$ and a capacitor of capacitance
      $C$ in series.  The voltage response
      $v$ of the circuit to an injected current
      $i$ is determined by the formula in
      figure&nbsp;<REF NAME="fig:rc"><a class="superscript" id="3.5.3-fig-link-3.33" href="./3.5.3.html#fig_3.33">3.33</a></REF>, whose structure is shown by the
      accompanying signal-flow diagram.
      
	
        <img class="scale_factor_" src="../img_original/ch3-Z-G-51.svg">
      
	
	
      
    <FIGURE>
      <img class="scale_factor_" id="fig_3.33" src="../img_original/ch3-Z-G-51.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./3.5.3.html#fig_3.33">Figure 3.33 </a></b>An RC circuit and the associated
	
	signal-flow diagram.
	</div>
    </FIGURE>
  
    <p></p>
      Write a
      
	
	function
      
      <kbd>RC</kbd> that models this circuit.
      <kbd>RC</kbd> should take as inputs the values of
      $R$, $C$, and
      $dt$ and should return a
      
	
	function
      
      that takes as inputs a stream representing the current
      $i$ and an initial value for the capacitor
      voltage $v_{0}$ and produces as output the
      stream of voltages $v$.  For example, you
      should be able to use <kbd>RC</kbd> to model an RC
      circuit with $R = 5$ ohms,
      $C = 1$ farad, and a 0.5-second time step by
      evaluating
      
	
	
	  <kbd>const RC1 = RC(5, 1, 0.5)</kbd>.
	
      
      This defines <kbd>RC1</kbd> as a
      
	
	function
      
      that takes a stream representing the time sequence of currents and an
      initial capacitor voltage and produces the output stream of voltages.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_11_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_11_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.74" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.74">Exercise 3.74 </a></b> 
  
    Alyssa P. Hacker is designing a system to process signals coming from
    physical sensors.  One important feature she wishes to produce is a signal
    that describes the
    
    
    <EM>zero crossings</EM> of the input signal. That is,
    the resulting signal should be $+1$ whenever the
    input signal changes from negative to positive,
    $-1$ whenever the input signal changes from
    positive to negative, and 0 otherwise.  (Assume that the sign of a 0 input
    is positive.)  For example, a typical input signal with its associated
    zero-crossing signal would be
    <kbd class='snippet'>
$\ldots$ 1  2  1.5  1  0.5  -0.1  -2  -3  -2  -0.5  0.2  3  4 $\ldots$
$\ldots$  0  0    0  0    0     -1  0   0   0     0    1  0  0 $\ldots$
      </kbd>

    In Alyssa's system, the signal from the sensor is represented as a
    stream
    
      
      <kbd>sense_data</kbd>
     
    and the stream
    
      
      <kbd>zero_crossings</kbd>
      
    
    is the corresponding stream of zero crossings.  Alyssa first writes a
    
      
      function
    
    
      
      <kbd>sign_change_detector</kbd>
      
    
    that takes two values as arguments and compares the signs of the values to
    produce an appropriate $0$,
    $1$, or $-1$.  She
    then constructs her zero-crossing stream as follows:

    <div class='snippet' id='javascript_75_21_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function make_zero_crossings(input_stream, last_value) {
    return pair(sign_change_detector(head(input_stream),
                                     last_value),
                () => make_zero_crossings(
                          stream_tail(input_stream),
                          head(input_stream)));
}
const zero_crossings = make_zero_crossings(sense_data, 0);</pre></div></div>

    Alyssa's boss, Eva Lu Ator, walks by and suggests that this program is
    approximately equivalent to the following one, which uses
    
      
      
	the function 
	<kbd>stream_map_2</kbd>
	from exercise&nbsp;<REF NAME="ex:combine-streams"><a class="superscript" id="3.5.3-ex-link-3.50" href="./3.5.1.html#ex_3.50">3.50</a></REF>:
      
    
    <kbd class='snippet'>
const zero_crossings = stream_map_2(sign_change_detector,
                                    sense_data,
                                    $expression$);
      </kbd>
    Complete the program by supplying the indicated
    $expression$.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_12_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_12_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.75" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.75">Exercise 3.75 </a></b> 
  
    Unfortunately, Alyssa's
    
    
    
    
    zero-crossing detector in
    exercise&nbsp;<REF NAME="ex:zero-crossing"><a class="superscript" id="3.5.3-ex-link-3.74" href="./3.5.3.html#ex_3.74">3.74</a></REF> proves to be insufficient,
    because the noisy signal from the sensor leads to spurious zero crossings.
    Lem E. Tweakit, a hardware specialist, suggests that Alyssa smooth the
    signal to filter out the noise before extracting the zero crossings.
    Alyssa takes his advice and decides to extract the zero crossings from
    the signal constructed by averaging each value of the sense data with
    the previous value.  She explains the problem to her assistant, Louis
    Reasoner, who attempts to implement the idea, altering Alyssa's
    program as follows:
    <div class='snippet' id='javascript_75_22_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function make_zero_crossings(input_stream, last_value) {
    const avpt = (head(input_stream) + last_value) / 2;
    return pair(sign_change_detector(avpt, last_value),
                () => make_zero_crossings(
                          stream_tail(input_stream), 
                          avpt);
	       );
}</pre></div></div>
    This does not correctly implement Alyssa's plan.
    Find the bug that Louis has installed
    and fix it without changing the structure of the program.  (Hint: You
    will need to increase the number of arguments to
    
      
      <kbd>make_zero_crossings</kbd>.)
      
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_13_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_13_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.76" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.76">Exercise 3.76 </a></b> 
  
    Eva Lu Ator has a criticism of Louis's approach in
    exercise&nbsp;<REF NAME="ex:zero-crossing-2"><a class="superscript" id="3.5.3-ex-link-3.75" href="./3.5.3.html#ex_3.75">3.75</a></REF>.
    
    
    
    
    The program he wrote is
    not modular, because it intermixes the operation of smoothing with the
    zero-crossing extraction.  For example, the extractor should not have
    to be changed if Alyssa finds a better way to condition her input
    signal.  Help Louis by writing a
    
      
      function
    
    <kbd>smooth</kbd> that takes a stream as input and
    produces a stream in which each element is the average of two successive
    input stream elements.  Then use <kbd>smooth</kbd> as a
    component to implement the zero-crossing detector in a more modular style.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_75_14_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_75_14_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
  

<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    As in
    section&nbsp;<REF NAME="sec:sequences-conventional-interfaces"><a class="superscript" id="3.5.3-sec-link-2.2.3" href="./2.2.3.html">2.2.3</a></REF>, we
    represent a pair of integers as a list rather than a
    
      
    
    pair.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    See
    exercise&nbsp;<REF NAME="ex:pairs-array"><a class="superscript" id="3.5.3-ex-link-3.68" href="./3.5.3.html#ex_3.68">3.68</a></REF> for some insight into why we
    chose this decomposition.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3'>[3] </a>
    <FOOTNOTE>
    The
    precise statement of the required property on the order of combination is
    as follows: There should be a function $f$ of
    two arguments such that the pair corresponding to
    element&nbsp;$i$ of the first stream and
    element&nbsp;$j$ of the second stream will
    appear as element number $f(i,j)$ of the output
    stream.  The trick of using <kbd>interleave</kbd>
    to accomplish this was shown to us by 
    
    David Turner, who employed it in the language 
    
    KRC (<CITATION>Turner 1981</CITATION>).
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4'>[4] </a>
    <FOOTNOTE>
    We
    will require that the weighting function be such that the weight of a pair
    increases as we move out along a row or down along a column of the array of
    pairs.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5'>[5] </a>
    <FOOTNOTE>
    To quote from G. H.
    Hardy's obituary of
    
    
    Ramanujan (<CITATION>Hardy 1921</CITATION>): <QUOTE>It was Mr. Littlewood
    (I believe) who remarked that <QUOTE>every positive integer was one of his
    friends.</QUOTE>  I remember once going to see him when he was lying ill
    at Putney.  I had ridden in taxi-cab No. 1729, and remarked that the number
    seemed to me a rather dull one, and that I hoped it was not an unfavorable
    omen. <QUOTE>No,</QUOTE> he replied, <QUOTE>it is a very interesting number;
    it is the smallest number expressible as the sum of two cubes in two
    different ways.</QUOTE></QUOTE> The trick of using weighted pairs to
    generate the Ramanujan numbers was shown to us by
    
    Charles
    Leiserson.
    </FOOTNOTE></div>

    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./3.5.2.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='77' href='./3.5.4.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      3.5.3&nbsp;&nbsp;
    Exploiting the Stream Paradigm
  
    </div>
    <script> var chapter_id = 76; </script>
    <script> var chapter_path = "chapters/3.5.3.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>