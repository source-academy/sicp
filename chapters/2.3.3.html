<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="2.3.3&nbsp;&nbsp;
    Example: Representing Sets
   - SICP Comparison Edition" />
    <title>
      2.3.3&nbsp;&nbsp;
    Example: Representing Sets
   - SICP Comparison Edition
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/sourcepower.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="toolt">Legend<span class="toolttext">
    <div class="title-text-ALSO">
      <span class="title-text-ALSO">Color highlighting:</span><BR/>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
      <span style="color:black">Unchanged █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
      <span style="color:green">Scheme █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
      <span style="color:blue">Javascript █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
      <span style="color:grey">Explanation █</span>
      </span>
    </div>
    <div class="title-text-OTHEREDITIONS">
      <span class="title-text-OTHEREDITIONS">
      <span style="color:red">Web-only █</span>
    </div>
</span></span>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; Scheme/JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; Comparison Edition</a></span>

     </nav>
     
     <div class="container scroll">

     
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword02.html"> 
        <span style="color:blue">Foreword</span>
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./foreword84.html"> Foreword <span style="color:blue">to Structure and Interpretation of Computer Programs, 1984</span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./prefaces03.html"> 
    
      <span style="color:blue">Preface</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-4">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                <a href="./prefaces96.html"> 
    Prefaces
    
      <span style="color:blue">
	to Structure and Interpretation of Computer Programs, 1996<span style='color:blue'> & </span>1984
      </span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-5">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="false" aria-controls="sidebar-collapse-5">
                <a href="./acknowledgements.html"> Acknowledgments</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./see.html"> </a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-7">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="true" aria-controls="sidebar-collapse-7">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="true" aria-controls="sidebar-collapse-7">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1 
    Building Abstractions with 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-7" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-8">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1 The Elements of Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-8" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.1.html"> 1.1.1 Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.2.html"> 1.1.2 Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.3.html"> 1.1.3 
    Evaluating
    
      <span style="color:green">Combinations</span>
      <span style="color:blue">Operator Combinations</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.4.html"> 1.1.4 
    Compound <span style="color:green">Procedures</span>
    <span style="color:blue">Functions</span>
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.5.html"> 1.1.5 
    The Substitution Model for 
    
      <span style="color:green">
        Procedure
      </span>
      <span style="color:blue">
        Function
      </span>
    
    Application
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-14">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                <a href="./1.1.6.html"> 1.1.6 
    Conditional Expressions and Predicates
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.1.7.html"> 1.1.7 Example: Square Roots by Newton's Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.1.8.html"> 1.1.8 
    
      <span style="color:green">
        Procedures
      </span>
      <span style="color:blue">
        Functions
      </span>
    
    as Black-Box Abstractions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-17">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="true" aria-controls="sidebar-collapse-17">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="true" aria-controls="sidebar-collapse-17">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
    and the Processes They Generate
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-17" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.1.html"> 1.2.1 Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.2.html"> 1.2.2 Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.3.html"> 1.2.3 Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-21">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                <a href="./1.2.4.html"> 1.2.4 Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.2.5.html"> 1.2.5 Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.2.6.html"> 1.2.6 Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-24">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="true" aria-controls="sidebar-collapse-24">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="true" aria-controls="sidebar-collapse-24">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3 
        Formulating Abstractions with Higher-Order 
        
	  <span style="color:green">Procedures</span>
	  <span style="color:blue">Functions</span>
	
      </a>
                </h5>
              </div>

              <div id="sidebar-collapse-24" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.1.html"> 1.3.1 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
    as Arguments
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-26">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                <a href="./1.3.2.html"> 1.3.2 
    
      <span style="color:green">Constructing Procedures using Lambda</span>
      <span style="color:blue">Constructing Functions using Lambda Expressions
      </span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-27">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="false" aria-controls="sidebar-collapse-27">
                <a href="./1.3.3.html"> 1.3.3 
    
      <span style="color:green">Procedures</span>
    <span style="color:blue">Functions</span>
    as General Methods
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./1.3.4.html"> 1.3.4 
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
    as Returned Values
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-29">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="true" aria-controls="sidebar-collapse-29">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="true" aria-controls="sidebar-collapse-29">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2 Building Abstractions with Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-29" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-30">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1 Introduction to Data Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-30" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.1.html"> 2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-32">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                <a href="./2.1.2.html"> 2.1.2 
    Abstraction Barriers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.1.3.html"> 2.1.3 
    What Is Meant by Data?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.1.4.html"> 2.1.4 
    Extended Exercise: Interval Arithmetic
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-35">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="true" aria-controls="sidebar-collapse-35">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="true" aria-controls="sidebar-collapse-35">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2 Hierarchical Data and the Closure Property</a>
                </h5>
              </div>

              <div id="sidebar-collapse-35" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.1.html"> 2.2.1 
    Representing Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-37">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                <a href="./2.2.2.html"> 2.2.2 
    Hierarchical Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.2.3.html"> 2.2.3 
    Sequences as Conventional Interfaces
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.2.4.html"> 2.2.4 
    Example: A Picture Language
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-40">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="true" aria-controls="sidebar-collapse-40">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="true" aria-controls="sidebar-collapse-40">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3 Symbolic Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-40" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.1.html"> 2.3.1 
    
      <span style="color:green">Quotation</span>
      <span style="color:blue">Strings</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-42">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                <a href="./2.3.2.html"> 2.3.2 
    Example: Symbolic Differentiation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.3.3.html"> 2.3.3 
    Example: Representing Sets
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.3.4.html"> 2.3.4 
    Example: Huffman Encoding Trees
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-45">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="true" aria-controls="sidebar-collapse-45">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="true" aria-controls="sidebar-collapse-45">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4 Multiple Representations for Abstract Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-45" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-46">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="false" aria-controls="sidebar-collapse-46">
                <a href="./2.4.1.html"> 2.4.1 
    Representations for Complex Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.4.2.html"> 2.4.2 
    Tagged data
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.4.3.html"> 2.4.3 
    Data-Directed Programming and Additivity
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-49">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="true" aria-controls="sidebar-collapse-49">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="true" aria-controls="sidebar-collapse-49">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5 Systems with Generic Operations</a>
                </h5>
              </div>

              <div id="sidebar-collapse-49" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-50">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="false" aria-controls="sidebar-collapse-50">
                <a href="./2.5.1.html"> 2.5.1 
    Generic Arithmetic Operations
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-51">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="false" aria-controls="sidebar-collapse-51">
                <a href="./2.5.2.html"> 2.5.2 
    Combining Data of Different Types
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./2.5.3.html"> 2.5.3 
    Example: Symbolic Algebra
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-53">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="true" aria-controls="sidebar-collapse-53">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="true" aria-controls="sidebar-collapse-53">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3 Modularity, Objects, and State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-53" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-54">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1 Assignment and Local State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-54" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-55">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="false" aria-controls="sidebar-collapse-55">
                <a href="./3.1.1.html"> 3.1.1 
    Local State Variables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.1.2.html"> 3.1.2 
    The Benefits of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.1.3.html"> 3.1.3 
    The Costs of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-58">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="true" aria-controls="sidebar-collapse-58">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="true" aria-controls="sidebar-collapse-58">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2 The Environment Model of Evaluation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-58" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.1.html"> 3.2.1 
    The Rules for Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-60">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                <a href="./3.2.2.html"> 3.2.2 
    Applying Simple
    
      <span style="color:green">Procedures</span>
      <span style="color:blue">Functions</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.2.3.html"> 3.2.3 
    Frames as the Repository of Local State
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.2.4.html"> 3.2.4 
    Internal
    
      <span style="color:green">Definitions</span>
      <span style="color:blue">Declarations</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.2.5.html"> 3.2.5 
    CSE Machine
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-64">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3 Modeling with Mutable Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-64" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.1.html"> 3.3.1 
    Mutable List Structure
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-66">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="false" aria-controls="sidebar-collapse-66">
                <a href="./3.3.2.html"> 3.3.2 
    Representing Queues
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.3.3.html"> 3.3.3 
    Representing Tables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.3.4.html"> 3.3.4 
    A Simulator for Digital Circuits
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-69">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                <a href="./3.3.5.html"> 3.3.5 
    Propagation of Constraints
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4 Concurrency: Time Is of the Essence</a>
                </h5>
              </div>

              <div id="sidebar-collapse-70" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.4.1.html"> 3.4.1 
    The Nature of Time in Concurrent Systems
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.4.2.html"> 3.4.2 
    Mechanisms for Controlling Concurrency
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-73">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5 Streams</a>
                </h5>
              </div>

              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.1.html"> 3.5.1 
    Streams Are Delayed Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-75">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                <a href="./3.5.2.html"> 3.5.2 
    Infinite Streams
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-76">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="false" aria-controls="sidebar-collapse-76">
                <a href="./3.5.3.html"> 3.5.3 
    Exploiting the Stream Paradigm
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./3.5.4.html"> 3.5.4 
    Streams and Delayed Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./3.5.5.html"> 3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-79">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4 Metalinguistic Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-79" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-80">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1 The Metacircular Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-80" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.1.html"> 4.1.1 
    The Core of the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.2.html"> 4.1.2 
    Representing
    
      <span style="color:green">Expressions</span>
      <span style="color:blue">Components</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.3.html"> 4.1.3 
    Evaluator Data Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-84">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                <a href="./4.1.4.html"> 4.1.4 
    Running the Evaluator as a Program
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.1.5.html"> 4.1.5 
    Data as Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.1.6.html"> 4.1.6 
    Internal
    
      <span style="color:green">Definitions</span>
      <span style="color:blue">Declarations</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.1.7.html"> 4.1.7 
    Separating Syntactic Analysis from Execution
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2 
    
      <span style="color:green">Variations on a Scheme:</span>
    
    Lazy Evaluation
</a>
                </h5>
              </div>

              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.2.1.html"> 4.2.1 
    Normal Order and Applicative Order
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.2.2.html"> 4.2.2 
    An Interpreter with Lazy Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.2.3.html"> 4.2.3 
    Streams as Lazy Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3 
    
      <span style="color:green">Variations on a Scheme:</span>
    
    Nondeterministic Computing
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.3.1.html"> 4.3.1 
    
      <span style="color:green">Amb and Search</span>
      <span style="color:blue">Search and amb</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.3.2.html"> 4.3.2 
    Examples of Nondeterministic Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.3.3.html"> 4.3.3 
    Implementing the
    
      <span style="color:green">Amb</span>
      <span style="color:blue">amb</span>
    
    Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-96">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4 Logic Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-96" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-97">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                <a href="./4.4.1.html"> 4.4.1 
    Deductive Information Retrieval
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-98">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="false" aria-controls="sidebar-collapse-98">
                <a href="./4.4.2.html"> 4.4.2 
    How the Query System Works
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./4.4.3.html"> 4.4.3 
    Is Logic Programming Mathematical Logic?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./4.4.4.html"> 4.4.4 
    Implementing the Query System
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-101">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5 Computing with Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-102">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1 Designing Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-102" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.1.html"> 5.1.1 
    A Language for Describing Register Machines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-104">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                <a href="./5.1.2.html"> 5.1.2 
    Abstraction in Machine Design
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.1.3.html"> 5.1.3 
    Subroutines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.1.4.html"> 5.1.4 
    Using a Stack to Implement Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.1.5.html"> 5.1.5 
    Instruction Summary
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-108">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2 A Register-Machine Simulator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-108" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-109">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="false" aria-controls="sidebar-collapse-109">
                <a href="./5.2.1.html"> 5.2.1 
    The Machine Model
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.2.2.html"> 5.2.2 
    The Assembler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.2.3.html"> 5.2.3 
    
      <span style="color:green">Generating Execution Procedures for Instructions</span>
      <span style="color:blue">Instructions and Their Execution Functions</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-112">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                <a href="./5.2.4.html"> 5.2.4 
    Monitoring Machine Performance
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3 Storage Allocation and Garbage Collection</a>
                </h5>
              </div>

              <div id="sidebar-collapse-113" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.3.1.html"> 5.3.1 
    Memory as Vectors
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.3.2.html"> 5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-116">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4 The Explicit-Control Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-116" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-117">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                <a href="./5.4.1.html"> 5.4.1 
    
      <span style="color:green">The Core of the Explicit-Control Evaluator</span>
      <span style="color:blue">The Dispatcher and Basic Evaluation</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.4.2.html"> 5.4.2 
    
      <span style="color:green">
        Sequence Evaluation and Tail Recursion
      </span>
      <span style="color:blue">
        Evaluating Function Applications
      </span>
        
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.4.3.html"> 5.4.3 
    
      <span style="color:green">
        Conditionals, Assignments and Definitions
      </span>
      <span style="color:blue">
        Blocks, Assignments, and Declarations
      </span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.4.4.html"> 5.4.4 
    Running the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-121">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5 Compilation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-121" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.1.html"> 5.5.1 
    Structure of the Compiler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.2.html"> 5.5.2 
    Compiling
    
      <span style="color:green">Expressions</span>
      <span style="color:blue">Components</span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.3.html"> 5.5.3 
    Compiling
    
      <span style="color:green">
	Combinations
      </span>
      <span style="color:blue">
	Applications and Return Statements
      </span>
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./5.5.4.html"> 5.5.4 
    Combining Instruction Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./5.5.5.html"> 5.5.5 
    An Example of Compiled Code
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-127">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-127" aria-expanded="false" aria-controls="sidebar-collapse-127">
                <a href="./5.5.6.html"> 5.5.6 
    Lexical Addressing
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-128">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-128" aria-expanded="false" aria-controls="sidebar-collapse-128">
                <a href="./5.5.7.html"> 5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-129">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-129" aria-expanded="false" aria-controls="sidebar-collapse-129">
                <a href="./references.html"> References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-130">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-130" aria-expanded="false" aria-controls="sidebar-collapse-130">
                <a href="./making-of.html"> <span class='webonly'>About the SICP JS Project</span></a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    2.3.3&nbsp;&nbsp;
    Example: Representing Sets
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  
  
  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    In the previous examples we built representations for two kinds of
    compound data objects: rational numbers and algebraic expressions.  In
    one of these examples we had the choice of simplifying (reducing) the
    expressions at either construction time or selection time, but other
    than that the choice of a representation for these structures in terms
    of lists was straightforward. When we turn to the representation of
    sets, the choice of a representation is not so obvious.  Indeed, there
    are a number of possible representations, and they differ
    significantly from one another in several ways.
  </p></div>
  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    Informally, a set is simply a collection of distinct objects.  To give
    a more precise definition we can employ the method of data
    abstraction.  That is, we define <QUOTE>set</QUOTE> by specifying the
    
    operations that are to be used on sets.  These are
    
      <span style="color:green"><kbd>union-set</kbd>,</span>
      <span style="color:blue"><kbd>union_set</kbd>,</span>
    
    
      <span style="color:green"><kbd>intersection-set</kbd>,</span>
      <span style="color:blue"><kbd>intersection_set</kbd>,
      </span>
    
    
      <span style="color:green"><kbd>element-of-set?</kbd>,</span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>,
      </span>
    
    and
    
      <span style="color:green"><kbd>adjoin-set</kbd>.</span>
      <span style="color:blue"><kbd>adjoin_set</kbd>.</span>
    
     
    
      <span style="color:green"><kbd>Element-of-set?</kbd></span>
      <span style="color:blue">
	The function <kbd>is_element_of_set</kbd> 
      </span>
    
    is a predicate that determines whether a given element is a member of a set.
     
    
      <span style="color:green">
      <kbd>Adjoin-set</kbd></span>
      <span style="color:blue">The function <kbd>adjoin_set</kbd>
      </span>
    
    takes an object and a set as arguments and returns a set that contains the
    elements of the original set and also the adjoined element.
     
    
      <span style="color:green"><kbd>Union-set</kbd></span>
      <span style="color:blue">The function <kbd>union_set</kbd>
      </span>
    
    computes the union of two sets, which is the set containing each element
    that appears in either argument.
     
    
      <span style="color:green"><kbd>Intersection-set</kbd></span>
      <span style="color:blue">The function
      <kbd>intersection_set</kbd>
      </span>
    
    computes the intersection of two sets, which is the set containing only
    elements that appear in both arguments.  From the viewpoint of data
    abstraction, we are free to design any representation that implements these
    operations in a way consistent with the interpretations given
    above.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
    
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    Sets as unordered lists
  </h2></div>

  
  

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    One way to represent a set is as a list of its elements in which no
    element appears more than once.  The empty set is represented by the
    empty list.  In this representation,
    
      <span style="color:green"><kbd>element-of-set?</kbd></span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>
      </span>
    
    is similar to the
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    
      <span style="color:green"><kbd>memq</kbd>
      of section&nbsp;<REF NAME="sec:quotation"><a class="superscript" id="2.3.3-sec-link-2.3.1" href="./2.3.1.html">2.3.1</a></REF>.	
      </span>
      <span style="color:blue"><kbd>member</kbd>
      of section&nbsp;<REF NAME="sec:strings"><a class="superscript" id="2.3.3-sec-link-2.3.1" href="./2.3.1.html">2.3.1</a></REF>.	
      </span>
    
    It uses
    
      <span style="color:green"><kbd>equal?</kbd></span>
      <span style="color:blue"><kbd>equal</kbd></span>
    
    instead of
    
      <span style="color:green"><kbd>eq?</kbd></span>
      <span style="color:blue"><kbd>===</kbd></span>
    
    so that the set elements need not be
    
      <span style="color:green">symbols:</span>
      <span style="color:blue">just numbers or strings:</span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (element-of-set? x set)
  (cond ((null? set) false)
        ((equal? x (car set)) true)
        (else (element-of-set? x (cdr set)))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function is_element_of_set(x, set) {
    return is_null(set) 
           ? false
           : equal(x, head(set))
           ? true
           : is_element_of_set(x, tail(set));
}
      </kbd></span></td></tr></table>
    
    Using this, we can write
    
      <span style="color:green"><kbd>adjoin-set</kbd>.</span>
      <span style="color:blue"><kbd>adjoin_set</kbd>.
      </span>
    
    If the object to be adjoined is already in the set, we just return the set.
    Otherwise, we use
    
      <span style="color:green"><kbd>cons</kbd></span>
      <span style="color:blue"><kbd>pair</kbd></span>
    
    to add the object to the list that represents the set:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (adjoin-set x set)
  (if (element-of-set? x set)
    set
    (cons x set)))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function adjoin_set(x, set) {
    return is_element_of_set(x, set)
           ? set
           : pair(x, set);
}
      </kbd></span></td></tr></table>
    
    For
    
      <span style="color:green">
      <kbd>intersection-set</kbd></span>
      <span style="color:blue"><kbd>intersection_set</kbd>
      </span>
    
    we can use a recursive strategy.  If we know how to form the intersection
    of <kbd>set2</kbd> and the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    of <kbd>set1</kbd>, we only need to decide whether to
    include the
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    of <kbd>set1</kbd> in this.  But this depends on whether
    
      <span style="color:green"><kbd>(car set1)</kbd></span>
      <span style="color:blue"><kbd>head(set1)</kbd></span>
    
    is also in <kbd>set2</kbd>.  Here is the resulting
    
      <span style="color:green">procedure:</span>
      <span style="color:blue">function:</span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (intersection-set set1 set2)
  (cond ((or (null? set1) (null? set2)) '())
        ((element-of-set? (car set1) set2)
          (cons (car set1)
            (intersection-set (cdr set1) set2)))
        (else (intersection-set (cdr set1) set2))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function intersection_set(set1, set2) {
    return is_null(set1) || is_null(set2)
           ? null
           : is_element_of_set(head(set1), set2)
           ? pair(head(set1), intersection_set(tail(set1), set2))
           : intersection_set(tail(set1), set2);
}
      </kbd></span></td></tr></table>
    
  </p></div>
  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    In designing a representation, one of the issues we should be concerned
    with is efficiency.  Consider the number of steps required by our set
    operations.  Since they all use
    
      <span style="color:green"><kbd>element-of-set?</kbd>,</span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>,
      </span>
    
    the speed of this operation has a major impact on the efficiency of the set
    implementation as a whole.  Now, in order to check whether an object is a
    member of a set,
    
      <span style="color:green"><kbd>element-of-set?</kbd></span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>
      </span>
    
    may have to scan the entire set. (In the worst case, the object turns out
    not to be in the set.)  Hence, if the set has
    $n$ elements,
    
      <span style="color:green"><kbd>element-of-set?</kbd></span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>
      </span>
    
    might take up to $n$ steps.  Thus, the number of
    steps required grows as $\Theta(n)$. The number
    of steps required by
    
      <span style="color:green">    
	<kbd>adjoin-set</kbd>,
      </span>
      <span style="color:blue">
	<kbd>adjoin_set</kbd>,
      </span>
    
    which uses
    this operation, also grows as $\Theta(n)$.  For
    
      <span style="color:green"><kbd>intersection-set</kbd>,</span>
      <span style="color:blue"><kbd>intersection_set</kbd>,
      </span>
    
    which does an
    
      <span style="color:green"><kbd>element-of-set?</kbd></span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>
      </span>
    
    check for each element of <kbd>set1</kbd>, the number of
    steps required grows as the product of the sizes of the sets involved, or
    $\Theta(n^{2})$ for two sets of size
    $n$.  The same will be true of
    
      <span style="color:green"><kbd>union-set</kbd>.</span>
      <span style="color:blue"><kbd>union_set</kbd>.</span>
    
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.63" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.63">Exercise 2.63 </a></b> 
  
    Implement the
    
    
      <span style="color:green"><kbd>union-set</kbd></span>
      <span style="color:blue"><kbd>union_set</kbd></span>
    
    operation for the unordered-list representation of sets.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_1_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_1_div"><SOLUTION>
    
      <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
	</kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function union_set(set1, set2) {
    return is_null(set1)
           ? set2
           : adjoin_set(head(set1), 
                        union_set(tail(set1), set2));
}
	</kbd></span></td></tr></table>
      
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.64" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.64">Exercise 2.64 </a></b> 
  
    We specified that a set would be represented as a list with no duplicates.
    Now suppose we allow duplicates.  For instance, the set
    $\{1,2,3\}$ could be represented as the list
    
      <span style="color:green"><kbd>(2 3 2 1 3 2 2)</kbd>.</span>
      <span style="color:blue">
	      <kbd>list(2, 3, 2, 1, 3,</kbd>
        <kbd>2, 2)</kbd>.
    </span>
    Design
    
      <span style="color:green">procedures</span>
      <span style="color:blue">functions</span>
    
    
      <span style="color:green"><kbd>element-of-set?</kbd>,</span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>,
      </span>
    
    
      <span style="color:green">
      <kbd>adjoin-set</kbd>,</span>
      <span style="color:blue"><kbd>adjoin_set</kbd>,</span>
    
    
      <span style="color:green"><kbd>union-set</kbd>,</span>
      <span style="color:blue"><kbd>union_set</kbd>,</span>
    
    and
    
      <span style="color:green"><kbd>intersection-set</kbd></span>
      <span style="color:blue"><kbd>intersection_set</kbd>
      </span>
    
    that operate on this representation.  How does the efficiency of each
    compare with the corresponding
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    for the non-duplicate representation?  Are there applications for which
    you would use this representation in preference to the non-duplicate one?
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_2_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_2_div"><SOLUTION>
    
      The functions <kbd>is_element_of_set</kbd> and
      <kbd>intersection_set</kbd> remain unchanged.
      Here is the new implementation of
      <kbd>adjoin_set</kbd> and
      <kbd>union_set</kbd>.
      <span style="color:blue"><kbd class='snippet'>
function adjoin_set(x, set) {
    return pair(x, set);
}
function union_set(set1, set2) {
    return append(set1, set2);
}
	</kbd></span>
      In the version with no duplicates, the required number of steps for
      <kbd>is_element_of_set</kbd> and 
      <kbd>adjoin_set</kbd> has an order of growth of
      $O(n)$, where $n$
      is the number of element occurrences in the given representation, and
      the required number of steps for
      <kbd>intersection_set</kbd> and 
      <kbd>union_set</kbd> has an order of growth of
      $O(n m)$, where $n$
      is the number of element occurrences in the representation of the first
      set and $m$ is the number of element
      occurrences in the representation of the second set. In the version that
      allows duplicates, the number of steps for
      <kbd>adjoin_set</kbd> shrinks to
      $O(n)$, and the number of steps for
      <kbd>union_set</kbd> shrinks to
      $O(n)$. However, note that the number of
      element occurrences may be much larger in the second version, because
      many duplicates may accumulate. For applications where duplicate elements
      are rare, the version that allows duplicates is preferrable.

    </SOLUTION></div></div>
</EXERCISE></div>

  
  

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
    
    Sets as ordered lists
  </h2></div>

  
  
  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    One way to speed up our set operations is to change the representation
    so that the set elements are listed in increasing order.  To do this,
    we need some way to compare two objects so that we can say which is
    bigger.  For example, we could compare
    
      <span style="color:green">
	symbols
      </span>
      <span style="color:blue">
	strings
      </span>
    
    lexicographically, or
    we could agree on some method for assigning a unique number to an
    object and then compare the elements by comparing the corresponding
    numbers.  To keep our discussion simple, we will consider only the
    case where the set elements are numbers, so that we can compare
    elements using <kbd>></kbd> and
    <kbd><</kbd>. We will represent a set of
    numbers by listing its elements in increasing order.  Whereas our
    first representation above allowed us to represent the set
    $\{1,3,6,10\}$ by listing the elements in any
    order, our new representation allows only the list
    
      <span style="color:green"><kbd>(1 3 6 10)</kbd>.</span>
      <span style="color:blue"><kbd>list(1, 3, 6, 10)</kbd>.
      </span>
  </p></div>
  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    One advantage of ordering shows up in
    
      <span style="color:green"><kbd>element-of-set?</kbd>:</span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>:
      </span>
    
    In checking for the presence of an item, we no longer have to scan the
    entire set.  If we reach a set element that is larger than the item we
    are looking for, then we know that the item is not in the set:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (element-of-set? x set)
  (cond ((null? set) false)
        ((= x (car set)) true)
        ((< x (car set)) false)
        (else (element-of-set? x (cdr set)))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function is_element_of_set(x, set) {
    return is_null(set) 
           ? false
           : x === head(set)
           ? true
           : x < head(set)
           ? false
           : // $\texttt{x > head(set)}$
             is_element_of_set(x, tail(set));
}
      </kbd></span></td></tr></table>
    
    How many steps does this save?  In the worst case, the item we are
    looking for may be the largest one in the set, so the number of steps
    is the same as for the unordered representation.  On the other hand,
    if we search for items of many different sizes we can expect that
    sometimes we will be able to stop searching at a point near the
    beginning of the list and that other times we will still need to
    examine most of the list.  On the average we should expect to have to
    examine about half of the items in the set.  Thus, the average
    number of steps required will be about $n/2$.
    This is still $\Theta(n)$ growth, but
    it does save us, on the average, a factor of 2 in number of steps over the
    previous implementation.
  </p></div>
  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    We obtain a more impressive speedup with
    
      <span style="color:green"><kbd>intersection-set</kbd>.</span>
      <span style="color:blue"><kbd>intersection_set</kbd>.
      </span>
    
    In the unordered representation this operation required
    $\Theta(n^2)$ steps, because we performed a
    complete scan of <kbd>set2</kbd> for each element of
    <kbd>set1</kbd>.  But with the ordered representation,
    we can use a more clever method.  Begin by comparing the initial elements,
    <kbd>x1</kbd> and
    <kbd>x2</kbd>, of the two sets.  If
    <kbd>x1</kbd> equals
    <kbd>x2</kbd>, then that gives an element of the
    intersection, and the rest of the intersection is the intersection of the
    
      <span style="color:green"><kbd>cdr</kbd>s</span>
      <span style="color:blue"><kbd>tail</kbd>s</span>
    
    of the two sets.  Suppose, however, that <kbd>x1</kbd>
    is less than <kbd>x2</kbd>. Since
    <kbd>x2</kbd> is the smallest element in
    <kbd>set2</kbd>, we can immediately conclude that
    <kbd>x1</kbd> cannot appear anywhere in
    <kbd>set2</kbd> and hence is not in the intersection.
    Hence, the intersection is equal to the intersection of
    <kbd>set2</kbd> with the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    of <kbd>set1</kbd>.  Similarly, if
    <kbd>x2</kbd> is less than
    <kbd>x1</kbd>, then the intersection is given by the
    intersection of <kbd>set1</kbd> with the
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    of <kbd>set2</kbd>.  Here is the
    
      <span style="color:green">procedure:</span>
      <span style="color:blue">function:</span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (intersection-set set1 set2)
  (if (or (null? set1) (null? set2))
    '()
    (let ((x1 (car set1)) (x2 (car set2)))
      (cond ((= x1 x2)
              (cons x1
                    (intersection-set (cdr set1)
                                      (cdr set2))))
            ((< x1 x2)
              (intersection-set (cdr set1) set2))
            ((< x2 x1)
              (intersection-set set1 (cdr set2)))))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function intersection_set(set1, set2) {
    if (is_null(set1) || is_null(set2)) {
        return null;
    } else {
        const x1 = head(set1);
        const x2 = head(set2);
        return x1 === x2
               ? pair(x1, intersection_set(tail(set1), tail(set2)))
               : x1 < x2 
               ? intersection_set(tail(set1), set2)
               : // $\texttt{x2 < x1}$
	         intersection_set(set1, tail(set2));
    }
}
      </kbd></span></td></tr></table>
    
    To estimate the number of steps required by this process, observe that at
    each step we reduce the intersection problem to computing intersections of
    smaller sets—removing the first element from
    <kbd>set1</kbd> or <kbd>set2</kbd>
    or both.  Thus, the number of steps required is at most the sum of the sizes
    of <kbd>set1</kbd> and <kbd>set2</kbd>,
    rather than the product of the sizes as with the unordered representation.
    This is $\Theta(n)$ growth rather than
    $\Theta(n^2)$—a considerable speedup,
    even for sets of moderate size.
  </p></div>
  
    <div class="permalink">
    <a name="ex_2.65" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.65">Exercise 2.65 </a></b> 
  
    Give an implementation of
    
     
    
      <span style="color:green"><kbd>adjoin-set</kbd></span>
      <span style="color:blue"><kbd>adjoin_set</kbd></span>
    
    using the ordered representation.  By analogy with
    
      <span style="color:green"><kbd>element-of-set?</kbd></span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>
      </span>
    
    show how to take advantage of the ordering to produce a
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    that requires on the average about half as many steps as with the unordered
    representation.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_3_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_3_div"><SOLUTION>
    
      <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
	</kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function adjoin_set(x, set) {
    return is_null(set)
           ? list(x)
           : x === head(set) 
           ? set
           : x < head(set)
           ? pair(x, set)
           : pair(head(set), 
                  adjoin_set(x, tail(set)));
}
	</kbd></span></td></tr></table></SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.66" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.66">Exercise 2.66 </a></b> 
  
    
    Give a $\Theta(n)$ implementation of
     
    
      <span style="color:green"><kbd>union-set</kbd></span>
      <span style="color:blue"><kbd>union_set</kbd></span>
    
    for sets represented as ordered lists.
      
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_4_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_4_div"><SOLUTION>
    
      <span style="color:blue"><kbd class='snippet'>
function union_set(set1, set2) {
    if (is_null(set1)) {
        return set2;
    } else if (is_null(set2)) {
        return set1;
    } else {
      const x1 = head(set1);
      const x2 = head(set2);
      return x1 === x2
             ? pair(x1, union_set(tail(set1),
                                  tail(set2)))
             : x1 < x2 
             ? pair(x1, union_set(tail(set1), set2))
             : pair(x2, union_set(set1, tail(set2)));
    }
}
	</kbd></span>
      <span style="color:blue"><kbd class='snippet'>
union_set(
   adjoin_set(10, adjoin_set(20, adjoin_set(30, null))),
   adjoin_set(10, adjoin_set(15, adjoin_set(20, null))));
	</kbd></span>
    </SOLUTION></div></div>
</EXERCISE></div>

  
  

  
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
    
    Sets as binary trees
  </h2></div>

  
  
  
  
  
  
  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    We can do better than the ordered-list representation by arranging the set
    elements in the form of a tree.  Each node of the tree holds one element of
    the set, called the <QUOTE>entry</QUOTE> at that node, and a link to each
    of two other (possibly empty) nodes.  The <QUOTE>left</QUOTE> link points to
    elements smaller than the one at the node, and the <QUOTE>right</QUOTE>
    link to elements greater than the one at the node.
    Figure&nbsp;<REF NAME="fig:binary-tree"><a class="superscript" id="2.3.3-fig-link-2.25" href="./2.3.3.html#fig_2.25">2.25</a></REF> shows some trees that represent
    the set $\{1,3,5,7,9,11\}$.  The same set may be
    represented by a tree in a number of different ways.  The only thing we
    require for a valid representation is that all elements in the left subtree
    be smaller than the node entry and that all elements in the right subtree be
    larger.
    <FIGURE>
      <img style="width: 40%" id="fig_2.25" src="../img_original/ch2-Z-G-51.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.3.3.html#fig_2.25">Figure 2.25 </a></b>Various binary trees that represent the set
      $\{ 1,3,5,7,9,11 \}$.</div></FIGURE>
  </p></div>
  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    The advantage of the tree representation is this: Suppose we want to check
    whether a number $x$ is contained in a set.  We
    begin by comparing $x$ with the entry in the
    top node.  If $x$ is less than this, we know
    that we need only search the left subtree; if $x$
    is greater, we need only search the right subtree.  Now, if the tree is
    <QUOTE>balanced,</QUOTE> each of these subtrees will be about half the size
    of the original.  Thus, in one step we have reduced the problem of
    searching a tree of size $n$ to searching a tree
    of size $n/2$.  Since the size of the tree is
    halved at each step, we should expect that the number of steps needed to
    search a tree of size $n$ grows as
    $\Theta(\log n)$.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a> For
    large sets, this will be a significant speedup over the previous
    representations.
  </p></div>
  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    We can represent trees by using
    
    lists.  Each node will be a list of
    three items: the entry at the node, the left subtree, and the right
    subtree.  A left or a right subtree of the empty list will indicate
    that there is no subtree connected there.  We can describe this
    representation by the following
    <span style="color:green">procedures</span><span style="color:blue">functions</span>:<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (entry tree) (car tree))

(define (left-branch tree) (cadr tree))

(define (right-branch tree) (caddr tree))

(define (make-tree entry left right)
  (list entry left right))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function entry(tree) { return head(tree); }

function left_branch(tree) { return head(tail(tree)); }

function right_branch(tree) { return head(tail(tail(tree))); }

function make_tree(entry, left, right) { 
    return list(entry, left, right);
}
      </kbd></span></td></tr></table>
    
  </p></div>
  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    Now we can write 
    
      <span style="color:green">the <kbd>element-of-set?</kbd> procedure</span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>
      </span>
    
    using the strategy described above:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (element-of-set? x set)
  (cond ((null? set) false)
        ((= x (entry set)) true)
        ((< x (entry set))
          (element-of-set? x (left-branch set)))
        ((> x (entry set))
          (element-of-set? x (right-branch set)))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function is_element_of_set(x, set) {
    return is_null(set) 
           ? false
           : x === entry(set) 
           ? true
           : x < entry(set)
           ? is_element_of_set(x, left_branch(set))
           : // $\texttt{x > entry(set)}$
             is_element_of_set(x, right_branch(set));
}
      </kbd></span></td></tr></table>
        
  </p></div>
  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    Adjoining an item to a set is implemented similarly and also requires
    $\Theta(\log n)$ steps.  To adjoin an item
    <kbd>x</kbd>, we compare
    <kbd>x</kbd> with the node entry to determine whether
    <kbd>x</kbd> should be added to the right or to the left
    branch, and having adjoined
    <kbd>x</kbd> to the appropriate branch we piece this
    newly constructed branch together with the original entry and the other
    branch.  If <kbd>x</kbd> is equal to the entry, we just
    return the node.  If we are asked to adjoin
    <kbd>x</kbd> to an empty tree, we generate a tree that
    has <kbd>x</kbd> as the entry and empty right and left
    branches.  Here is the
    
      <span style="color:green">procedure:</span>
      <span style="color:blue">function:</span>
    
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (adjoin-set x set)
  (cond ((null? set) (make-tree x '() '()))
        ((= x (entry set)) set)
        ((< x (entry set))
          (make-tree (entry set)
                     (adjoin-set x (left-branch set))
                     (right-branch set)))
        ((> x (entry set))
          (make-tree (entry set)
                     (left-branch set)
                     (adjoin-set x (right-branch set))))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function adjoin_set(x, set) {
    return is_null(set)
           ? make_tree(x, null, null)
           : x === entry(set)
           ? set
           : x < entry(set)
           ? make_tree(entry(set),
                       adjoin_set(x, left_branch(set)),
                       right_branch(set))
           : // $\texttt{x > entry(set)}$
             make_tree(entry(set),
                       left_branch(set),
                       adjoin_set(x, right_branch(set)));
}
      </kbd></span></td></tr></table>
  </p></div>
  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    The above claim that searching the tree can be performed in a logarithmic
    number of steps rests on the assumption that the tree is
    
    
    <QUOTE>balanced,</QUOTE> i.e., that the
    left and the right subtree of every tree have approximately the same
    number of elements, so that each subtree contains about half the
    elements of its parent.  But how can we be certain that the trees we
    construct will be balanced?  Even if we start with a balanced tree,
    adding elements with
    
      <span style="color:green"><kbd>adjoin-set</kbd></span>
      <span style="color:blue"><kbd>adjoin_set</kbd></span>
    
    may produce an unbalanced result.  Since the position of a newly adjoined
    element depends on how the element compares with the items already in the
    set, we can expect that if we add elements <QUOTE>randomly</QUOTE> the tree
    will tend to be balanced on the average.  But this is not a guarantee.  For
    example, if we start with an empty set and adjoin the numbers 1 through 7
    in sequence we end up with the highly unbalanced tree shown in
    figure&nbsp;<REF NAME="fig:unbalanced-tree"><a class="superscript" id="2.3.3-fig-link-2.26" href="./2.3.3.html#fig_2.26">2.26</a></REF>.  In this tree all the left
    subtrees are empty, so it has no advantage over a simple ordered list.  One
    way to solve this problem is to define an operation that transforms an
    arbitrary tree into a balanced tree with the same elements.  Then we can perform this transformation after every few
    
      <span style="color:green"><kbd>adjoin-set</kbd></span>
      <span style="color:blue"><kbd>adjoin_set</kbd></span>
    
    operations to keep our set in balance.  There are also other ways to solve
    this problem, most of which involve designing new data structures for which
    searching and insertion both can be done in
    $\Theta(\log n)$
    steps.<a class='superscript' id='footnote-link-4' href='#footnote-4'>[4]</a>
    <span style='color:blue'>
      
    <FIGURE>
      <img style="width: 30%" id="fig_2.26" src="../img_original/ch2-Z-G-52.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.3.3.html#fig_2.26">Figure 2.26 </a></b>
	Unbalanced tree produced by adjoining 1 through 7 in sequence.
      </div></FIGURE>
    </span>
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.67" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.67">Exercise 2.67 </a></b> 
  
    
    Each of the following two
    
      <span style="color:green">procedures</span>
      <span style="color:blue">functions</span>
    
    converts a
    
    
    binary tree to a list.
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (tree->list-1 tree)
  (if (null? tree)
    '()
    (append (tree->list-1 (left-branch tree))
            (cons (entry tree)
                  (tree->list-1 (right-branch tree))))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function tree_to_list_1(tree) {
    return is_null(tree)
           ? null
           : append(tree_to_list_1(left_branch(tree)),
                    pair(entry(tree),
                         tree_to_list_1(right_branch(tree))));
}
      </kbd></span></td></tr></table>
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (tree->list-2 tree)
  (define (copy-to-list tree result-list)
    (if (null? tree)
      result-list
      (copy-to-list (left-branch tree)
                    (cons (entry tree)
                          (copy-to-list (right-branch tree)
                                        result-list)))))
  (copy-to-list tree '()))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function tree_to_list_2(tree) {
    function copy_to_list(tree, result_list) {
        return is_null(tree)
               ? result_list
               : copy_to_list(left_branch(tree),
                              pair(entry(tree),
                                   copy_to_list(right_branch(tree),
                                                result_list)));
    }
    return copy_to_list(tree, null);
}
      </kbd></span></td></tr></table>
    <OL type="a">
      <LI>
        Do the two
        
	  <span style="color:green">procedures</span>
	  <span style="color:blue">functions</span>
	
        produce the same result for every tree? If not, how do the results
	differ?  What lists do the two
	
	  <span style="color:green">procedures</span>
	  <span style="color:blue">functions</span>
	
        produce for the trees in figure&nbsp;<REF NAME="fig:binary-tree"><a class="superscript" id="2.3.3-fig-link-2.25" href="./2.3.3.html#fig_2.25">2.25</a></REF>?
        
      </LI>
      <LI>
        Do the two
        
	  <span style="color:green">procedures</span>
	  <span style="color:blue">functions</span>
	
        have the same order of growth in the number of steps required to
	convert a balanced tree with $n$ elements
	to a list? If not, which one grows more slowly?
      </LI>
    </OL>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_5_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_5_div"><SOLUTION>
    
      <OL type="a">
	<LI>
	  The two procedures produce the same results. For the trees in
	  figure&nbsp;<REF NAME="fig:binary-tree"><a class="superscript" id="2.3.3-fig-link-2.25" href="./2.3.3.html#fig_2.25">2.25</a></REF>, the result will always
	  be <kbd>list(1, 3, 5, 7, 9, 11)</kbd>.
	</LI>
	<LI>
	  A balanced tree with $n$ elements has a
	  height of $O(\log{n})$ and
	  $O(n)$ nodes. To convert the tree into a
	  list using function
	  <kbd>tree_to_list_1</kbd>, we call 
	  <kbd>tree_to_list_1</kbd>
	  $O(n)$ times. We call
	  <kbd>append</kbd> at each node of the tree,  but at
	  each level, we apply <kbd>append</kbd>
	  with a combined $O(n)$ elements in the
	  first arguments. Thus, the run time of
	  <kbd>tree_to_list_1</kbd> has an order of
	  growth of $O(n\log{n})$. Instead of
	  <kbd>append</kbd>, the function
	  <kbd>tree_to_list_2</kbd> gets away with
	  calling <kbd>pair</kbd> at each node, and
	  thus <kbd>tree_to_list_2</kbd> has an order
	  of growth of $O(n)$.
	</LI>
      </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


    

    
    
    <div class="permalink">
    <a name="ex_2.68" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.68">Exercise 2.68 </a></b> 
  
    
    The following
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    
      <span style="color:green"><kbd>list->tree</kbd></span>
      <span style="color:blue"><kbd>list_to_tree</kbd>
      </span>
    
    
    
    converts an ordered list to a balanced binary tree.  The helper
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    
      <span style="color:green"><kbd>partial-tree</kbd></span>
      <span style="color:blue"><kbd>partial_tree</kbd>
      </span>
    
    takes as arguments an integer $n$ and list of
    at least $n$ elements and constructs a balanced
    tree containing the first $n$ elements of the
    list.  The result returned by
    
      <span style="color:green"><kbd>partial-tree</kbd></span>
      <span style="color:blue"><kbd>partial_tree</kbd>
      </span>
    
    is a pair (formed with
    
      <span style="color:green"><kbd>cons</kbd>)</span>
      <span style="color:blue"><kbd>pair</kbd>)</span>
    
    whose
    
      <span style="color:green"><kbd>car</kbd></span>
      <span style="color:blue"><kbd>head</kbd></span>
    
    is the constructed tree and whose
    
      <span style="color:green"><kbd>cdr</kbd></span>
      <span style="color:blue"><kbd>tail</kbd></span>
    
    is the list of elements not included in the tree.
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (list->tree elements)
  (car (partial-tree elements (length elements))))

(define (partial-tree elts n)
  (if (= n 0)
    (cons '() elts)
    (let ((left-size (quotient (- n 1) 2)))
      (let ((left-result (partial-tree elts left-size)))
        (let ((left-tree (car left-result))
              (non-left-elts (cdr left-result))
              (right-size (- n (+ left-size 1))))
          (let ((this-entry (car non-left-elts))
                (right-result (partial-tree (cdr non-left-elts)
                                            right-size)))
            (let ((right-tree (car right-result))
                  (remaining-elts (cdr right-result)))
              (cons (make-tree this-entry left-tree right-tree)
                    remaining-elts))))))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function list_to_tree(elements) {
    return head(partial_tree(elements, length(elements)));
}
function partial_tree(elts, n) {
    if (n === 0) {
        return pair(null, elts);
    } else {
        const left_size = math_floor((n - 1) / 2);
        const left_result = partial_tree(elts, left_size);
        const left_tree = head(left_result);
        const non_left_elts = tail(left_result);
        const right_size = n - (left_size + 1);
        const this_entry = head(non_left_elts);
        const right_result = partial_tree(tail(non_left_elts), right_size);
        const right_tree = head(right_result);
        const remaining_elts = tail(right_result);
        return pair(make_tree(this_entry, left_tree, right_tree),
                    remaining_elts);
    }
}
      </kbd></span></td></tr></table>
    
    <OL type="a">
      <LI>
        Write a short paragraph explaining as clearly as you can how
	
	  <span style="color:green"><kbd>partial-tree</kbd></span>
	  <span style="color:blue"><kbd>partial_tree</kbd>
	  </span>
	
	works.  Draw the tree produced by
	
	  <span style="color:green"><kbd>list->tree</kbd></span>
	  <span style="color:blue"><kbd>list_to_tree</kbd>
	  </span>
	
	for the list
	
	  <span style="color:green"><kbd>(1 3 5 7 9 11)</kbd>.</span>
	  <span style="color:blue">
	    <kbd>list(1, 3, 5, 7, 9, 11)</kbd>.
	  </span>
	
        
      </LI>
      <LI>
        What is the order of growth in the number of steps required by
	
	  <span style="color:green"><kbd>list->tree</kbd></span>
	  <span style="color:blue"><kbd>list_to_tree</kbd>
	  </span>
	
	to convert a list of $n$ elements?
      </LI>
    </OL>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_6_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_6_div"><SOLUTION>
    
      <OL type="a">
	<LI>
	  The function
	  <kbd>partial_tree(elts, n)</kbd>
	  returns a pair whose head is a balanced tree for the first
	  $\lfloor (n - 1) / 2 \rfloor$
	  elements of <kbd>elts</kbd>, and whose
	  tail is the list containing the remaining elements of
	  <kbd>elts</kbd>. It works by calling itself
	  recursively, to construct the left subtree and right subtree, and
	  then makes the tree, and the required return pair. Thus, the overall
	  function <kbd>list_to_tree</kbd> just needs
	  to call <kbd>partial_tree</kbd> with the
	  given list and its length, and return the head of the result.
	  <p></p>
	  The tree for
	  <kbd>list(1, 3, 5, 7, 9, 11)</kbd>
	  is the tree on the right in
	  figure&nbsp;<REF NAME="fig:binary-tree"><a class="superscript" id="2.3.3-fig-link-2.25" href="./2.3.3.html#fig_2.25">2.25</a></REF>.
	</LI>
	<LI>
	  The order of growth for the run time of function
	  <kbd>list_to_tree</kbd> is
	  $O(n)$ because for every node of
	  the result tree, only a constant amount of work is needed.
	</LI>
      </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.69" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.69">Exercise 2.69 </a></b> 
  
    Use the results of exercises&nbsp;<REF NAME="ex:tree-to-list"><a class="superscript" id="2.3.3-ex-link-2.67" href="./2.3.3.html#ex_2.67">2.67</a></REF>
    and&nbsp;<REF NAME="ex:list-to-tree"><a class="superscript" id="2.3.3-ex-link-2.68" href="./2.3.3.html#ex_2.68">2.68</a></REF> to give
    $\Theta(n)$ implementations of
    
    
      <span style="color:green"><kbd>union-set</kbd></span>
      <span style="color:blue"><kbd>union_set</kbd></span>
    
    and
    
    
      <span style="color:green"><kbd>intersection-set</kbd></span>
      <span style="color:blue"><kbd>intersection_set</kbd>
      </span>
    
    for sets implemented as (balanced) binary trees.<a class='superscript' id='footnote-link-5' href='#footnote-5'>[5]</a>
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_7_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_7_div"><SOLUTION>
    
      <span style="color:blue"><kbd class='snippet'>
function union_set_as_tree(set1, set2) {
    const list1 = tree_to_list_2(set1);
    const list2 = tree_to_list_2(set2);
    return list_to_tree(union_set(list1, list2));
}
	</kbd></span>
      
      <span style="color:blue"><kbd class='snippet'>
function intersection_set_as_tree(set1, set2) {
    const list1=tree_to_list_2(set1);
    const list2=tree_to_list_2(set2);
    return list_to_tree(intersection_set(list1, list2));
}
	</kbd></span>
      
    </SOLUTION></div></div>
</EXERCISE></div>

  
  

  
      <div class='permalink'>
        <a name='h4' class='permalink'></a><h2>
    
    Sets and information retrieval
  </h2></div>

  <div class='permalink'>
<a name='p14' class='permalink'></a><p>
    We have examined options for using lists to represent sets and have
    seen how the choice of representation for a data object can have a
    large impact on the performance of the programs that use the data.
    Another reason for concentrating on sets is that the techniques
    discussed here appear again and again in applications involving
    information retrieval.
  </p></div>
  <div class='permalink'>
<a name='p15' class='permalink'></a><p>
    
    
    Consider a data base containing a large number of individual records,
    
    such as the personnel files for a company or the transactions in an
    accounting system.  A typical data-management system spends a large
    amount of time accessing or modifying the data in the records and
    therefore requires an efficient method for accessing records.  This is
    done by identifying a part of each record to serve as an identifying
    
    <EM>key</EM>.  A key can be anything that uniquely identifies the
    record.  For a personnel file, it might be an employee's ID number.
    For an accounting system, it might be a transaction number.  Whatever
    the key is, when we define the record as a data structure we should
    include a
      
    <kbd>key</kbd> selector
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    that retrieves the key associated with a given record.
  </p></div>
  <div class='permalink'>
<a name='p16' class='permalink'></a><p>
    Now we represent the data base as a set of records. To locate the record
    with a given key we use a
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    <kbd>lookup</kbd>, which takes as arguments a key and a
    data base and which returns the record that has that key, or false if there
    is no such record.
    
      <span style="color:green"><kbd>Lookup</kbd></span>
      <span style="color:blue">The function <kbd>lookup</kbd>
      </span>
    
    is implemented in almost the same way as
    
      <span style="color:green"><kbd>element-of-set?</kbd>.</span>
      <span style="color:blue"><kbd>is_element_of_set</kbd>.
      </span>
    
    For example, if the set of records is implemented as an unordered list, we
    could use
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td class="meta" style = "color:grey; text-align: center">Original</td>
            <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
          </tr>
          <tr>
            <td><span style="color:green"><span style="color:green"><kbd class='snippet'>
(define (lookup given-key set-of-records)
  (cond ((null? set-of-records) false)
        ((equal? given-key (key (car set-of-records)))
          (car set-of-records))
        (else (lookup given-key (cdr set-of-records)))))
      </kbd></span></span>    </td>
            <td><span style="color:blue"><kbd class='snippet'>
function lookup(given_key, set_of_records) {
    return is_null(set_of_records)
           ? false
           : equal(given_key, key(head(set_of_records)))
           ? head(set_of_records)
           : lookup(given_key, tail(set_of_records));
}
      </kbd></span></td></tr></table>
    
  </p></div>
  <div class='permalink'>
<a name='p17' class='permalink'></a><p>
    Of course, there are better ways to represent large sets than as unordered
    lists.  Information-retrieval systems in which records have to be
    <QUOTE>randomly accessed</QUOTE> are typically implemented by a tree-based
    method, such as the binary-tree representation discussed previously.
    In designing such a system the methodology of data abstraction
    can be a great help.  The designer can create an initial implementation
    using a simple, straightforward representation such as unordered lists.
    This will be unsuitable for the eventual system, but it can be useful in
    providing a <QUOTE>quick and dirty</QUOTE> data base with which to test the
    rest of the system.  Later on, the data representation can be modified to
    be more sophisticated.  If the data base is accessed in terms of abstract
    selectors and constructors, this change in representation will not require
    any changes to the rest of the system.
  </p></div>
  
    <div class="permalink">
    <a name="ex_2.70" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.70">Exercise 2.70 </a></b> 
  
    Implement the <kbd>lookup</kbd>
    
      <span style="color:green">procedure</span>
      <span style="color:blue">function</span>
    
    for the case where the set of records is structured as a binary tree,
    ordered by the numerical values of the keys.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_42_8_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_42_8_div"><SOLUTION>
    
      <span style="color:blue"><kbd class='snippet'>
function lookup(given_key, tree_of_records) {
    if (is_null(tree_of_records)) {
        return null;
    } else {
        const this_entry = entry(tree_of_records);
        const this_key = key(this_entry);
        return given_key === this_key 
               ? this_entry
               : given_key < this_key
               ? lookup(given_key, 
                        left_branch(tree_of_records))
               : lookup(given_key, 
                        right_branch(tree_of_records));
    }
}
	</kbd></span>
      
    </SOLUTION></div></div>
</EXERCISE></div>

<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1' >[1] </a>
    <FOOTNOTE>
    If we want to be more formal, we can specify
    <QUOTE>consistent with the interpretations given above</QUOTE> to mean
    that the operations satisfy a collection of rules such as these:
    <UL>
      <LI>
	For any set <kbd>S</kbd> and any object
	<kbd>x</kbd>,
	
	  <span style="color:green">
	    <kbd>(element-of-set? x (adjoin-set x S))</kbd>
	  </span>
	  <span style="color:blue">
	    <kbd>is_element_of_set(x, adjoin_set(x, S))</kbd>
	  </span>
	
	is true (informally: <QUOTE>Adjoining an object to a set produces a
	set that contains the object</QUOTE>).
      </LI>
      <LI>
        For any sets <kbd>S</kbd> and
	<kbd>T</kbd> and any object
	<kbd>x</kbd>,
        
	  <span style="color:green">
	    <kbd>(element-of-set? x (union-set S T))</kbd>
	  </span>
	  <span style="color:blue">
	    <kbd>is_element_of_set(x, union_set(S, T))</kbd>
	  </span>
	
        is equal to
        
	  <span style="color:green">
	    <kbd>(or (element-of-set? x S) (element-of-set? x T)) 	    </kbd>
	  </span>
	  <span style="color:blue">
	    <kbd>is_element_of_set(x, S) || is_element_of_set(x, T) 	    </kbd>
	  </span>
	
        (informally: <QUOTE>The elements of
	
	  <span style="color:green"><kbd>(union-set S T)</kbd></span>
	  <span style="color:blue"><kbd>union_set(S, T)</kbd>
	  </span>
	
	are the elements that are in <kbd>S</kbd> or in
	<kbd>T</kbd></QUOTE>).
      </LI>
      <LI>
        For any object <kbd>x</kbd>,
        
	  <span style="color:green"><kbd>(element-of-set? x '())</kbd></span>
	  <span style="color:blue">
	    <kbd>is_element_of_set(x, null)</kbd>
	  </span>
	
        is false (informally:
	<QUOTE>No object is an element of the empty set</QUOTE>).
      </LI>
    </UL>
    </FOOTNOTE></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2' >[2] </a>
    <FOOTNOTE>
    Halving the size of
    the problem at each step is the distinguishing characteristic of
    
    logarithmic growth, as we saw with the fast-exponentiation algorithm of
    section&nbsp;<REF NAME="sec:exponentiation"><a class="superscript" id="2.3.3-sec-link-1.2.4" href="./1.2.4.html">1.2.4</a></REF> and the half-interval
    search method of
    section&nbsp;<REF NAME="sec:proc-general-methods"><a class="superscript" id="2.3.3-sec-link-1.3.3" href="./1.3.3.html">1.3.3</a></REF>.
    </FOOTNOTE></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3' >[3] </a>
    <FOOTNOTE>
    We
    are representing sets in terms of trees, and trees in terms of
    lists—in effect, a data abstraction built upon a data abstraction.
    We can regard the
    
      <span style="color:green">procedures</span>
      <span style="color:blue">functions</span>
    
    <kbd>entry</kbd>,
    
      <span style="color:green"><kbd>left-branch</kbd>,</span>
      <span style="color:blue"><kbd>left_branch</kbd>,</span>
    
    
      <span style="color:green"><kbd>right-branch</kbd>,</span>
      <span style="color:blue"><kbd>right_branch</kbd>,
      </span>
    
    and
    
      <span style="color:green"><kbd>make-tree</kbd></span>
      <span style="color:blue"><kbd>make_tree</kbd></span>
    
    as a way of isolating the abstraction of a <QUOTE>binary tree</QUOTE> from
    the particular way we might wish to represent such a tree in terms of list
    structure.
    </FOOTNOTE></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4' >[4] </a>
    <FOOTNOTE>
    Examples of such structures include
    
    
    
    
    <EM>B-trees</EM> and <EM>red-black trees</EM>.  There is a large literature
    on data structures devoted to this problem.  See 
    
    
    
    
    <CITATION>Cormen, Leiserson, Rivest, and Stein 2022</CITATION>.
    </FOOTNOTE></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5' >[5] </a>
    <FOOTNOTE>
    
    Exercises <REF NAME="ex:tree-to-list"><a class="superscript" id="2.3.3-ex-link-2.67" href="./2.3.3.html#ex_2.67">2.67</a></REF>–<REF NAME="ex:tree-ops"><a class="superscript" id="2.3.3-ex-link-2.69" href="./2.3.3.html#ex_2.69">2.69</a></REF>
    are due to
    
    Paul Hilfinger.
    </FOOTNOTE></div>
    
    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./2.3.2.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='44' href='./2.3.4.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      2.3.3&nbsp;&nbsp;
    Example: Representing Sets
  
    </div>
    <script> var chapter_id = 43; </script>
    <script> var chapter_path = "chapters/2.3.3.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>