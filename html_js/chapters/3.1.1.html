<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="3.1.1&nbsp;&nbsp;
    Local State Variables
  " />
    <title>
      3.1.1&nbsp;&nbsp;
    Local State Variables
  
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

     
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html"> 
        Foreword
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./foreword.html"> Foreword to SICP, 1984</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./prefaces03.html"> 
    Preface
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-4">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                <a href="./prefaces84.html"> 
    Preface to the First Edition of SICP, 1984
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-5">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="false" aria-controls="sidebar-collapse-5">
                <a href="./prefaces96.html"> 
    Preface to the Second Edition of SICP, 1996
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./acknowledgements.html"> 
Acknowledgments
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./see.html"> </a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-8">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="true" aria-controls="sidebar-collapse-8">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1 
    Building Abstractions with 
    
      
      Functions
    
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-8" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-9">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="true" aria-controls="sidebar-collapse-9">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="true" aria-controls="sidebar-collapse-9">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1 The Elements of Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-9" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.1.html"> 1.1.1 Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.2.html"> 1.1.2 Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.3.html"> 1.1.3 
    Evaluating
    
      
      Operator Combinations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.4.html"> 1.1.4 
    Compound 
    Functions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-14">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                <a href="./1.1.5.html"> 1.1.5 
    The Substitution Model for 
    
      
      
        Function
      
    
    Application
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.1.6.html"> 1.1.6 
    Conditional Expressions and Predicates
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.1.7.html"> 1.1.7 Example: Square Roots by Newton's Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.1.8.html"> 1.1.8 
    
      
      
        Functions
      
    
    as Black-Box Abstractions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-18">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2 
    
      
      Functions
    
    and the Processes They Generate
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-18" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.1.html"> 1.2.1 Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.2.html"> 1.2.2 Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-21">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                <a href="./1.2.3.html"> 1.2.3 Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.2.4.html"> 1.2.4 Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.2.5.html"> 1.2.5 Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.2.6.html"> 1.2.6 Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-25">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="true" aria-controls="sidebar-collapse-25">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="true" aria-controls="sidebar-collapse-25">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3 
        Formulating Abstractions with Higher-Order 
        
	  
	  Functions
	
      </a>
                </h5>
              </div>

              <div id="sidebar-collapse-25" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-26">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                <a href="./1.3.1.html"> 1.3.1 
    
      
      Functions
    
    as Arguments
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-27">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="false" aria-controls="sidebar-collapse-27">
                <a href="./1.3.2.html"> 1.3.2 
    
      
      Constructing Functions using Lambda Expressions
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./1.3.3.html"> 1.3.3 
    
      
    Functions
    as General Methods
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./1.3.4.html"> 1.3.4 
    
      
      Functions
    
    as Returned Values
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-30">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="true" aria-controls="sidebar-collapse-30">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2 Building Abstractions with Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-30" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-31">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="true" aria-controls="sidebar-collapse-31">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="true" aria-controls="sidebar-collapse-31">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1 Introduction to Data Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-31" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-32">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                <a href="./2.1.1.html"> 2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.1.2.html"> 2.1.2 
    Abstraction Barriers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.1.3.html"> 2.1.3 
    What Is Meant by Data?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.1.4.html"> 2.1.4 
    Extended Exercise: Interval Arithmetic
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-36">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="true" aria-controls="sidebar-collapse-36">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="true" aria-controls="sidebar-collapse-36">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2 Hierarchical Data and the Closure Property</a>
                </h5>
              </div>

              <div id="sidebar-collapse-36" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-37">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                <a href="./2.2.1.html"> 2.2.1 
    Representing Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.2.2.html"> 2.2.2 
    Hierarchical Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.2.3.html"> 2.2.3 
    Sequences as Conventional Interfaces
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.2.4.html"> 2.2.4 
    Example: A Picture Language
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-41">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="true" aria-controls="sidebar-collapse-41">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="true" aria-controls="sidebar-collapse-41">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3 Symbolic Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-41" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-42">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                <a href="./2.3.1.html"> 2.3.1 
    
      
      Strings
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.3.2.html"> 2.3.2 
    Example: Symbolic Differentiation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.3.3.html"> 2.3.3 
    Example: Representing Sets
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.3.4.html"> 2.3.4 
    Example: Huffman Encoding Trees
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4 Multiple Representations for Abstract Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.4.1.html"> 2.4.1 
    Representations for Complex Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.4.2.html"> 2.4.2 
    Tagged data
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.4.3.html"> 2.4.3 
    Data-Directed Programming and Additivity
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5 Systems with Generic Operations</a>
                </h5>
              </div>

              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-51">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="false" aria-controls="sidebar-collapse-51">
                <a href="./2.5.1.html"> 2.5.1 
    Generic Arithmetic Operations
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./2.5.2.html"> 2.5.2 
    Combining Data of Different Types
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./2.5.3.html"> 2.5.3 
    Example: Symbolic Algebra
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-54">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="true" aria-controls="sidebar-collapse-54">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3 Modularity, Objects, and State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-54" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1 Assignment and Local State</a>
                </h5>
              </div>

              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.1.1.html"> 3.1.1 
    Local State Variables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.1.2.html"> 3.1.2 
    The Benefits of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.1.3.html"> 3.1.3 
    The Costs of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-59">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="true" aria-controls="sidebar-collapse-59">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="true" aria-controls="sidebar-collapse-59">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2 The Environment Model of Evaluation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-59" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-60">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                <a href="./3.2.1.html"> 3.2.1 
    The Rules for Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.2.2.html"> 3.2.2 
    Applying Simple
    
      
      Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.2.3.html"> 3.2.3 
    Frames as the Repository of Local State
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.2.4.html"> 3.2.4 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-64">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="true" aria-controls="sidebar-collapse-64">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3 Modeling with Mutable Data</a>
                </h5>
              </div>

              <div id="sidebar-collapse-64" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.1.html"> 3.3.1 
    Mutable List Structure
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-66">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="false" aria-controls="sidebar-collapse-66">
                <a href="./3.3.2.html"> 3.3.2 
    Representing Queues
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.3.3.html"> 3.3.3 
    Representing Tables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.3.4.html"> 3.3.4 
    A Simulator for Digital Circuits
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-69">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                <a href="./3.3.5.html"> 3.3.5 
    Propagation of Constraints
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4 Concurrency: Time Is of the Essence</a>
                </h5>
              </div>

              <div id="sidebar-collapse-70" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.4.1.html"> 3.4.1 
    The Nature of Time in Concurrent Systems
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.4.2.html"> 3.4.2 
    Mechanisms for Controlling Concurrency
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-73">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5 Streams</a>
                </h5>
              </div>

              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.1.html"> 3.5.1 
    Streams Are Delayed Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-75">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                <a href="./3.5.2.html"> 3.5.2 
    Infinite Streams
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-76">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="false" aria-controls="sidebar-collapse-76">
                <a href="./3.5.3.html"> 3.5.3 
    Exploiting the Stream Paradigm
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./3.5.4.html"> 3.5.4 
    Streams and Delayed Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./3.5.5.html"> 3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-79">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="true" aria-controls="sidebar-collapse-79">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4 Metalinguistic Abstraction</a>
                </h5>
              </div>

              <div id="sidebar-collapse-79" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-80">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="true" aria-controls="sidebar-collapse-80">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1 The Metacircular Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-80" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.1.html"> 4.1.1 
    The Core of the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.2.html"> 4.1.2 
    Representing
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.3.html"> 4.1.3 
    Evaluator Data Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-84">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                <a href="./4.1.4.html"> 4.1.4 
    Running the Evaluator as a Program
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.1.5.html"> 4.1.5 
    Data as Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.1.6.html"> 4.1.6 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.1.7.html"> 4.1.7 
    Separating Syntactic Analysis from Execution
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2 
    
      
    
    Lazy Evaluation
</a>
                </h5>
              </div>

              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.2.1.html"> 4.2.1 
    Normal Order and Applicative Order
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.2.2.html"> 4.2.2 
    An Interpreter with Lazy Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.2.3.html"> 4.2.3 
    Streams as Lazy Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3 
    
      
    
    Nondeterministic Computing
  </a>
                </h5>
              </div>

              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.3.1.html"> 4.3.1 
    
      
      Search and amb
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.3.2.html"> 4.3.2 
    Examples of Nondeterministic Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.3.3.html"> 4.3.3 
    Implementing the
    
      
       
    
    Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-96">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="true" aria-controls="sidebar-collapse-96">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4 Logic Programming</a>
                </h5>
              </div>

              <div id="sidebar-collapse-96" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-97">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                <a href="./4.4.1.html"> 4.4.1 
    Deductive Information Retrieval
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-98">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="false" aria-controls="sidebar-collapse-98">
                <a href="./4.4.2.html"> 4.4.2 
    How the Query System Works
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./4.4.3.html"> 4.4.3 
    Is Logic Programming Mathematical Logic?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./4.4.4.html"> 4.4.4 
    Implementing the Query System
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-101">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5 Computing with Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-102">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="true" aria-controls="sidebar-collapse-102">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1 Designing Register Machines</a>
                </h5>
              </div>

              <div id="sidebar-collapse-102" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.1.html"> 5.1.1 
    A Language for Describing Register Machines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-104">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                <a href="./5.1.2.html"> 5.1.2 
    Abstraction in Machine Design
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.1.3.html"> 5.1.3 
    Subroutines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.1.4.html"> 5.1.4 
    Using a Stack to Implement Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.1.5.html"> 5.1.5 
    Instruction Summary
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-108">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="true" aria-controls="sidebar-collapse-108">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2 A Register-Machine Simulator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-108" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-109">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="false" aria-controls="sidebar-collapse-109">
                <a href="./5.2.1.html"> 5.2.1 
    The Machine Model
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.2.2.html"> 5.2.2 
    The Assembler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.2.3.html"> 5.2.3 
    
      
      Instructions and their Execution Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-112">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                <a href="./5.2.4.html"> 5.2.4 
    Monitoring Machine Performance
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3 Storage Allocation and Garbage Collection</a>
                </h5>
              </div>

              <div id="sidebar-collapse-113" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.3.1.html"> 5.3.1 
    Memory as Vectors
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.3.2.html"> 5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-116">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="true" aria-controls="sidebar-collapse-116">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4 The Explicit-Control Evaluator</a>
                </h5>
              </div>

              <div id="sidebar-collapse-116" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-117">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                <a href="./5.4.1.html"> 5.4.1 
    
      
      The Dispatcher and Basic Evaluation
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.4.2.html"> 5.4.2 
    
      
      
        Evaluating function applications
      
        
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.4.3.html"> 5.4.3 
    
      
      
        Blocks, Assignments, and Declarations
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.4.4.html"> 5.4.4 
    Running the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-121">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="true" aria-controls="sidebar-collapse-121">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5 Compilation</a>
                </h5>
              </div>

              <div id="sidebar-collapse-121" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.1.html"> 5.5.1 
    Structure of the Compiler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.2.html"> 5.5.2 
    Compiling
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.3.html"> 5.5.3 
    Compiling
    
      
      
	Applications and Return Statements
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./5.5.4.html"> 5.5.4 
    Combining Instruction Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./5.5.5.html"> 5.5.5 
    An Example of Compiled Code
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-127">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-127" aria-expanded="false" aria-controls="sidebar-collapse-127">
                <a href="./5.5.6.html"> 5.5.6 
    Lexical Addressing
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-128">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-128" aria-expanded="false" aria-controls="sidebar-collapse-128">
                <a href="./5.5.7.html"> 5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-129">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-129" aria-expanded="false" aria-controls="sidebar-collapse-129">
                <a href="./references.html"> References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-130">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-130" aria-expanded="false" aria-controls="sidebar-collapse-130">
                <a href="./making-of.html"> About the SICP JS Project</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    3.1.1&nbsp;&nbsp;
    Local State Variables
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  
  
  

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    To illustrate what we mean by having a computational object with
    
    time-varying state, let us model the situation of withdrawing money
    from a
    
    bank account.  We will do this using a
    
      
      function
    
    <kbd>withdraw</kbd>, which takes as argument an
    <kbd>amount</kbd> to be withdrawn.
    If there is enough money in the account to accommodate the withdrawal,
    then <kbd>withdraw</kbd> should return the balance
    remaining after the withdrawal.  Otherwise,
    <kbd>withdraw</kbd> should return the message
    <EM>Insufficient funds.</EM> For example, if we begin with \$100
    in the account, we should obtain the following sequence of responses
    using
    <kbd>withdraw</kbd>:
    <div class='snippet' id='javascript_55_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsBsBTAF1ACMBDPcgOwGMDQBeUDABlYG5cAzAVzqIBLAPbVQAd0FEAFgBMATuXEAKcgFth-IgEpQAb2ygjg7qGUUqdBgD5m6zdR37DR1xZr0mZSh4YBaUHstLldXeWJeeTF3KxCjAF9QAjwAZwYDUKNwokixACJIahTebm5BWkECR1A+alkUvLjQeOwW7EkZBSVlACYAVm0OIA')">withdraw(25);
</pre><pre class='prettyprintoutput'>
75</pre></div></div>
    <div class='snippet' id='javascript_55_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsBsBTAF1ACMBDPcgOwGMDQBeUDABlYG5cAzAVzqIBLAPbVQAd0FEAFgBMATuXEAKcgFth-IgEpQAb2ygjg7qGUUqdBgD5m6zdR37DR1xZr0mZSh4YBaUHstLldXeWJeeTF3KxCjAF9QAjwAZwYDUKNwokixACJIahTebm5BWkECR1A+alkUvLjQeOwW7EkZBSVlACYAVm0udqk5RRV+waA')">withdraw(25);
</pre><pre class='prettyprintoutput'>
50</pre></div></div>
    <div class='snippet' id='javascript_55_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsBsBTAF1ACMBDPcgOwGMDQBeUDABlYG5cAzAVzqIBLAPbVQAd0FEAFgBMATuXEAKcgFth-IgEpQAb2ygjg7qGUUqdBgD5m6zdR37DR1xZr0mZSh4YBaUHstLldXeWJeeTF3KxCjAF9QAjwAZwYDUKNwokixACJIahTebm5BWkECR1A+alkUvLjQeOwW7EkZBSVlACYAVm0udqk5RRV+wdwO0e6ANlZBoA')">withdraw(60);
</pre><pre class='prettyprintoutput'>
"Insufficient funds"</pre></div></div>
    <div class='snippet' id='javascript_55_4_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsBsBTAF1ACMBDPcgOwGMDQBeUDABlYG5cAzAVzqIBLAPbVQAd0FEAFgBMATuXEAKcgFth-IgEpQAb2ygjg7qGUUqdBgD5m6zdR37DR1xZr0mZSh4YBaUHstLldXeWJeeTF3KxCjAF9QAjwAZwYDUKNwokixACJIahTebm5BWkECR1A+alkUvLjQeOwW7EkZBSVlACYAVm0udqk5RRV+wdwO0e6ANlZJ4c6x5QwBjiA')">withdraw(15);
</pre><pre class='prettyprintoutput'>
35</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    Observe that the expression
    
      
      <kbd>withdraw(25)</kbd>,
      
    
    evaluated twice, yields different values.  This is a new kind of
    behavior for a
    
      
    function.
    Until now, all our
    
      
      JavaScript functions
    
    could be viewed as specifications for computing mathematical functions.
    A call to a
    
      
      function
    
    computed the value of the function applied to the given arguments,
    and two calls to the same
    
      
      function
    
    with the same arguments always produced the same
    result.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
  </p></div>

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    
      
      
	So far, all our names have been <EM>immutable</EM>. 
	When a function was applied, the values that its parameters
	referred to never changed, and once a declaration was evaluated,
	the declared name never changed its value.
        To implement functions like
	<kbd>withdraw</kbd>, we introduce
	
	
	
	<EM>variable declarations</EM> using the keyword
	
	
	<kbd>let</kbd>, in addition to constant
	declarations that use the keyword
	<kbd>const</kbd>.
        After declaring a variable
	<kbd>balance</kbd> for the balance of money
	in the account, we can define
	<kbd>withdraw</kbd> as a function that accesses
	<kbd>balance</kbd>.
      
    
    The <kbd>withdraw</kbd>
    
      
      function
    
    checks to see if <kbd>balance</kbd> is at least as large
    as the requested <kbd>amount</kbd>.  If so,
    <kbd>withdraw</kbd> decrements
    <kbd>balance</kbd> by <kbd>amount</kbd>
    and returns the new value of <kbd>balance</kbd>. Otherwise,
    <kbd>withdraw</kbd> returns the <EM>Insufficient funds</EM>
    message. Here are the
    
      
      declarations
    
    of <kbd>balance</kbd> and
    <kbd>withdraw</kbd>:
    <div class='snippet' id='javascript_55_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsBsBTAF1ACMBDPcgOwGMDQBeUDABlYG5cAzAVzqIBLAPbVQAd0FEAFgBMATuXEAKcgFth-IgEpQAb2ygjg7qGUUqdBgD5m6zdR37DR1xZr0mZSh4YBaUHstLldXeWJeeTF3KxCjAF9QAjwAZwYDUKNwokixACJIahTebm5BWkECR1A+alkUvLjQeOwW7EkZBSVlACYAVm0OIA')">let balance = 100;

function withdraw(amount) {
   if (balance >= amount) {
      balance = balance - amount;
      return balance;
   } else {
      return "Insufficient funds";
   }
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    Decrementing <kbd>balance</kbd> is accomplished by the 
    
      
    expression statement
    <div class='snippet' id='javascript_55_6_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
balance = balance - amount;</pre></div></div>
    
      
      
        The syntax of
	
	
	
	
	<EM>assignment</EM> expressions is
    <kbd class='snippet'>
$name$ = $new$-$value$
      </kbd>
      
    
    Here
    
      
      
	$name$
	has been declared with
	
	<kbd>let</kbd> or
	as a
	
	function parameter
      
    
    and
    
      
      
	$new$-$value$
      
    
    is any expression.  
    
      
      The assignment
     
    changes
    
      
      
	$name$
      
    
    so that its value is the
    result obtained by evaluating
    
      
      
	$new$-$value$.
      
    
    In the case at hand, we are changing <kbd>balance</kbd> so
    that its new value will be the result of subtracting
    <kbd>amount</kbd> from the previous value of
    <kbd>balance</kbd>.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    
      
      
	The function <kbd>withdraw</kbd> also uses a
	
	<EM>sequence of statements</EM> to cause two statements to be evaluated
	in the case where the <kbd>if</kbd> test is
	true: first decrementing  <kbd>balance</kbd>
	and then returning the value of
	<kbd>balance</kbd>.  
	In general, executing a sequence
	<kbd class='snippet'>
$stmt$$_{1}$ $stmt$$_{2} \ldots$$stmt$$_{n}$
          </kbd>
        causes the statements $stmt$$_{1}$
	through
	$stmt$$_{n}$ to be evaluated in
	sequence.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
	
      
    
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    Although <kbd>withdraw</kbd> works as desired, the
    variable <kbd>balance</kbd> presents a problem.  As
    specified above, <kbd>balance</kbd> is a name defined
    in the
    
      
      program
       environment and is freely accessible to be examined or
      modified by any
      
	
	function.
      
      It would be much better if we could somehow make
      <kbd>balance</kbd> internal to
      <kbd>withdraw</kbd>, so that
      <kbd>withdraw</kbd> would be the only
      
	
	function
      
      that could access <kbd>balance</kbd> directly and
      any other
      
	
	function
      
      could access <kbd>balance</kbd> only indirectly
      (through calls to <kbd>withdraw</kbd>).  This would
      more accurately model the notion that
      <kbd>balance</kbd> is a local state variable used by
      <kbd>withdraw</kbd> to keep track of the state of the
      account.
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    We can make <kbd>balance</kbd> internal to
    <kbd>withdraw</kbd> by rewriting the definition as
    follows:
    
    <div class='snippet' id='javascript_55_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDmwwAGMQAoAlKADe2UEtAAbFmVAAjBioakWoALyhxYgNyLlA9QQG0GdKsQ2GAfPMvLlFPKEnbdfVBXYwcnIjJZBS8Y5QC9EgNjeKCAWlAw5wtY2OsyW1oUxOycgF9QFhUAZwNonK88gtAAIkgiKoI8PAoSChYI0EIiPirmktjSz1BSi0mSGiqNIhYRLl5BYSN6ZnY1-iERUxkLbGXV7n3hSQA2MWkLM84LjY4bu7MgA')">function make_withdraw_100() {
    let balance = 100;
    return amount => {
        if (balance >= amount) {
            balance = balance - amount;
            return balance;
        } else {
            return "Insufficient funds";
        }
    };
}
const new_withdraw = make_withdraw_100();
</pre></div></div>
    
      
      
        What we have done here is use <kbd>let</kbd>
	to establish an environment with a local variable
	<kbd>balance</kbd>, bound to the initial
	value 100. Within this local environment, we use a lambda
	expression<a class='superscript' id='footnote-link-4' href='#footnote-4'>[4]</a> to
	create a function that takes <kbd>amount</kbd>
	as an argument and behaves like our previous
	<kbd>withdraw</kbd> function.  This
	function—returned as the result of evaluating the body of the
	<kbd>make_withdraw_100</kbd>
	function—behaves in precisely the same way as
	<kbd>withdraw</kbd>, but its variable
	<kbd>balance</kbd> is not accessible by any
	other function.<a class='superscript' id='footnote-link-5' href='#footnote-5'>[5]</a>
      
    
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    Combining 
    
      
      
        assignments with variable declarations
      
    
    is the general programming
    technique we will use for constructing computational objects with
    local state.  Unfortunately, using this technique raises a serious
    problem: When we first introduced
    
      
      functions,
    
    we also introduced the substitution model of evaluation
    (section&nbsp;<REF NAME="sec:substitution-model"><a class="superscript" id="3.1.1-sec-link-1.1.5" href="./1.1.5.html">1.1.5</a></REF>) to provide an
    interpretation of what
    
      
      function
    
    application means.  We said that applying a
    
      
      function
    
    should be interpreted as evaluating the body of the
    
      
      function
    
    with the
    
      
    
    parameters replaced by their values.  The trouble is that,
    as soon as we introduce assignment into our language, substitution is no
    longer an adequate model of
    
      
      function
    
    application.  (We will see why this is so in
    section&nbsp;<REF NAME="sec:costs-of-assignment"><a class="superscript" id="3.1.1-sec-link-3.1.3" href="./3.1.3.html">3.1.3</a></REF>.)  As a consequence, we
    technically have at this point no way to understand why the
    
      
      
	<kbd>make_withdraw_100</kbd>
      
    
    
      
      function
    
    behaves as claimed above.  In order to really understand a
    
      
      function
    
    such as
    
      
      
	<kbd>make_withdraw_100</kbd>,
      
    
    we will need to develop a new model of
    
      
      function
    
    application.  In section&nbsp;<REF NAME="sec:environment-model"><a class="superscript" id="3.1.1-sec-link-3.2" href="./3.2.html">3.2</a></REF> we will
    introduce such a model, together with an explanation of 
    
      
      assignments and variable declarations.
    
    First, however, we examine some variations on the theme established by
    
      
      <kbd>make_withdraw_100</kbd>.
      
    
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    
      
	Parameters of functions as well as names declared with
	<kbd>let</kbd> are
	
	variables.
      
    
    The following
    
      
      
	function, <kbd>make_withdraw</kbd>,
      
    
    creates <QUOTE>withdrawal processors.</QUOTE>
    The  parameter
    <kbd>balance</kbd> in
    
      
      <kbd>make_withdraw</kbd>
      
    
    specifies the initial amount of money in the
    account.<a class='superscript' id='footnote-link-6' href='#footnote-6'>[6]</a>
    <div class='snippet' id='javascript_55_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDgAoARgwA2DUiwCUoAN7ZQq0AJZkCA2gzpViZUAF4AfEpVqrFPKHFSZJFqFPHQeg0TILlVv2olpWRNQQMdnAFp3fUMAbkt-Kw0tHVCHWXjE0ABfUBZJAGdnXyy1ZO1aACJIIgKCPDwKEgoWL1BCIj4CyszE7ISc+P7sEhoCowB1DBDGVk5ufiFRDAAGFbl40drJgCYZ5nYuXkFhEVX12KA')">function make_withdraw(balance) {
    return amount => {
        if (balance >= amount) {
            balance = balance - amount;
            return balance;
        } else {
            return "Insufficient funds";
        }
    };
}
</pre></div></div>
    
      
      
	The function <kbd>make_withdraw</kbd>
      
    
    can be used as follows to create two objects <kbd>W1</kbd>
    and <kbd>W2</kbd>:
    <div class='snippet' id='javascript_55_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDgAoARgwA2DUiwCUoAN7ZQq0AJZkCA2gzpViZUAF4AfEpVqrFPKHFSZJFqFPHQeg0TILlVv2olpWRNQQMdnAFp3fUMAbkt-Kw0tHVCHWXjE0ABfUBZJAGdnXyy1ZO1aACJIIgKCPDwKEgoWL1BCIj4CyszE7ISc+P7sEhoCowB1DBDGVk5ufiFRDAAGFbl40drJgCYZ5nYuXkFhEVX12KA')">const W1 = make_withdraw(100);
const W2 = make_withdraw(100);
</pre></div></div>
    <div class='snippet' id='javascript_55_10_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDgAoARgwA2DUiwCUoAN7ZQq0AJZkCA2gzpViZUAF4AfEpVqrFPKHFSZJFqFPHQeg0TILlVv2olpWRNQQMdnAFp3fUMAbkt-Kw0tHVCHWXjE0ABfUBZJAGdnXyy1ZO1aACJIIgKCPDwKEgoWL1BCIj4CyszE7ISc+P7sEhoCowB1DBDGVk5ufiFRDAAGFbl40drJgCYZ5nYuXkFhEVX1+OwpkQBWC6A')">W1(50);
</pre><pre class='prettyprintoutput'>
50</pre></div></div>
    <div class='snippet' id='javascript_55_11_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDgAoARgwA2DUiwCUoAN7ZQq0AJZkCA2gzpViZUAF4AfEpVqrFPKHFSZJFqFPHQeg0TILlVv2olpWRNQQMdnAFp3fUMAbkt-Kw0tHVCHWXjE0ABfUBZJAGdnXyy1ZO1aACJIIgKCPDwKEgoWL1BCIj4CyszE7ISc+P7sEhoCowB1DBDGVk5ufiFRDAAGFbl40drJgCYZ5nYuXkFhEVX1+OwpkQBWC9wJnZEAdgugA')">W2(70);
</pre><pre class='prettyprintoutput'>
30</pre></div></div>
    <div class='snippet' id='javascript_55_12_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDgAoARgwA2DUiwCUoAN7ZQq0AJZkCA2gzpViZUAF4AfEpVqrFPKHFSZJFqFPHQeg0TILlVv2olpWRNQQMdnAFp3fUMAbkt-Kw0tHVCHWXjE0ABfUBZJAGdnXyy1ZO1aACJIIgKCPDwKEgoWL1BCIj4CyszE7ISc+P7sEhoCowB1DBDGVk5ufiFRDAAGFbl40drJgCYZ5nYuXkFhEVX1+OwpkQBWC9wJnZEAdnurp4AWC6A')">W2(40);
</pre><pre class='prettyprintoutput'>
"Insufficient funds"</pre></div></div>
    <div class='snippet' id='javascript_55_13_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQHcKyALAEwBODDgAoARgwA2DUiwCUoAN7ZQq0AJZkCA2gzpViZUAF4AfEpVqrFPKHFSZJFqFPHQeg0TILlVv2olpWRNQQMdnAFp3fUMAbkt-Kw0tHVCHWXjE0ABfUBZJAGdnXyy1ZO1aACJIIgKCPDwKEgoWL1BCIj4CyszE7ISc+P7sEhoCowB1DBDGVk5ufiFRDAAGFbl40drJgCYZ5nYuXkFhEVX1+OwpkQBWC9wJnZEAdnurp4AWN+uvjaA')">W1(40);
</pre><pre class='prettyprintoutput'>
10</pre></div></div>
    Observe that <kbd>W1</kbd> and 
    <kbd>W2</kbd> are completely independent objects, each
    with its own local state variable <kbd>balance</kbd>.
    Withdrawals from one do not affect the other.
  </p></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    We can also create objects that handle
    
    deposits as well as
    withdrawals, and thus we can represent simple bank accounts.  Here is
    a
    
      
      function
    
    that returns a <QUOTE>bank-account object</QUOTE> with a specified initial
    balance:
    <div class='snippet' id='javascript_55_14_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEhbPnsNW+PgYAAMepFuDVfABMOBamFfAArIb4kA')">function make_account(balance) {
    function withdraw(amount) {
        if (balance >= amount) {
            balance = balance - amount;
            return balance;
        } else {
            return "Insufficient funds";
        }
    }
    function deposit(amount) {
        balance = balance + amount;
        return balance;
    }
    function dispatch(m) {
        return m === "withdraw"
               ? withdraw
               : m === "deposit"
               ? deposit
               : error(m, "unknown request -- make_account");
    }
    return dispatch;
}
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    Each call to <kbd>make_account</kbd> sets up an
    environment with a local state variable <kbd>balance</kbd>.
    Within this environment, <kbd>make_account</kbd> defines
    
      
      functions
    
    <kbd>deposit</kbd> and
    <kbd>withdraw</kbd> that access
    <kbd>balance</kbd> and an additional
    
      
      function
    
    <kbd>dispatch</kbd>
    that takes a <QUOTE>message</QUOTE> as input and returns one of the two local
    
      
      functions.
    
    The <kbd>dispatch</kbd>
    
      
      function
    
    itself is returned as the value that represents the bank-account object.
    This is precisely the 
    
    <EM>message-passing</EM> style of programming that we saw in
    section&nbsp;<REF NAME="sec:data-directed"><a class="superscript" id="3.1.1-sec-link-2.4.3" href="./2.4.3.html">2.4.3</a></REF>, although here we are using
    it in conjunction with the ability to modify local variables.
  </p></div>

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    
      
      
	The function
	<kbd>make_account</kbd>
      
    
    can be used as follows:
    <div class='snippet' id='javascript_55_15_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEhbPnsNW+PgYAAMepFQA')">const acc = make_account(100);
</pre></div></div>
    <div class='snippet' id='javascript_55_16_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEhbPnsNW+PgYAAMepFuDVfABMOBamFfAArIb4kA')">acc("withdraw")(50);
</pre><pre class='prettyprintoutput'>
50</pre></div></div>
    <div class='snippet' id='javascript_55_17_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEhbPnsNW+PgYAAMepFuDVfABMOBamFfAArIbEtgTWagXCrQA2O1AA')">acc("withdraw")(60);
</pre><pre class='prettyprintoutput'>
"Insufficient funds"</pre></div></div>
    <div class='snippet' id='javascript_55_18_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEhbPnsNW+PgYAAMepFuDVfABMOBamFfAArIbEtgTWagXCrQA2O3Grim-GYq0AFjtQA')">acc("deposit")(40);
</pre><pre class='prettyprintoutput'>
90</pre></div></div>
    <div class='snippet' id='javascript_55_19_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEhbPnsNW+PgYAAMepFuDVfABMOBamFfAArIbEtgTWagXCrQA2O3Grim-GYq0AFg9Dq9TthIIkfHdIqAA')">acc("withdraw")(60);
</pre><pre class='prettyprintoutput'>
30</pre></div></div>
    Each call to <kbd>acc</kbd> returns the locally defined
    <kbd>deposit</kbd> or <kbd>withdraw</kbd>
    
      
      function,
    
    which is then applied to the specified <kbd>amount</kbd>.
    As was the case with
    
      
      
	<kbd>make_withdraw</kbd>, another
	call to <kbd>make_account</kbd>
      
    
    <div class='snippet' id='javascript_55_20_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwCUoAN7ZQ80IVKUaoAO4UyACwAmAJwZq+DOjyJkpshddAU8oQSLEkWoAHwBeUCbMWZcm0ChUXFQL2DnVwBab1NeAG4AwOs9FjICPVoI8UTk0ABfUBZhAGdXKzyFVPTM0AAiSCISgjw8ChIKFnNFYh0Sutzk-KSCkaVyalodFgAHKhLNYzjzSxHrbJcw0A3XAGpY30HA6oyspxyR4etxlSmKEpmGMhItPjpVvJPaujCPLzqNNp9IY6mtKqAAPzqTS6AxqMGVABc9F+-2mcwWZFB4JsUPR800CLyyJYej0VD0bwANPViEwiFQ1LRUgBHAgsEpkUBRGKMVgcLi+OoSI6jFJpU6gHT3R7PLSJYbYbhNLmcEgAJi2fPYat8fAwAAYDSKgA')">const acc2 = make_account(100);
</pre></div></div>
    will produce a completely separate account object, which maintains its
    own local <kbd>balance</kbd>.
  </p></div>

  
    <div class="permalink">
    <a name="ex_3.1" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.1">Exercise 3.1 </a></b> 
  
    
    An 
    
    <EM>accumulator</EM> is a
    
      
      function
    
    that is called repeatedly with a single numeric argument and accumulates its
    arguments into a sum. Each time it is called, it returns the currently
    accumulated sum. Write a
    
      
      function
    
     
    
      
      <kbd>make_accumulator</kbd>
      
    
    that generates accumulators, each maintaining an independent sum.  The
    input to 
    
      
      <kbd>make_accumulator</kbd>
      
    
    should specify the initial value of the sum; for example
    <div class='snippet' id='javascript_55_21_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6RAxtQK4F0A2RALgPYBOoHoARmVAB3TgEtWrMgDt+AT1ABnVnQAm01guzV2UpaCKgAvIVKUa9Riw6cAFAFYAlAG4gA')">const a = make_accumulator(5);
</pre></div></div>
    <div class='snippet' id='javascript_55_22_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6RAxtQK4F0A2RALgPYBOoHoARmVAB3TgEtWrMgDt+AT1ABnVnQAm01guzV2UpaCKgAvIVKUa9Riw6cAFAFYAlAG5cRGxgAMzoA')">a(10);
</pre><pre class='prettyprintoutput'>
15</pre></div></div>
    <div class='snippet' id='javascript_55_23_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6RAxtQK4F0A2RALgPYBOoHoARmVAB3TgEtWrMgDt+AT1ABnVnQAm01guzV2UpaCKgAvIVKUa9Riw6cAFAFYAlAG5cRGxgAMz1+69OgA')">a(10);
</pre><pre class='prettyprintoutput'>
25</pre></div></div>
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_55_1_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_55_1_div"><SOLUTION>
    
      <div class='snippet' id='javascript_55_24_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJILoIBsGZKgCcAFN2HCWRMgEpQAb2ygVoQqUo1QDACY7RDYQHN5S1edASpM0AF5LBSdLKgA1NuMBuZRZVSyjrRWzt7mAL4+fiwBwrS6Ot4R2CQ0AM4uDHb0zOyc3LwCQmIArLLeDKIYAAxl2BXVZUA')">function make_accumulator(current) {
    function add(arg) {
        current = current + arg;
        return current;
    }
    return add;
}
</pre></div></div>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.2" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.2">Exercise 3.2 </a></b> 
  
    
    In software-testing applications, it is useful to be able to count the
    number of times a given
    
      
      function
    
    is called during the course of a computation.  Write a
    
      
      function
    
     
    
    
    
      
      <kbd>make_monitored</kbd>
      
    
    that takes as input a
    
      
      function,
    
    <kbd>f</kbd>, that itself takes one input.  The result
    returned by 
    
      
      <kbd>make_monitored</kbd>
      
    
    is a third
    
      
      function,
    
    say <kbd>mf</kbd>, that keeps track of the number of times
    it has been called by maintaining an internal counter. If the input to
    <kbd>mf</kbd> is the
    
      
      string <kbd>"how many calls"</kbd>,
      
    
    then <kbd>mf</kbd> returns the value of the counter.  If
    the input is the 
    
      
      string <kbd>"reset count"</kbd>,
      
    
    then <kbd>mf</kbd> resets the counter to zero.  For any
    other input, <kbd>mf</kbd> returns the result of calling
    <kbd>f</kbd> on that input and increments the counter.
    For instance, we could make a monitored version of the
    <kbd>sqrt</kbd>
    
      
      function:
    
    <div class='snippet' id='javascript_55_25_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6BA9gHYCWALtQE5kAmoAZgK60DGjenVDNQAIzKgA7iyaMytCQE9QAZ0Y92ixmuz86G9aAC8hUpRoNmbdgApijABYU1ARxaMAlAG4gA')">const s = make_monitored(math_sqrt);
</pre></div></div>
    <div class='snippet' id='javascript_55_26_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6BA9gHYCWALtQE5kAmoAZgK60DGjenVDNQAIzKgA7iyaMytCQE9QAZ0Y92ixmuz86G9aAC8hUpRoNmbdgApijABYU1ARxaMAlAG5cauwwABiDfIA')">s(100);
</pre><pre class='prettyprintoutput'>
10</pre></div></div>
    <div class='snippet' id='javascript_55_27_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6BA9gHYCWALtQE5kAmoAZgK60DGjenVDNQAIzKgA7iyaMytCQE9QAZ0Y92ixmuz86G9aAC8hUpRoNmbdgApijABYU1ARxaMAlAG5cauwwABiDffzsAIidqaXNaVX4iABsktQjfIA')">s("how many calls");
</pre><pre class='prettyprintoutput'>
1</pre></div></div>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_55_2_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_55_2_div"><SOLUTION>
    
      <div class='snippet' id='javascript_55_28_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsGMB7AOwGcAXUE0AXlAFsBDAawFMB9O4gSzIICcWAEwAUjMgAs2JAI58yASgDc2EsIwAGdUuyCuJAA4AbBgE9hqgETiCAd3oMiJ0HgaHDJC-O2qArNt0GxmaW1naMjs6u7p5KQA')">const s = make_monitored(math_sqrt);
s(100);
display(s("how many calls"));
s(5);
display(s("how many calls"));
</pre></div></div>
      <div class='snippet' id='javascript_55_29_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfTporKoCcWAJgAo8ASlABvbKBmgANizKgSVYmRa9QAXlAAGANygQFItwoM5FAF6DQPPdNmFSlGvTxCSdAeKmz-oBR4oJ7e2lo6AEQAFlQA7vQMRACeyhZyAM6Rvo4BAfxkBLy0Kmoa+rkBAL6gLJksgcGhAuFR-BmKyqpEZNmSlXkypT0a2noVg-mKRSXd6rwTgzV1Hf2T-sPzY5ujANSgGIvroAUzoB5ePkfVlVWVp8XuFXfYKkQZShljjKwcXDz8YSMMjRNgZACOvDIogqGSEGF0uhh2AEFAyAAc5AxkkI4TF4okUmk5Jlssi4QBWZGojFYnF42IJRhEkjpLKiGFAA')">function make_monitored(f) {
    let counter = 0; //initialized to 0
    function mf(cmd) {
        if (cmd === "how many calls") {
            return counter;
        } else if (cmd === "reset count") {
            counter = 0;
            return counter;
        } else {
            counter = counter + 1;
            return f(cmd);
        }
    }
    return mf;
}
</pre></div></div>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.3" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.3">Exercise 3.3 </a></b> 
  
    
    Modify the 
    
      
      <kbd>make_account</kbd>
    
    
      
      function
    
    so that it creates
    
    
    password-protected accounts.  That is, 
    
      
      <kbd>make_account</kbd>
    
    should take a
    
      
      string
    
    as an additional argument, as in
    <div class='snippet' id='javascript_55_30_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6RAxtQPYCuAdgC6gBmz1LAlnU6BZ1QAIzKgA7gCceLFmQEiAnqADOLBgBMFLVdnpN1oGtVABeQqUonGrABQYADI4A0oAESqy1KWTYAHIlVVCTopTXcASgBuIA')">const acc = make_account(100, "secret password");
</pre></div></div>
    The resulting account object should process a request only if it is
    accompanied by the password with which the account was created, and
    should otherwise return a complaint:
    <div class='snippet' id='javascript_55_31_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6RAxtQPYCuAdgC6gBmz1LAlnU6BZ1QAIzKgA7gCceLFmQEiAnqADOLBgBMFLVdnpN1oGtVABeQqUonGrABQYADI4A0oAESqy1KWTYAHIlVVCTopTXcASgBuXBM7T29fAKCQsIi3dwlZAAtNKSIJKLsAFkcYoA')">acc("secret password", "withdraw")(40);
</pre><pre class='prettyprintoutput'>
60</pre></div></div>
    <div class='snippet' id='javascript_55_32_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChslALYCGA1gKYD6RAxtQPYCuAdgC6gBmz1LAlnU6BZ1QAIzKgA7gCceLFmQEiAnqADOLBgBMFLVdnpN1oGtVABeQqUonGrABQYADI4A0oAESqy1KWTYAHIlVVCTopTXcASgBuXBM7T29fAKCQsIi3dwlZAAtNKSIJKLsAFkcYuNoE1ToCcToWHLIpUEDg0PD3TO1-OlVZYrKYoA')">acc("some other password", "deposit")(40);
</pre><pre class='prettyprintoutput'>
"Incorrect password"</pre></div></div>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_55_3_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_55_3_div"><SOLUTION>
    
      <div class='snippet' id='javascript_55_33_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQZJKuLIAoARgwA2DUiwA0oAA4BKUAG9soFaEKlKNUAHcKZABYATAE4NtfBnR5Ey8paoegKeUIJFiSLUAD4AvKEtrW0VlRzChUXFQfwiPLwBaAKteAG5QsIdjFjICY1pY8TSM0ABfUBZhAGcve2LVLJy80AAiSCJKgjw8ChIKFhs1YkNK5qKMkvTSyfVyalpDFmkqSr0LZJs7SYcCz2jQHa8AaiSgsbCG3Pz3QsmJhxnNeYpK6QYyEn0+OikAR03i5yuaTRXz+P4hOr1bKXegg-zNXQGExmZpbSEOAD8Oj0RlM2jR6JUAC5YaD4QslisyKjCRksRTlnoCYSSc0AKpEJhEKjaWhZH4EFiVMgkxisDhcIKjSYASDKFWqEPRFyaP2i3habW4xiy5FAsAYlUq2ioxkM0uKd1UVpUKqeLzeHzSE2w3HaZACezF7E43F4fAwAAZA1JmiwAG4MZqyNIMPgInHI7TNUMRqOyPgAVkDMdAIERuLMlVA2ewcYTSLxKZaAn60b4ABYcyk88AKKRTbqPa8jSazUA')">function make_account(balance, p) {
    function withdraw(amount) {
        if (balance >= amount) {
            balance = balance - amount;
            return balance;
        } else {
            return "Insufficient funds";
        }
    }
    function deposit(amount) {
        balance = balance + amount;
        return balance;
    }
    function dispatch(m, q) {
        if (p === q) {
            return m === "withdraw"
                   ? withdraw
                   : m === "deposit"
                   ? deposit
                   : "Unknown request: make_account";
    	} else {
            return q => "Incorrect Password";
        }
    }
    return dispatch;
}

const a = make_account(100, "eva");
a("withdraw", "eva")(50); //withdraws 50
a("withdraw", "ben")(40); //incorrect password
</pre></div></div>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_3.4" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_3.4">Exercise 3.4 </a></b> 
  
    Modify the 
    
      
      <kbd>make_account</kbd>
    
    
      
      function
    
    of exercise&nbsp;<REF NAME="ex:password-protection"><a class="superscript" id="3.1.1-ex-link-3.3" href="./3.1.1.html#ex_3.3">3.3</a></REF> by adding another
    local state variable so that, if an account is accessed more than seven
    consecutive times with an incorrect password, it invokes the
    
      
      function
    
    
      
      <kbd>call_the_cops</kbd>.
      
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_55_4_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_55_4_div"><SOLUTION>
    
      <div class='snippet' id='javascript_55_34_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=3&prgrm=PTAEGUEkGEAVQFLlAZgHQEZMChsDMBXAOwGMAXASwHsjQSBDAG0YH0yALAUxZKoAcAzgAoATp3oCaASlABvbKEWgxZAiNoAiBswpEA5qA6c6-AaABGnBgQHGNoANTLxkogG4AkIuwBffMXJqWgBbegBrbnoSXmIyIXMmelJOABpQPhl5BSVGTjJQXQA3JgoAExZ6MjJOYL4yMwBeUAAGN1AQXQpKEoAvTjMyKhbcJVBCUkoaUAB3LvZSkXppoXpgqljM7NHFCjxQeMTk0AA+JtX1ojJN7ZuLQ5JjJoTGJIfQAFpQc9i3LdvFFRqWjPV6cX7-HygTiMWxyP7-QHqUAaSBEAQEPB4CgkCicS5jYilAQacG3PyjPx-caBKalTh8KgCLorNYbOH-EFHJ73YxOb6XUk3RHAnmC0CU0bUya0bSMXR6NhcHimIQsa63YV0JisIzKwRCDQAT3WoHY9EKxk4AA8Hpw6aVkY54f8XbcNEZQKEraAiEMqHs8PQKLkHZVqrV6hopGKJUopUFQKUKAI+JUSOwhME0gBHdU3Xb7Iolcphmp1MwAHlAAHY8y6C0I+KAGi3QLn2a7tprgs3WxpZhwFksNM7OzcAPwzOZD6ajsejABcnt7TQ0dIZTLII-nrsn68ZXTnO9AS40AFUiGFfdNaGJswR+mQl6EIhVohct2KIVCYcZ5MeCiIYo5RLKoy3qZtAOAsoKjAiMzCcDAxS8DU8iBUBvQaY5kVRXgRDEchQFgCQBGmKgRFKEkjyUckyR-WF-07TVZXlRVuF4QQvxov5YwBNCkSTFM03YX5fFwXg0XyehIJfSJ31iIQMGaZo0g0ERGU4cwCEo6NsHoA0B3mRZpg0VT1NsBIdKEABWZpdP0-tp2M0zkXMzT6Cs2z7IMpzhzMjTLKjGy7N+BzDJnFy1ICjygq80KfMHZz-IsmKpGC7zHMSvzXOizyQr0hKjOyqKUryjLwqSnLStikKgA')">function call_the_cops(reason) {
    return "calling the cops because " + reason;	  
}
function make_account(balance, p) {

    let invalid_attempts = 0; //initializes to 0

    function withdraw(amount) {
        if (balance >= amount) {
            balance = balance - amount;
            return balance;
        } else {
            return "Insufficient funds";
        }
    }

    function deposit(amount) {
        balance = balance + amount;
        return balance;
    }

    function calling_the_cops(_) {
        return call_the_cops("you have exceeded " +
                             "the max no of failed attempts");
    }

    function dispatch(m, q) {
        if (invalid_attempts < 7) {
            if (p === q) {
                return m === "withdraw"
                       ? withdraw
                       : m === "deposit"
                       ? deposit
                       : "Unknown request: make_account";
            } else {
                invalid_attempts = invalid_attempts + 1;
    	        return x => "Incorrect Password";
            }
        } else {
            return calling_the_cops;
        }
    }

    return dispatch;

}
</pre></div></div>
      
    </SOLUTION></div></div>
</EXERCISE></div>

  
  
<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    Actually, this is not quite true. One exception was the 
    
    
    random-number generator
    in section&nbsp;<REF NAME="sec:primality"><a class="superscript" id="3.1.1-sec-link-1.2.6" href="./1.2.6.html">1.2.6</a></REF>.  Another exception
    involved the
    
    operation/type tables we introduced in
    section&nbsp;<REF NAME="sec:data-directed"><a class="superscript" id="3.1.1-sec-link-2.4.3" href="./2.4.3.html">2.4.3</a></REF>, where the values of two
    calls to <kbd>get</kbd> with the same arguments
    depended on intervening calls to <kbd>put</kbd>.
    On the other hand, until we introduce assignment, we have no way to
    create such
    
      
      functions
    
    ourselves.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    
    
      
      
	The
	
	value of an assignment is the value being assigned to the name.
	Assignment expression statements
	
	look similar to and should not be
	confused with constant and variable declarations of the form
	<kbd class='snippet'>
const $name$ = $value$;
          </kbd>
	and
	<kbd class='snippet'>
let $name$ = $value$;
          </kbd>
	in which a newly declared $name$
	is associated with a $value$. 
	Assignment expressions look similar to and should not be confused with
	expressions of the form 
	<kbd class='snippet'>
$expression_1$ === $expression_2$
          </kbd>
	which evaluate to <kbd>true</kbd>
	if $expression$$_1$ evaluates to the
	same value as $expression$$_2$ and to
	<kbd>false</kbd> otherwise.
      
    
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3'>[3] </a>
    <FOOTNOTE>
    We have already used 
        
        sequences implicitly in our programs, because in
	JavaScript the body block
	of a function can contain a sequence of function declarations
	followed by a return statement, not
	just a single return statement,
	as discussed in
	section&nbsp;<REF NAME="sec:block-structure"><a class="superscript" id="3.1.1-sec-link-1.1.8" href="./1.1.8.html">1.1.8</a></REF>.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4'>[4] </a>
    <FOOTNOTE>
    Blocks as bodies of lambda expressions were
	introduced in section&nbsp;<REF NAME="sec:graphics"><a class="superscript" id="3.1.1-sec-link-2.2.4" href="./2.2.4.html">2.2.4</a></REF>.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5'>[5] </a>
    <FOOTNOTE>
    In programming-language jargon, the variable
	<kbd>balance</kbd> is said to be 
        
        
        <EM>encapsulated</EM> within the
	<kbd>make_withdraw_100</kbd> function.
	Encapsulation reflects the general system-design principle known as the 
        
        
        <EM>hiding principle</EM>: One can
        make a system more modular and robust by protecting parts of the
        system from each other; that is, by providing information access only
        to those parts of the system that have a <QUOTE>need to
	know.</QUOTE>
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-6' href='#footnote-link-6'>[6] </a>
    <FOOTNOTE>
    
    
    In contrast with
    
      
      
	<kbd>make_withdraw_100</kbd>
      
    
    above, we do not have to use
    <kbd>let</kbd>
    to make <kbd>balance</kbd> a local variable, since
    
      
    
    parameters are already
    local. This will be clearer after the discussion of the environment
    model of evaluation in
    section&nbsp;<REF NAME="sec:environment-model"><a class="superscript" id="3.1.1-sec-link-3.2" href="./3.2.html">3.2</a></REF>.
    (See also
    exercise&nbsp;<REF NAME="ex:local-state-variable"><a class="superscript" id="3.1.1-ex-link-3.10" href="./3.2.3.html#ex_3.10">3.10</a></REF>.)
    </FOOTNOTE></div>

    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./3.1.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='57' href='./3.1.2.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      3.1.1&nbsp;&nbsp;
    Local State Variables
  
    </div>
    <script> var chapter_id = 56; </script>
    <script> var chapter_path = "chapters/3.1.1.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>