<!DOCTYPE html>
<html lang="en">
  <head>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-156801664-1');
</script>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="1.3.4 
    Functions
    as Returned Values
  " />
    <title>
         1.3.4 
    Functions
    as Returned Values
  
    </title>

    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1TEVZrTin+urbZxeYdsn1E8EiDscvP2Nhe2WXZVmCviiWGJgcKyfcZpw1lYOBISkaYalYgIfR/wbLQFWm92V0Q==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/application-646697584dca3e04ba2ffbdf497816ce21a735eef61eccd54a0f8bf08a4e82e9.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon-17dbf972938cc63d48794e3be2c66977e723014f9a9518097da971fb34202187.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="/images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README -->
    <link rel="manifest" href="../static/manifest.json">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->

    <script src="../assets/application-77eef7aa2695bed514b473158fa8f35a6ae4cb10c6e0f2ae8e2b485af0611d43.js"></script>

    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README -->
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("/sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation
            of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder="search web edition";
	               searchBox.title="search web edition"; 
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://sicp.comp.nus.edu.sg/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://sicp.comp.nus.edu.sg/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

       <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
	 <!-- insert a dummy entry, to give one extra line of space -->
         <a class="navbar-brand" href="index.html">&nbsp;</a>
                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-122">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                    <a href="122">        Foreword    </a>
                  </span>
                </h5>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-123">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                    <a href="123">        Prefaces    </a>
                  </span>
                </h5>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-124">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                    <a href="124">Acknowledgments    </a>
                  </span>
                </h5>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-1">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="true" aria-controls="sidebar-collapse-1">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="true" aria-controls="sidebar-collapse-1">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="1">1        Building Abstractions with       Functions    </a>
                </h5>
              </div>
              <div id="sidebar-collapse-1" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-2">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="true" aria-controls="sidebar-collapse-2">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="true" aria-controls="sidebar-collapse-2">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="2">1.1  The Elements of Programming</a>
                </h5>
              </div>
              <div id="sidebar-collapse-2" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-3">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                    <a href="3">1.1.1  Expressions</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                    <a href="4">1.1.2  Naming and the Environment</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="false" aria-controls="sidebar-collapse-5">
                    <a href="5">1.1.3            Evaluating          Operator Combinations        </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-6">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                    <a href="6">1.1.4            Functions        </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-7">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                    <a href="7">1.1.5            The Substitution Model for                                                 Function                              Application        </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-8">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                    <a href="8">1.1.6            Conditional Expressions and Predicates        </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-9">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                    <a href="9">1.1.7  Example: Square Roots by Newtons Method</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-10">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                    <a href="10">1.1.8                                                  Functions                                as Black-Box Abstractions        </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-11">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="true" aria-controls="sidebar-collapse-11">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="true" aria-controls="sidebar-collapse-11">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="11">1.2              Functions            and the Processes They Generate      </a>
                </h5>
              </div>
              <div id="sidebar-collapse-11" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-12">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                    <a href="12">1.2.1  Linear Recursion and Iteration</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-13">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                    <a href="13">1.2.2  Tree Recursion</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                    <a href="14">1.2.3  Orders of Growth</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-15">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                    <a href="15">1.2.4  Exponentiation</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-16">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                    <a href="16">1.2.5  Greatest Common Divisors</a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-17">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                    <a href="17">1.2.6  Example: Testing for Primality</a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-18">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="true" aria-controls="sidebar-collapse-18">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="18">1.3          Formulating Abstractions with Higher-Order         Functions      </a>
                </h5>
              </div>
              <div id="sidebar-collapse-18" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-19">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                    <a href="19">1.3.1            Functions          as Arguments        </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-20">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                    <a href="20">1.3.2            Function Definition Expressions          </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                    <a href="21">1.3.3              Functions            as General Methods          </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-22">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                    <a href="22">1.3.4      Functions    as Returned Values  </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-23">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="true" aria-controls="sidebar-collapse-23">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="true" aria-controls="sidebar-collapse-23">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="23">2  Building Abstractions with Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-23" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-24">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="true" aria-controls="sidebar-collapse-24">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="true" aria-controls="sidebar-collapse-24">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="24">2.1  Introduction to Data Abstraction</a>
                </h5>
              </div>
              <div id="sidebar-collapse-24" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-25">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                    <a href="25">2.1.1      Example: Arithmetic Operations for Rational Numbers  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                    <a href="26">2.1.2          Abstraction Barriers      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="false" aria-controls="sidebar-collapse-27">
                    <a href="27">2.1.3          What Is Meant by Data?      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-28">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                    <a href="28">2.1.4          Extended Exercise: Interval Arithmetic      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-29">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="true" aria-controls="sidebar-collapse-29">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="true" aria-controls="sidebar-collapse-29">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="29">2.2  Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
              <div id="sidebar-collapse-29" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-30">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                    <a href="30">2.2.1          Representing Sequences      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-31">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                    <a href="31">2.2.2          Hierarchical Structures      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                    <a href="32">2.2.3          Sequences as Conventional Interfaces      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-33">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                    <a href="33">2.2.4          Example: A Picture Language      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-34">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="true" aria-controls="sidebar-collapse-34">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="true" aria-controls="sidebar-collapse-34">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="34">2.3  Symbolic Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-34" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-35">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                    <a href="35">2.3.1          Strings      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-36">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                    <a href="36">2.3.2          Example: Symbolic Differentiation      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                    <a href="37">2.3.3          Example: Representing Sets      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-38">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                    <a href="38">2.3.4          Example: Huffman Encoding Trees      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-39">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="true" aria-controls="sidebar-collapse-39">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="true" aria-controls="sidebar-collapse-39">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="39">2.4  Multiple Representations for Abstract Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-39" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-40">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                    <a href="40">2.4.1          Representations for Complex Numbers      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-41">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                    <a href="41">2.4.2          Tagged data      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                    <a href="42">2.4.3          Data-Directed Programming and Additivity      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-43">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="true" aria-controls="sidebar-collapse-43">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="true" aria-controls="sidebar-collapse-43">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="43">2.5  Systems with Generic Operations</a>
                </h5>
              </div>
              <div id="sidebar-collapse-43" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-44">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                    <a href="44">2.5.1          Generic Arithmetic Operations      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-45">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                    <a href="45">2.5.2          Combining Data of Different Types      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="false" aria-controls="sidebar-collapse-46">
                    <a href="46">2.5.3          Example: Symbolic Algebra      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-47">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="true" aria-controls="sidebar-collapse-47">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="true" aria-controls="sidebar-collapse-47">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="47">3  Modularity, Objects, and State</a>
                </h5>
              </div>
              <div id="sidebar-collapse-47" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-48">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="true" aria-controls="sidebar-collapse-48">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="true" aria-controls="sidebar-collapse-48">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="48">3.1  Assignment and Local State</a>
                </h5>
              </div>
              <div id="sidebar-collapse-48" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-49">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                    <a href="49">3.1.1          Local State Variables      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="false" aria-controls="sidebar-collapse-50">
                    <a href="50">3.1.2          The Benefits of Introducing Assignment      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="false" aria-controls="sidebar-collapse-51">
                    <a href="51">3.1.3          The Costs of Introducing Assignment      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-52">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="true" aria-controls="sidebar-collapse-52">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="true" aria-controls="sidebar-collapse-52">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="52">3.2  The Environment Model of Evaluation</a>
                </h5>
              </div>
              <div id="sidebar-collapse-52" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-53">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                    <a href="53">3.2.1          The Rules for Evaluation      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-54">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                    <a href="54">3.2.2          Applying Simple        Functions      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="false" aria-controls="sidebar-collapse-55">
                    <a href="55">3.2.3          Frames as the Repository of Local State      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-56">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                    <a href="56">3.2.4          Internal Definitions      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-57">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="true" aria-controls="sidebar-collapse-57">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="true" aria-controls="sidebar-collapse-57">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="57">3.3  Modeling with Mutable Data</a>
                </h5>
              </div>
              <div id="sidebar-collapse-57" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-58">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                    <a href="58">3.3.1          Mutable List Structure      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-59">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                    <a href="59">3.3.2          Representing Queues      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                    <a href="60">3.3.3          Representing Tables      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-61">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                    <a href="61">3.3.4          A Simulator for Digital Circuits      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-62">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                    <a href="62">3.3.5          Propagation of Constraints      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-63">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="true" aria-controls="sidebar-collapse-63">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="true" aria-controls="sidebar-collapse-63">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="63">3.4  Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
              <div id="sidebar-collapse-63" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-64">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                    <a href="64">3.4.1      The Nature of Time in Concurrent Systems  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-65">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                    <a href="65">3.4.2      Mechanisms for Controlling Concurrency  </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="66">3.5  Streams</a>
                </h5>
              </div>
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-67">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                    <a href="67">3.5.1      Streams Are Delayed Lists  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-68">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                    <a href="68">3.5.2      Infinite Streams  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                    <a href="69">3.5.3      Exploiting the Stream Paradigm  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                    <a href="70">3.5.4      Streams and Delayed Evaluation  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-71">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                    <a href="71">3.5.5      Modularity of Functional Programs and Modularity of Objects  </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-72">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="true" aria-controls="sidebar-collapse-72">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="true" aria-controls="sidebar-collapse-72">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="72">4  Metalinguistic Abstraction</a>
                </h5>
              </div>
              <div id="sidebar-collapse-72" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-73">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="true" aria-controls="sidebar-collapse-73">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="73">4.1  The Metacircular Evaluator</a>
                </h5>
              </div>
              <div id="sidebar-collapse-73" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-74">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                    <a href="74">4.1.1      The Core of the Evaluator  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                    <a href="75">4.1.2      Representing                Statements and Expressions      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="false" aria-controls="sidebar-collapse-76">
                    <a href="76">4.1.3      Evaluator Data Structures  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-77">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                    <a href="77">4.1.4      Running the Evaluator as a Program  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-78">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                    <a href="78">4.1.5    Data as Programs      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-79">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                    <a href="79">4.1.6      Internal Declarations  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-80">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                    <a href="80">4.1.7      Separating Syntactic Analysis from Execution  </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-81">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="true" aria-controls="sidebar-collapse-81">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="true" aria-controls="sidebar-collapse-81">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="81">4.2    Lazy Evaluation</a>
                </h5>
              </div>
              <div id="sidebar-collapse-81" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-82">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                    <a href="82">4.2.1      Normal Order and Applicative Order  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-83">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                    <a href="83">4.2.2      An Interpreter with Lazy Evaluation  </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                    <a href="84">4.2.3      Streams as Lazy Lists  </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-85">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="true" aria-controls="sidebar-collapse-85">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="true" aria-controls="sidebar-collapse-85">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="85">4.3   Nondeterministic Computing</a>
                </h5>
              </div>
              <div id="sidebar-collapse-85" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-86">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                    <a href="86">4.3.1    Amb and Search      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-87">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                    <a href="87">4.3.2    Examples of Nondeterministic Programs      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="false" aria-controls="sidebar-collapse-88">
                    <a href="88">4.3.3    Implementing the amb Evaluator      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-89">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="true" aria-controls="sidebar-collapse-89">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="true" aria-controls="sidebar-collapse-89">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="89">4.4  Logic Programming</a>
                </h5>
              </div>
              <div id="sidebar-collapse-89" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-90">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                    <a href="90">4.4.1    Deductive Information Retrieval      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-91">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                    <a href="91">4.4.2    How the Query System Works      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="false" aria-controls="sidebar-collapse-92">
                    <a href="92">4.4.3    Is Logic Programming Mathematical Logic?      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-93">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                    <a href="93">4.4.4    Implementing the Query System      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-94">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="true" aria-controls="sidebar-collapse-94">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="true" aria-controls="sidebar-collapse-94">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="94">5  Computing with Register Machines</a>
                </h5>
              </div>
              <div id="sidebar-collapse-94" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-95">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="true" aria-controls="sidebar-collapse-95">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="true" aria-controls="sidebar-collapse-95">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="95">5.1  Designing Register Machines</a>
                </h5>
              </div>
              <div id="sidebar-collapse-95" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-96">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                    <a href="96">5.1.1    A Language for Describing Register Machines      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                    <a href="97">5.1.2    Abstraction in Machine Design      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="false" aria-controls="sidebar-collapse-98">
                    <a href="98">5.1.3    Subroutines      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-99">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                    <a href="99">5.1.4    Using a Stack to Implement Recursion      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-100">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                    <a href="100">5.1.5    Instruction Summary      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-101">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="true" aria-controls="sidebar-collapse-101">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="101">5.2  A Register-Machine Simulator</a>
                </h5>
              </div>
              <div id="sidebar-collapse-101" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-102">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                    <a href="102">5.2.1    The Machine Model      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-103">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                    <a href="103">5.2.2    The Assembler      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                    <a href="104">5.2.3    Generating Execution  Functions  for Instructions      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-105">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                    <a href="105">5.2.4    Monitoring Machine Performance      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-106">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="true" aria-controls="sidebar-collapse-106">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="true" aria-controls="sidebar-collapse-106">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="106">5.3  Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
              <div id="sidebar-collapse-106" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-107">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                    <a href="107">5.3.1    Memory as Vectors      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-108">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                    <a href="108">5.3.2    Maintaining the Illusion of Infinite Memory      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="109">5.4  The Explicit-Control Evaluator</a>
                </h5>
              </div>
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-110">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                    <a href="110">5.4.1    The Core of the Explicit-Control Evaluator      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-111">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                    <a href="111">5.4.2    Sequence Evaluation and Tail Recursion      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                    <a href="112">5.4.3    Conditionals, Assignments, and Definitions      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                    <a href="113">5.4.4    Running the Evaluator      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-114">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="true" aria-controls="sidebar-collapse-114">
                     &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="true" aria-controls="sidebar-collapse-114">
                    &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                    <a href="114">5.5  Compilation</a>
                </h5>
              </div>
              <div id="sidebar-collapse-114" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
                                <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-115">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                    <a href="115">5.5.1    Structure of the Compiler      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-116">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                    <a href="116">5.5.2    Compiling Expressions      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                    <a href="117">5.5.3    Compiling Combinations      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-118">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                    <a href="118">5.5.4    Combining Instruction Sequences      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-119">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                    <a href="119">5.5.5    An Example of Compiled Code      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-120">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                    <a href="120">5.5.6    Lexical Addressing      </a>
                  </span>
                </h5>
              </div>
            </div>
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-121">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                    <a href="121">5.5.7    Interfacing Compiled Code to the Evaluator      </a>
                  </span>
                </h5>
              </div>
            </div>

                </div>
              </div>
            </div>

                </div>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-125">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                    <a href="125">References</a>
                  </span>
                </h5>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-126">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                    <a href="126">Index</a>
                  </span>
                </h5>
              </div>
            </div>

                     <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-127">
                <h5 class="mb-0">
                  <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-127" aria-expanded="false" aria-controls="sidebar-collapse-127">
                    <a href="127">JavaScript Adaptation Making-of</a>
                  </span>
                </h5>
              </div>
            </div>

       </div>

           <div id="permalink-msg">
  <div class="screen">
    <div class="alert alert-success">
      <strong>Permalink copied!</strong> 
    </div>
  </div>
</div>
<div class="chapter-content">

  <div class="chapter-title">
    <div class="permalink">
      <a name="top" class="permalink">1.3.4 
    Functions
    as Returned Values
  </a>
    </div>
  </div>
    <div class="chapter-text" >
        <div class="SUBSECTION"><SUBSECTION> 
  

  
  
  

  <div class="permalink">
<a name="p1" class="permalink"></a><p>
    The above examples demonstrate how
    the ability to pass
    functions
    as arguments significantly enhances
    the expressive power of our programming language.  We can achieve even
    more expressive power by creating
    functions
    whose returned values are
    themselves
    functions.
  </p>
</div>

  <div class="permalink">
<a name="p2" class="permalink"></a><p>
    We can illustrate this idea by looking again at the fixed-point
    example described at the end of
    section <REF NAME="sec:proc-general-methods"><a class="superscript" id="1.3.4-sec-link-1.3.3" href="21">1.3.3</a></REF>.  We formulated a new version
    of the square-root
    function
    as a fixed-point search, starting with
    the observation that $\sqrt{x}$ is a fixed-point of the function
    $y\mapsto x/y$.  Then we used average damping to make the
    approximations converge.  Average damping is a useful general
    technique in itself.  Namely, given a function $f$, we consider the
    function whose value at $x$ is equal to the average of $x$ and $f(x)$.
  </p>
</div>
  
  <div class="permalink">
<a name="p3" class="permalink"></a><p>
    We can express the idea of average damping by means of the
    following
    function:
    <div class="snippet" id="javascript_22_0_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction square(x) {\n    return x * x;\n}\n                '+'\n'+'function average_damp(f) {\n    return x =&gt; average(x, f(x));\n}'+'\n'+'\naverage_damp(square)(10);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function average_damp(f) {
    return x =&gt; average(x, f(x));
}</pre></div></div>
  </p>
</div>

  <div class="permalink">
<a name="p4" class="permalink"></a><p>
    
      
      
        The function
        <kbd>average_damp</kbd>
      
    
    is a
    function
    that takes as its argument a
    function
    <kbd>f</kbd> and returns as its value a
    function
    (produced by the 
    function definition expression) that, when applied to a number <kbd>x</kbd>, produces the
    average of <kbd>x</kbd> and 
    <kbd>f(x)</kbd>.  
    For example, applying 
    
      
      
        <kbd>average_damp</kbd>
      
    
    to the <kbd>square</kbd>
    function
    produces a
    function
    whose
    value at some number $x$ is the average of 
    $x$ and $x^2$.  
    Applying this resulting
    function
    to 10 returns the average of 10 and 100, or
    55:<a class="superscript" id="footnote-link-1" href="22#footnote-1">[1]</a>
    <div class="snippet" id="javascript_22_1_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction average_damp(f) {\n    return x =&gt; average(x, f(x));\n}\n          \nfunction square(x) {\n    return x * x;\n}\n                '+'\n'+'average_damp(square)(10);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">average_damp(square)(10);</pre></div></div>
  </p>
</div>

  <div class="permalink">
<a name="p5" class="permalink"></a><p>
    
    Using 
    <kbd>average_damp</kbd>,
    we can reformulate the square-root
    function
    as follows:

    <div class="snippet" id="javascript_22_2_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction average_damp(f) {\n    return x =&gt; average(x, f(x));\n}\n          \nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          '+'\n'+'function sqrt(x) {\n    return fixed_point(average_damp(y =&gt; x / y),\n                       1.0);\n}'+'\n'+'\nsqrt(6);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function sqrt(x) {
    return fixed_point(average_damp(y =&gt; x / y),
                       1.0);
}</pre></div></div>
    

  </p>
</div>

  <div class="permalink">
<a name="p6" class="permalink"></a><p>
    Notice how this formulation makes explicit the three ideas in the
    method: fixed-point search, average damping, and the function
    $y\mapsto x/y$.  It is instructive to compare this formulation of the
    square-root method with the original version given in
    section <REF NAME="sec:sqrt"><a class="superscript" id="1.3.4-sec-link-1.1.7" href="9">1.1.7</a></REF>.  Bear in mind that these
    functions
    express
    the same process, and notice how much clearer the idea becomes when we
    express the process in terms of these abstractions.  In general, there
    are many ways to formulate a process as a
    function.  Experienced
    programmers know how to choose process formulations that are
    particularly perspicuous, and where useful elements of the process are
    exposed as separate entities that can be reused in other applications.
    As a simple example of reuse, notice that the cube root of $x$ is a
    fixed point of the function $y\mapsto x/y^2$, so we can immediately
    generalize our square-root
    function
    to one that extracts 
    
    
    cube
    roots:<a class="superscript" id="footnote-link-2" href="22#footnote-2">[2]</a>

    <div class="snippet" id="javascript_22_3_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction average_damp(f) {\n    return x =&gt; average(x, f(x));\n}\n          \nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nfunction square(x) {\n    return x * x;\n}\n                '+'\n'+'function cube_root(x) {\n    return fixed_point(average_damp(y =&gt; x / square(y)),\n                       1.0);\n}'+'\n'+'\ncube_root(27);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function cube_root(x) {
    return fixed_point(average_damp(y =&gt; x / square(y)),
                       1.0);
}</pre></div></div>

    

    
  </p>
</div>

  <div class="permalink">
<a name="h1" class="permalink"></a><h2>
    Newton's method
  </h2>
</div>

  <div class="permalink">
<a name="p7" class="permalink"></a><p>
    
    When we first introduced the square-root
    function, in
    section <REF NAME="sec:sqrt"><a class="superscript" id="1.3.4-sec-link-1.1.7" href="9">1.1.7</a></REF>, we mentioned that this was a special case of
    <EM>Newton's method</EM>.  
    If $x\mapsto g(x)$ is a differentiable function, then a solution of
    the equation $g(x)=0$ is a fixed point of the function $x\mapsto f(x)$
    where
    
      \[
      f(x) = x - \frac{g(x)}{Dg(x)}
      \]
    
    and
    $Dg(x)$ is the derivative of $g$ evaluated at $x$.  
    
    Newton's
    method is the use of the fixed-point method we saw above to
    approximate a solution of the equation by finding a fixed point of
    the function $f$.<a class="superscript" id="footnote-link-3" href="22#footnote-3">[3]</a>
    For many functions $g$ and for sufficiently good initial guesses for
    $x$, Newton's method converges very rapidly to a solution of
    $g(x)=0$.<a class="superscript" id="footnote-link-4" href="22#footnote-4">[4]</a>
  </p>
</div>

  <div class="permalink">
<a name="p8" class="permalink"></a><p>
    
    
    
    In order to implement Newton's method as a
    function, we must first
    express the idea of derivative.  Note that <QUOTE>derivative,</QUOTE> like
    average damping, is something that transforms a function into another
    function.  For instance, the derivative of the function $x\mapsto
    x^3$ is the function $x \mapsto 3x^2$.  In general, if $g$ is a
    function and $dx$ is a small number, then the derivative $Dg$ of $g$ is
    the function whose value at any number $x$ is given (in the limit of
    small $dx$) by
    
      \[Dg(x) = \frac {g(x+dx) - g(x)}{dx} \]
    
    Thus, we can express the idea of derivative (taking $dx$ to be, say,
    0.00001) as the
    function

    <div class="snippet" id="javascript_22_4_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nconst dx = 0.00001;\n      '+'\n'+'function deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}'+'\n'+'\nfunction cube(x) { return x * x * x; }\n\nderiv(cube)(5);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function deriv(g) {
    return x =&gt; (g(x + dx) - g(x)) / dx;
}</pre></div></div>

    along with the
    
    declaration

    <div class="snippet" id="javascript_22_5_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent(''+'\n'+'const dx = 0.00001;'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">const dx = 0.00001;</pre></div></div>
  </p>
</div>

  <div class="permalink">
<a name="p9" class="permalink"></a><p>
    
    Like 
    <kbd>average_damp</kbd>,
    <kbd>deriv</kbd> is a
    function
    that takes a
    function
    as argument and returns a
    function
    as value.  For example,
    to approximate the derivative of $x \mapsto x^3$ at 5 (whose exact
    value is 75) we can evaluate

    <div class="snippet" id="javascript_22_6_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nconst dx = 0.00001;\n      \nfunction deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}\n      '+'\n'+'function cube(x) { return x * x * x; }\n\nderiv(cube)(5);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function cube(x) { return x * x * x; }

deriv(cube)(5);</pre></div></div>
    
  </p>
</div>

  <div class="permalink">
<a name="p10" class="permalink"></a><p>
    With the aid of <kbd>deriv</kbd>, we can express Newton's method as a
    fixed-point process:

    <div class="snippet" id="javascript_22_7_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nconst dx = 0.00001;\n      \nfunction deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}\n      \nfunction square(x) {\n    return x * x;\n}\n                \nfunction sqrt(x) {\n    return newtons_method(y =&gt; square(y) - x,\n                          1.0);\n}\n      '+'\n'+'function newton_transform(g) {\n   return x =&gt; x - g(x) / deriv(g)(x);\n}\nfunction newtons_method(g, guess) {\n   return fixed_point(newton_transform(g), guess);\n}'+'\n'+'\nsqrt(6);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function newton_transform(g) {
   return x =&gt; x - g(x) / deriv(g)(x);
}
function newtons_method(g, guess) {
   return fixed_point(newton_transform(g), guess);
}</pre></div></div>
    
    
  </p>
</div>
  <div class="permalink">
<a name="p11" class="permalink"></a><p>
    The <kbd>newton_transform</kbd>
    function
    expresses the formula at the
    beginning of this section, and <kbd>newtons_method</kbd> is readily defined
    in terms of this.  It takes as arguments a
    function
    that computes the
    function for which we want to find a zero, together with an initial
    guess.  For instance, to find the 
    
    square root of $x$, we can use
    Newton's method to find a zero of the function $y\mapsto y^2-x$ starting with
    an initial guess of 1.<a class="superscript" id="footnote-link-5" href="22#footnote-5">[5]</a>
    This provides yet another form of the square-root
    function:

    <div class="snippet" id="javascript_22_8_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nconst dx = 0.00001;\n      \nfunction deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}\n      \nfunction newton_transform(g) {\n   return x =&gt; x - g(x) / deriv(g)(x);\n}\nfunction newtons_method(g, guess) {\n   return fixed_point(newton_transform(g), guess);\n}\n      \nfunction square(x) {\n    return x * x;\n}\n                '+'\n'+'function sqrt(x) {\n    return newtons_method(y =&gt; square(y) - x,\n                          1.0);\n}'+'\n'+'\nsqrt(6);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function sqrt(x) {
    return newtons_method(y =&gt; square(y) - x,
                          1.0);
}</pre></div></div>
    
    
    
  </p>
</div>

  <div class="permalink">
<a name="h2" class="permalink"></a><h2>
    Abstractions and first-class
    functions
  </h2>
</div>

  <div class="permalink">
<a name="p12" class="permalink"></a><p>
    We've seen two ways to express the square-root
    computation as an instance of a more general method, once as a fixed-point
    search and once using Newton's method.  Since Newton's method
    was itself expressed as a fixed-point process,
    we actually saw two ways to compute square roots as fixed points.
    Each method begins with a function and finds a 
    
    fixed
    point of some transformation of the function.  We can express this
    general idea itself as a
    function:

    <div class="snippet" id="javascript_22_9_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction average_damp(f) {\n    return x =&gt; average(x, f(x));\n}\n          \nfunction sqrt(x) {\n    return fixed_point_of_transform(\n               y =&gt; x / y,\n               average_damp,\n               1.0);\n}\n      '+'\n'+'function fixed_point_of_transform(g, transform, guess) {\n    return fixed_point(transform(g), guess);\n}'+'\n'+'\nsqrt(6);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function fixed_point_of_transform(g, transform, guess) {
    return fixed_point(transform(g), guess);
}</pre></div></div>
    
  </p>
</div>

  <div class="permalink">
<a name="p13" class="permalink"></a><p>
    This very general
    function
    takes as its arguments a
    function
    <kbd>g</kbd>
    that computes some function, a
    function
    that transforms <kbd>g</kbd>, and
    an initial guess.  The returned result is a fixed point of the
    transformed function.
  </p>
</div>

  <div class="permalink">
<a name="p14" class="permalink"></a><p>
    
    Using this abstraction, we can recast the first square-root
    computation from this section (where we look for
    a fixed point of the average-damped version of $y \mapsto x/y$)
    as an instance of this general method:

    <div class="snippet" id="javascript_22_10_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nfunction fixed_point_of_transform(g, transform, guess) {\n    return fixed_point(transform(g), guess);\n}\n      \nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction average_damp(f) {\n    return x =&gt; average(x, f(x));\n}\n          '+'\n'+'function sqrt(x) {\n    return fixed_point_of_transform(\n               y =&gt; x / y,\n               average_damp,\n               1.0);\n}'+'\n'+'\nsqrt(6);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function sqrt(x) {
    return fixed_point_of_transform(
               y =&gt; x / y,
               average_damp,
               1.0);
}</pre></div></div>
    
    
  </p>
</div>

  <div class="permalink">
<a name="p15" class="permalink"></a><p>
    
    Similarly, we can express the second square-root computation from this section
    (an instance
    of Newton's method that finds a fixed point of the
    Newton transform of $y\mapsto y^2-x$) as

    
    
    <div class="snippet" id="javascript_22_11_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nfunction fixed_point_of_transform(g, transform, guess) {\n    return fixed_point(transform(g), guess);\n}\n      \nfunction square(x) {\n    return x * x;\n}\n                \nconst dx = 0.00001;\n      \nfunction deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}\n      \nfunction newton_transform(g) {\n   return x =&gt; x - g(x) / deriv(g)(x);\n}\nfunction newtons_method(g, guess) {\n   return fixed_point(newton_transform(g), guess);\n}\n      '+'\n'+'function sqrt(x) {\n    return fixed_point_of_transform(\n               y =&gt; square(y) - x,\n               newton_transform,\n               1.0);\n}'+'\n'+'\nsqrt(6);\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function sqrt(x) {
    return fixed_point_of_transform(
               y =&gt; square(y) - x,
               newton_transform,
               1.0);
}</pre></div></div>

    

  </p>
</div>

  <div class="permalink">
<a name="p16" class="permalink"></a><p>
    We began section <REF NAME="sec:higher-order-procedures"><a class="superscript" id="1.3.4-sec-link-1.3" href="18">1.3</a></REF> with the observation
    that compound
    functions
    are a crucial abstraction mechanism, because they permit us to
    express general methods of computing as explicit elements in our
    programming language.  Now we've seen how higher-order
    functions
    permit us to manipulate these general methods
    to create further abstractions.
  </p>
</div>
  
  <div class="permalink">
<a name="p17" class="permalink"></a><p>
    As programmers, we should be alert to opportunities to identify the
    underlying abstractions in our programs and to build upon them and
    generalize them to create more powerful abstractions.  This is not to
    say that one should always write programs in the most abstract way
    possible; expert programmers know how to choose the level of
    abstraction appropriate to their task.  But it is important to be able
    to think in terms of these abstractions, so that we can be ready to
    apply them in new contexts.  The significance of higher-order
    functions
    is that they enable us to represent these abstractions
    explicitly as elements in our programming language, so that they can
    be handled just like other computational elements.
  </p>
</div>

  <div class="permalink">
<a name="p18" class="permalink"></a><p>
    In general, programming languages impose restrictions on the ways in
    which computational elements can be manipulated.  Elements with the
    fewest restrictions are said to have 
    
    <EM>first-class</EM> status.  Some
    of the <QUOTE>rights and privileges</QUOTE> of first-class 
    elements are:<a class="superscript" id="footnote-link-6" href="22#footnote-6">[6]</a>
    <UL>
      <LI>
	
	  
	  They may be referred to using names.
	
      </LI>
      <LI>They may be passed as arguments to
      functions.
      </LI>
      <LI>They may be returned as the results of
      functions.
      </LI>
      <LI>They may be included in data structures.<a class="superscript" id="footnote-link-7" href="22#footnote-7">[7]</a>
      </LI>
    </UL>
  </p>
</div>
  
  <div class="permalink">
<a name="p19" class="permalink"></a><p>
    
    
    JavaScript, 
    unlike other common programming languages, awards
    functions
    full first-class status.  This poses challenges for efficient
    implementation, but the resulting gain in expressive power is
    enormous.<a class="superscript" id="footnote-link-8" href="22#footnote-8">[8]</a>
  </p>
</div>

  <div class="permalink">
<a name="ex_1.40" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.40">Exercise 1.40 </a></b>             
    
    Declare a function
    <kbd>cubic</kbd> that can be used together with the 
    <kbd>newtons_method</kbd>
    function
    in expressions of the form

    

    <div class="snippet" id="javascript_22_12_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nconst dx = 0.00001;\n      \nfunction deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}\n      \nfunction newton_transform(g) {\n   return x =&gt; x - g(x) / deriv(g)(x);\n}\nfunction newtons_method(g, guess) {\n   return fixed_point(newton_transform(g), guess);\n}\n      \n// cubic to be written by student; see EXERCISE 1.40\n      '+'\n'+'newtons_method(cubic(a, b, c), 1);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">newtons_method(cubic(a, b, c), 1);</pre></div></div>

    to approximate zeros of the cubic $x^3 +ax^2 +bx +c$.
    <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_1_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_1_div"><SOLUTION>
      <div class="snippet" id="javascript_22_13_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction square(x) {\n    return x * x;\n}\n                \nfunction cube(x) {\n    return x * x * x;\n}\n          \nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nconst dx = 0.00001;\n      \nfunction deriv(g) {\n    return x =&gt; (g(x + dx) - g(x)) / dx;\n}\n      \nfunction newton_transform(g) {\n   return x =&gt; x - g(x) / deriv(g)(x);\n}\nfunction newtons_method(g, guess) {\n   return fixed_point(newton_transform(g), guess);\n}\n      \n// cubic to be written by student; see EXERCISE 1.40\n      '+'\n'+'function cubic(a, b, c) {\n    return x =&gt; cube(x) + a * square(x) + b * x + c;\n}'+'\n'+'\nnewtons_method(cubic(1, -4, 0), 1);\n        '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function cubic(a, b, c) {
    return x =&gt; cube(x) + a * square(x) + b * x + c;
}</pre></div></div>

      
      
    </SOLUTION></div>
</div>
  </EXERCISE>
</div>

  <div class="permalink">
<a name="ex_1.41" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.41">Exercise 1.41 </a></b>
    
    Declare a function
    <kbd>double</kbd> that takes a
    function
    of one
    argument as argument and
    returns a
    function
    that applies the original
    function
    twice.  For
    example, if <kbd>inc</kbd> is a
    function
    that adds 1 to its argument,
    then
    
      
      
	<kbd>double(inc)</kbd>
      
    
    should be a
    function
    that adds 2.  What
    value is returned by

    

    <div class="snippet" id="javascript_22_14_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\n// double to be written by student; see EXERCISE 1.41\n      \nfunction inc(n) {\n    return n + 1;\n}\n          '+'\n'+'double(double(double))(inc)(5); // ?'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">double(double(double))(inc)(5); // ?</pre></div></div>
    <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_2_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_2_div"><SOLUTION>       
      <div class="snippet" id="javascript_22_15_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction inc(n) {\n    return n + 1;\n}\n          '+'\n'+'function double(f) {\n    return x =&gt; f(f(x));\n}'+'\n'+'\ndouble(double(double))(inc)(5); // returns 21\n	'+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function double(f) {
    return x =&gt; f(f(x));
}</pre></div></div>

      
      
    </SOLUTION></div>
</div>
  </EXERCISE>
</div>

  <div class="permalink">
<a name="ex_1.42" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.42">Exercise 1.42 </a></b>
  
  
  Let $f$ and $g$ be two one-argument functions.  The <EM>composition</EM>
  $f$ after $g$ is defined to be the function $x\mapsto f(g(x))$.            
  
  Declare a function
  <kbd>compose</kbd> that implements composition.  For
  example, if <kbd>inc</kbd> is a
  function
  that adds 1 to its argument,

  

  <div class="snippet" id="javascript_22_16_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\n// compose to be written by student; see EXERCISE 1.42\n    \nfunction square(x) {\n    return x * x;\n}\n                \nfunction inc(n) {\n    return n + 1;\n}\n          '+'\n'+'compose(square, inc)(6);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">compose(square, inc)(6);</pre></div></div>
  returns 49.
  <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_3_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_3_div"><SOLUTION>
    <div class="snippet" id="javascript_22_17_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction inc(n) {\n    return n + 1;\n}\n          \nfunction square(x) {\n    return x * x;\n}\n                '+'\n'+'function compose(f, g) {\n    return x =&gt; f(g(x));\n}'+'\n'+'\ncompose(square, inc)(6); // returns 49\n      '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function compose(f, g) {
    return x =&gt; f(g(x));
}</pre></div></div>

    
    
  </SOLUTION></div>
</div>
  </EXERCISE>
</div>

  <div class="permalink">
<a name="ex_1.43" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.43">Exercise 1.43 </a></b> 
    
    If $f$ is a numerical function and $n$ is a positive integer, then we
    can form the $n$th repeated application of $f$, which is defined to be
    the function whose value at $x$ is
    $f(f(\ldots(f(x))\ldots))$.  For
    example, if $f$ is the function
    $x \mapsto x+1$,
    then the $n$th repeated application of
    $f$ is
    the function $x \mapsto x+n$.
    If $f$ is the operation of
    squaring a number, then the $n$th repeated application of
    $f$ is the
    function that raises its argument to the $2^n$th power.  Write a
    function
    that takes as inputs a
    function
    that computes $f$ and a
    positive integer $n$ and returns the
    function
    that computes the $n$th
    repeated application of $f$.  Your
    function
    should be able to be used
    as follows:

    

    <div class="snippet" id="javascript_22_18_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction square(x) {\n    return x * x;\n}\n                \n// repeated to be written by student; see EXERCISE 1.43\n      '+'\n'+'repeated(square, 2)(5);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">repeated(square, 2)(5);</pre></div></div>

    Hint: You may find it convenient to use <kbd>compose</kbd> from
    exercise <REF NAME="ex:compose"><a class="superscript" id="1.3.4-ex-link-1.42" href="22#ex_1.42">1.42</a></REF>.
    
    <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_4_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_4_div"><SOLUTION>
      <div class="snippet" id="javascript_22_19_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction compose(f, g) {\n    return x =&gt; f(g(x));\n}\n      \nfunction square(x) {\n    return x * x;\n}\n                '+'\n'+'function repeated(f, n) {\n    return n === 0\n           ? x =&gt; x\n           : compose(f, repeated(f, n - 1));\n}'+'\n'+'\nrepeated(square, 2)(5); // 625\n        '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function repeated(f, n) {
    return n === 0
           ? x =&gt; x
           : compose(f, repeated(f, n - 1));
}</pre></div></div>

      
      
    </SOLUTION></div>
</div>
  </EXERCISE>
</div>

  <div class="permalink">
<a name="ex_1.44" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.44">Exercise 1.44 </a></b> 
  
  
  
  The idea of <EM>smoothing</EM> a function is an important concept in
  signal processing.  If $f$ is a function and
  $dx$ is some small number,
  then the smoothed version of $f$ is the function whose value at a
  point $x$ is the average of $f(x-dx)$,
  $f(x)$, and $f(x+dx)$.  Write a
  function
  <kbd>smooth</kbd> that takes as input a
  function
  that computes
  $f$ and returns a
  function
  that computes the smoothed $f$.  It is
  sometimes valuable to repeatedly smooth a function (that is, smooth
  the smoothed function, and so on) to obtained the <EM>$n$-fold
  smoothed function</EM>.  Show how to generate the
  $n$-fold smoothed
  function of any given function using <kbd>smooth</kbd> and
  <kbd>repeated</kbd> from exercise <REF NAME="ex:repeated"><a class="superscript" id="1.3.4-ex-link-1.43" href="22#ex_1.43">1.43</a></REF>.
  <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_5_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_5_div"><SOLUTION>
    <div class="snippet" id="javascript_22_20_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction cube(x) {\n    return x * x * x;\n}\n          \nfunction compose(f, g) {\n    return x =&gt; f(g(x));\n}\n      \nfunction repeated(f, n) {\n    return n === 0\n           ? x =&gt; x\n           : compose(f, repeated(f, n - 1));\n}\n	'+'\n'+'const dx = 0.00001;\nfunction smooth(f) {\n    return x =&gt; (f(x - dx) + f(x) + f(x + dx)) / 3;\n}\nfunction n_fold_smooth(f, n) {\n    return repeated(smooth, n)(f);\n}'+'\n'+'\nn_fold_smooth(cube, 5)(4);\n    '+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">const dx = 0.00001;
function smooth(f) {
    return x =&gt; (f(x - dx) + f(x) + f(x + dx)) / 3;
}
function n_fold_smooth(f, n) {
    return repeated(smooth, n)(f);
}</pre></div></div>
  </SOLUTION></div>
</div>
  
  </EXERCISE>
</div>

  <div class="permalink">
<a name="ex_1.45" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.45">Exercise 1.45 </a></b>
    We saw in section <REF NAME="sec:proc-general-methods"><a class="superscript" id="1.3.4-sec-link-1.3.3" href="21">1.3.3</a></REF>
    that attempting to compute square roots by naively finding a
    fixed point of $y\mapsto x/y$ does not converge, and that this can be
    fixed by average damping.  The same method works for finding cube
    roots as fixed points of the average-damped $y\mapsto x/y^2$.
    Unfortunately, the process does not work for 
    
    
    fourth roots—a single
    average damp is not enough to make a fixed-point search for $y\mapsto
    x/y^3$ converge.  On the other hand, if we average damp twice (i.e.,
    use the average damp of the average damp of $y\mapsto x/y^3$) the
    fixed-point search does converge.  Do some experiments to determine
    how many average damps are required to compute 
    
    
    $n$th roots as a
    fixed-point search based upon repeated average damping of $y\mapsto
    x/y^{n-1}$.  Use this to implement a simple
    function
    for computing
    $n$th roots using 
    
    <kbd>fixed_point</kbd>,
     
    
    <kbd>average_damp</kbd>,
    and the <kbd>repeated</kbd>
    function
    of exercise <REF NAME="ex:repeated"><a class="superscript" id="1.3.4-ex-link-1.43" href="22#ex_1.43">1.43</a></REF>.
    Assume that any arithmetic operations you need are available as primitives.
    

    <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_6_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_6_div"><SOLUTION>
      <div class="snippet" id="javascript_22_21_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nconst tolerance = 0.00001;\nfunction fixed_point(f, first_guess) {\n    function close_enough(x, y) {\n        return abs(x - y) &lt; tolerance;\n    }\n    function try_with(guess) {\n        const next = f(guess);\n        return close_enough(guess, next)\n               ? next\n               : try_with(next);\n    }\n    return try_with(first_guess);\n}\n          \nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction average_damp(f) {\n    return x =&gt; average(x, f(x));\n}\n          \nfunction compose(f, g) {\n    return x =&gt; f(g(x));\n}\n      \nfunction repeated(f, n) {\n    return n === 0\n           ? x =&gt; x\n           : compose(f, repeated(f, n - 1));\n}\n	\nfunction square(x) {\n    return x * x;\n}\n                \nfunction is_even(n) {\n    return n % 2 === 0;\n}\n          \nfunction fast_expt(b, n) {\n    return n === 0\n           ? 1\n           : is_even(n)\n             ? square(fast_expt(b, n / 2))\n             : b * fast_expt(b, n - 1);\n}\n          '+'\n'+'function nth_root(n, x) {\n    return fixed_point(repeated(average_damp, \n                                math_floor(math_log2(n)))\n                       (y =&gt; x / fast_expt(y, n - 1)),\n                       1.0);\n}'+'\n'+'\nnth_root(5, 32);\n	'+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function nth_root(n, x) {
    return fixed_point(repeated(average_damp, 
                                math_floor(math_log2(n)))
                       (y =&gt; x / fast_expt(y, n - 1)),
                       1.0);
}</pre></div></div>
      
    </SOLUTION></div>
</div>

  </EXERCISE>
</div>

  <div class="permalink">
<a name="ex_1.46" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_1.46">Exercise 1.46 </a></b>
    
    
    
    
    Several of the numerical methods described in this chapter are instances
    of an extremely general computational strategy known as <EM>iterative
    improvement</EM>.  Iterative improvement says that, to compute something,
    we start with an initial guess for the answer, test if the guess is
    good enough, and otherwise improve the guess and continue the process
    using the improved guess as the new guess.  Write a
    function
    
    <kbd>iterative_improve</kbd>
    that takes two
    functions
    as arguments: a method
    for telling whether a guess is good enough and a method for improving
    a guess.
    
    The function <kbd>iterative_improve</kbd>
     should return as its value a
    function
    that takes a guess as argument and keeps improving the guess
    until it is good enough.  Rewrite the <kbd>sqrt</kbd>
    function
    of
    section <REF NAME="sec:sqrt"><a class="superscript" id="1.3.4-sec-link-1.1.7" href="9">1.1.7</a></REF> and the 
    
    <kbd>fixed_point</kbd>
    
    function
    of
    section <REF NAME="sec:proc-general-methods"><a class="superscript" id="1.3.4-sec-link-1.3.3" href="21">1.3.3</a></REF> in terms of
    
    <kbd>iterative_improve</kbd>
    .

    <div class="Solution">
<div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_22_7_div" data-toggle="collapse">Solution</button></div>
<div class="solution_content collapse" id="solution_22_7_div"><SOLUTION>
      <div class="snippet" id="javascript_22_22_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction square(x) {\n    return x * x;\n}\n                \nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction improve(guess, x) {\n    return average(guess, x / guess);\n}\n          \nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nfunction good_enough(guess, x) {\n    return abs(square(guess) - x) &lt; 0.001;\n}\n                '+'\n'+'function iterative_improve(good_enough, improve) {\n    function iterate(guess) {\n        return good_enough(guess)\n               ? guess\n               : iterate(improve(guess));\n    }\n    return iterate;\n}'+'\n'+'\nfunction sqrt(x) {\n    return iterative_improve(y =&gt; good_enough(y, x), \n                             y =&gt; improve(y, x))(1);\n}\n\nsqrt(49);\n	'+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function iterative_improve(good_enough, improve) {
    function iterate(guess) {
        return good_enough(guess)
               ? guess
               : iterate(improve(guess));
    }
    return iterate;
}</pre></div></div>
      <div class="snippet" id="javascript_22_23_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction square(x) {\n    return x * x;\n}\n                \nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction improve(guess, x) {\n    return average(guess, x / guess);\n}\n          \nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nfunction good_enough(guess, x) {\n    return abs(square(guess) - x) &lt; 0.001;\n}\n                \nfunction iterative_improve(good_enough, improve) {\n    function iterate(guess) {\n        return good_enough(guess)\n               ? guess\n               : iterate(improve(guess));\n    }\n    return iterate;\n}		    \n	'+'\n'+'function sqrt(x) {\n    return iterative_improve(y =&gt; good_enough(y, x), \n                             y =&gt; improve(y, x))(1);\n}\n\nsqrt(49);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">function sqrt(x) {
    return iterative_improve(y =&gt; good_enough(y, x), 
                             y =&gt; improve(y, x))(1);
}

sqrt(49);</pre></div></div>

      <div class="snippet" id="javascript_22_24_div"><div class="pre-prettyprint"><pre class="prettyprint" title="Evaluate Javascript expression" onclick="var compressed = LZString.compressToEncodedURIComponent('\nfunction square(x) {\n    return x * x;\n}\n                \nfunction average(x,y) {\n    return (x + y) / 2;\n}\n              \nfunction improve(guess, x) {\n    return average(guess, x / guess);\n}\n          \nfunction abs(x) {\n    return x &gt;= 0 ? x : -x;\n}\n                \nfunction good_enough(guess, x) {\n    return abs(square(guess) - x) &lt; 0.001;\n}\n                \nfunction iterative_improve(good_enough, improve) {\n    function iterate(guess) {\n        return good_enough(guess)\n               ? guess\n               : iterate(improve(guess));\n    }\n    return iterate;\n}		    \n	'+'\n'+'const tolerance = 0.00001;	  \nfunction fixed_point(f, first_guess) {\n    return iterative_improve(\n               guess =&gt; abs(guess - f(guess)) &lt; tolerance,\n               f)\n           (first_guess);\n}\n\nfixed_point(math_cos, 1.0);'+'\n'+''+'\n'); var url = 'https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm='+compressed; window.open(url); ">const tolerance = 0.00001;	  
function fixed_point(f, first_guess) {
    return iterative_improve(
               guess =&gt; abs(guess - f(guess)) &lt; tolerance,
               f)
           (first_guess);
}

fixed_point(math_cos, 1.0);</pre></div></div>
    </SOLUTION></div>
</div>
    
  </EXERCISE>
</div>
  
  
<hr>
<div class="footnote">
<a class="footnote-number" id="footnote-1" href="22#footnote-link-1">[1] </a><FOOTNOTE>Observe that this is a combination 
    whose operator is itself
    
    
    
    a combination.  Exercise <REF NAME="ex:a-plus-abs-b"><a class="superscript" id="1.3.4-ex-link-1.4" href="8#ex_1.4">1.4</a></REF> already demonstrated
    the ability to form such combinations, but that was only a toy
    example.  Here we begin to see the real need for such
    combinations—when applying a
    function
    that is obtained as the value
    returned by a higher-order
    function.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-2" href="22#footnote-link-2">[2] </a><FOOTNOTE>See exercise <REF NAME="ex:nth-roots"><a class="superscript" id="1.3.4-ex-link-1.45" href="22#ex_1.45">1.45</a></REF> 
    for a further generalization.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-3" href="22#footnote-link-3">[3] </a><FOOTNOTE>Elementary 
    calculus books usually describe Newton's
    method in terms of the sequence of approximations
    $x_{n+1}=x_n-g(x_n)/Dg(x_n)$.  Having language for talking about
    processes and using the idea of fixed points simplifies the description
    of the method.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-4" href="22#footnote-link-4">[4] </a><FOOTNOTE>Newton's 
    method does not always converge to an answer, but
    it can be shown that in favorable cases each iteration doubles the
    number-of-digits accuracy of the approximation to the solution.
    In such cases, 
    
    
    Newton's method will converge much more
    rapidly than the half-interval method.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-5" href="22#footnote-link-5">[5] </a><FOOTNOTE>For finding square roots, 
    Newton's method converges rapidly to the
    correct solution from any starting point.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-6" href="22#footnote-link-6">[6] </a><FOOTNOTE>The notion of first-class status of 
    programming-language 
    elements is due to the British computer scientist Christopher
    Strachey (1916–1975).</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-7" href="22#footnote-link-7">[7] </a><FOOTNOTE>We'll see
      examples of this after we introduce data structures in chapter 2.</FOOTNOTE>
</div>
<div class="footnote">
<a class="footnote-number" id="footnote-8" href="22#footnote-link-8">[8] </a><FOOTNOTE>The major implementation cost of first-class
    functions
    is that allowing
    functions
    to be returned as values
    requires reserving storage for a
    
      
      function's free names
    
    even while the
    function
    is not executing.  
    
      
      In the JavaScript implementation we will
      study in section <REF NAME="sec:mc-eval"><a class="superscript" id="1.3.4-sec-link-4.1" href="73">4.1</a></REF>, these names are stored in the function
      
      's environment.</FOOTNOTE>
</div></SUBSECTION></div>
    </div>

    <div class="nav">

        <button type="button" class="btn btn-secondary" style="background-color: #fff;">
          <a href="21">&lt; Previous</a>
        </button>

    <div style="flex-grow: 1;"></div>
    
        <button type="button" class="btn btn-secondary" style="background-color: #fff;">
          <a class="scroll-next" href="23">Next &gt;</a>
        </button>


  </div>
  <div class="chapter_sign">
        1.3.4 
    Functions
    as Returned Values
  
    </div>
  <script>
//<![CDATA[
var chapter_id = 22;
//]]>
</script>
  <div class="next-page"></div>
</div>

     </div><!-- /.container -->


     <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
     -->
   </body>
</html>
