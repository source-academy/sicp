[{"id":"/sicpjs/5.1.1","tag":"TITLE","body":"5.1.1  \n    A Language for Describing Register Machines"},{"tag":"TEXT","id":"#p1","child":[{"body":"\n    Data-path and controller diagrams are adequate for representing simple\n    machines such as GCD, but they are unwieldy for describing large\n    machines such as a\n    JavaScript\n    interpreter.  To make it possible to deal with complex machines, we will\n    create a language that presents, in textual form, all the\n    information given by the data-path and controller\n    diagrams. We will start with a notation that directly\n    mirrors the diagrams.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p2","child":[{"body":"\n    We define the data paths of a machine by describing the registers and\n    the operations.  To describe a register, we give it a name\n    and specify the buttons that control assignment to it.  We give each\n    of these buttons a name and specify the source of the data that enters\n    the register under the button's control.  (The source is a register,\n    a constant, or an operation.) To describe an operation, we give\n    it a name and specify its inputs (registers or constants).\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p3","child":[{"body":"\n    We define the controller of a machine as a sequence of \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"instructions","tag":"#text"}]},{"body":" together with \n      ","tag":"#text"},{"tag":"EM","child":[{"body":"labels","tag":"#text"}]},{"body":" that identify\n      ","tag":"#text"},{"tag":"EM","child":[{"body":"entry points","tag":"#text"}]},{"body":" in the sequence. An instruction is one of the following:\n      ","tag":"#text"},{"tag":"UL","child":[{"tag":"LI","child":[{"body":"\n\t  The name of a data-path button to push to assign a value to\n\t  a register.  (This corresponds to a box in the controller diagram.)\n\t","tag":"#text"}]},{"tag":"LI","child":[{"body":"\n\t  A\n\t  ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"test"},{"body":"\n\t  instruction, which performs a\n\t  specified test.\n\t","tag":"#text"}]},{"tag":"LI","child":[{"body":"\n\t  A\n\t  \n\t  conditional branch (","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"branch"},{"body":" instruction)\n\t  to a\tlocation indicated by a controller label, based on the result of\n\t  the previous test.  (The test and branch together correspond to a\n\t  diamond in the controller diagram.)  If the test is false, the\n\t  controller should continue with the next instruction in the sequence.\n\t  Otherwise, the controller should continue with the instruction after\n\t  the label.\n\t","tag":"#text"}]},{"tag":"LI","child":[{"body":"\n\t  An\t  \n\t  \n\t  unconditional branch\n\t  (","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"go_to"},{"body":"\n\t  instruction) naming a controller label at which to continue execution.\n\t","tag":"#text"}]}]},{"body":"\n\n    The machine starts at the beginning of the controller instruction\n    sequence and stops when execution reaches the end of the sequence.\n    Except when a branch changes the flow of control, instructions are\n    executed in the order in which they are listed.\n    ","tag":"#text"},{"tag":"FIGURE","snippet":{"tag":"SNIPPET","latex":false,"id":1,"eval":false,"body":"data_paths(\n  registers(\n    list(\n      pair(name(\"a\"),\n           buttons(name(\"a<-b\"), source(register(\"b\")))),\n      pair(name(\"b\"),\n           buttons(name(\"b<-t\"), source(register(\"t\")))),\n      pair(name(\"t\"),\n           buttons(name(\"t<-r\"), source(operation(\"rem\")))))),\n  operations(\n    list(\n      pair(name(\"rem\"),\n           inputs(register(\"a\"), register(\"b\"))),\n      pair(name(\"=\"),\n           inputs(register(\"b\"), constant(0))))));\n\ncontroller(\n  list(\n    \"test_b\",                     // label\n      test(\"=\"),                  // test\n      branch(label(\"gcd_done\")),  // conditional branch\n      \"t<-r\",                     // button push\n      \"a<-b\",                     // button push\n      \"b<-t\",                     // button push\n      go_to(label(\"test_b\")),     // unconditional branch\n    \"gcd_done\"));                 // label"},"captionHref":"/sicpjs/5.1.1#fig-5.3","captionName":"Figure 5.3 ","captionBody":[{"body":"A specification of the GCD machine.","tag":"#text"}]}]},{"tag":"TEXT","id":"#p4","child":[{"body":"\n    Figure ","tag":"#text"},{"tag":"REF","body":"5.3","href":"/sicpjs/5.1.1#fig-5.3"},{"body":" shows the GCD machine\n    described in this way.  This example only hints at the generality of these\n    descriptions, since the GCD machine is a very simple case: Each register has\n    only one button, and each button and test is used only once in the\n    controller.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p5","child":[{"body":"\n    Unfortunately, it is difficult to read such a description.  In order\n    to understand the controller instructions we must constantly refer\n    back to the definitions of the button names and the operation names,\n    and to understand what the buttons do we may have to refer to the\n    definitions of the operation names.  We will thus transform our\n    notation to combine the information from the data-path and controller\n    descriptions so that we see it all together.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p6","child":[{"body":"\n    To obtain this form of description, we will replace the arbitrary\n    button and operation names by the definitions of their behavior.  That\n    is, instead of saying (in the controller) \"","tag":"#text"},{"body":"Push button\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"t<-r"},{"body":"\" and separately saying (in the\n    data paths) \"","tag":"#text"},{"body":"Button ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"t<-r"},{"body":" assigns the\n    value of the ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"rem"},{"body":" operation to register\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"t"},{"body":"\" and \"","tag":"#text"},{"body":"The\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"rem"},{"body":" operation's inputs are the contents\n    of registers\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"a"},{"body":" and ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"b"},{"body":",","tag":"#text"},{"body":"\"\n    we will say (in the controller) \"","tag":"#text"},{"body":"Push the button that assigns to\n    register ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"t"},{"body":" the value of the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"rem"},{"body":" operation on the contents of registers\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"a"},{"body":" and ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"b"},{"body":".","tag":"#text"},{"body":"\"\n    Similarly, instead of saying (in the controller) \"","tag":"#text"},{"body":"Perform the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"="},{"body":" test","tag":"#text"},{"body":"\" and separately saying (in the\n    data paths) \"","tag":"#text"},{"body":"The ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"="},{"body":" test operates on the\n    contents of register ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"b"},{"body":" and the\n    constant 0,","tag":"#text"},{"body":"\" we will say \"","tag":"#text"},{"body":"Perform the\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"="},{"body":" test on the\n    \n    contents of register ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"b"},{"body":" and the\n    constant 0.","tag":"#text"},{"body":"\"  We will omit the data-path description, leaving only\n    the controller sequence.  Thus, the GCD machine is described as follows:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":2,"eval":true,"prependLength":484,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEZMChsDMBXAOwGMAXASwHsjQSayAnKgGxYFNGAKAZ3YEcC7UuwCUoAN4BIbKDmhG7MgUa0WFHmS4AiekSasOjbQBpQfQcJJiA3NgC++YuWq09BtpwD6FoSK7uzJ6M4hKy8orKqqAAFuwAhgAmXGTxFCwBDEFGoqJ2jk6klDSgAOZKXoqlGmScXAC28SQxFETsZlVeRPH1YpLhcpEqtI3Nrew65WSV7NWanNqiXJ3dvXkOuIRFrqBkAJ4ADhOtmowELjShCkrDsQnJJ0znxUR5oAVbF2pUVADWBAcvAdGBR6rw9vUAEasMxUI6MeIvHihAZ0GiaUAAN3iLFAAF5QPEeDwqCRwVCYaA4ZxEa5kXZ5NcorQNF5iIl2HhxslsSxRKjGfIAPygTjMbg8CHQlhmbTEX5EKgAd1o1IRL1AAFpNYTiewoRxFgLBaAAFx3JIpNIZXm5fKbZwalg-f6AljxSHsDLuz0sHhmH1ero9PphRl6DG8-G6klkwMsYO9AMer301FDaKs9mc7lcW3GwUisVUbjxxPtUByogcrltRKgeNanVEvgG9hGk2C82pdJ5nHrD6OnaNX7sIEg+oUSiYsfsAAegM5XHnBzMoxabWTvuR-UZFDwoC4rIjqX0XhXy4XuV3nZPdGjJ-iZ5XXl5QkvB3WnaZty44jxAB8dAMvI9iin67CgPuh6smWF4rteYa3uiZBQUQmg8NGzp-ACXjxlw8b+g2KYJi++EIV+nYZrQf74kBjw8CBchgamkHQUePAzHMtSMOeC4fohBZouhqGMNGUxcTUdTruMHSzFJvEvlUAmUSa1GHv+QESe4whkDwyxvKiLEQTeJrFtwK6yvKioqqKC6KMSOz7EcTYxvqkKGqp7wbIUXygCOY5qrSNB8YueAfmuTQbhWhGwvCwXoSi4YoVSBxYS6uHAqCXBBS8oVeHCAlxTSSJeXe8RbJhBKNAcy50f58SjuOoJThQM75UuFYyZuxHbqIJhCd+Jq5a4+VBdW+kUUxP7RLRgGEgcBwsHsXitGy1acMtrSlF4ABW8TYjwJAggcWiDUN8hwpFtUHvN4X9YSlV2j5nwai2FClEQyzyfMvGrBWJIqNYSURDc0TqJoOjvZ9pjXNx3j-WYgOMMD9qvTs0NEFx5ZcJjq0iWcXwg4MYO0HElo9hkeOPITLzPY46MlHjb6zvx1ME88rhXOmpMWsklNWr27OnJzlz0w62wlAFXh40ujyRWMPWxalJV0mYBwkMTwkYqkjBTOJFRVApDRRbJMYfVjKwhkeInPclIlYjiQihdGzNO6ztWPGVKUs14Wz4kJrIjSFF6+whQkitLwdYy+S5hwuCvRVuqbFeqdL8t+5rS1lk7Th757hfHq4NYrMUkWmjLqXNQFIRd8h8NMOn6PputTGYvtbH+Xl10k2IiECZIa4Zdf2PavlvYkffWAPXBD6Z5gVE3emzyQZgC9pDC6fpQ92qAL1DlLjVjrUmgFzbmiJ2byvR0ReDuqU6ua-Pd56IkrUlASJ+NzQb8vOfZBeXYkHeKeULyv3fq8LW9sMTgLyv7aqR8CogNGrHcK5064YOEr-Vwl8eroMwRda+yD0Td1BsyDS9Va4ELkA3LwS99J33iA-LBEC-bEC7tNahvcnzTw1ivYeBDR5GXAnweejJzL-1lJCJIux2AYhpqLWg2o3JtkWNNRwg5Ja0C-pkasECrjqQhlobQX9YawK5jYby48nJyO-nov+X98YiyJvPdS5N+bWhSLYpxTwiaGU0X5aWkIESkBiGfeWJck69RTqARhzC55ULvByDEBJgk8LCckrQXtppAM4nBfimTBLfjvAxdKOE3QkQIuXZOpEFx4UqYU0hJNyHVzEQQ9iG99Bby4HEop1DOy0PoSvMwDEmkYOMqIqh-T5DcP7nwoenDBH4NAuokRkEpnyAkRE7Q0j6xpNCWhZxGplEtncp5dR+8tGgH2c0KpvoDG8yMToG5MRYbxjeAEjULyvCZK4N8hRLiqFuPuILDI-yOZ+MsZcvyrJUilHKIkPCNRMj1AODQXSa84heDhVrdSrIDhpG4PQVF6L9DiAAGTkr5iitFbQyX4jxJ-LFcKx6M1oMpf6DzyFPO0FUWGnLLGfJ2KyI2v1QoCUkDNFknE4UIqRZDSylY+UfIln5UVPF8rKQQpK4FFNPFTSsWy7Wp4tAsy5bcHlj59CwzNYK1VGpjwoSfNMeCV5XG81hUwuVTzFW6Cddagc9qdhWpdXUlmEqJBSupQLA1QqSj4U5Tqx5yLtDxn5SGFV1iSiwRIuK7Vka8Uyq9ewRFPqE6VjTZmo1+SKm+gjVG9xoKVJ2qzaqWqiaC3JshtoOE6a1gtqNcA1WId+L5p5uQ-FhKJWUqgkW+FJb5VaEbQhWUvbA2tpVmnEdgJCpwlCua6IjaBaNr3RRKtB823DpjnU8aiR9KnrdZ28hAsH2fgHRehqTVShUGxT+uWIlcFl23I-LWSTbHiR-WQH9vzsmolyfU304rGltLkCUkSVUGwZVrV6O5MSa0IZw40xZzTfyaQXnY2ozdhmHL0l5CZbEDwcUkmKi8yGNmoZSlUA20x1XSVNj1Xjik6nKSI0JKuZHBmbyoxrMwnTKPLyqHbUCayUOikYOKSRlZdllEg1QGjtMdgnL1Kouj0KNTft-bhvkSbuUpos1Bt5JFz1XPs9B2xXBXM+IM5cSV47bhHs8Z5gFdN-FBpKGi2qmgmi-FxbzKLJBfg6Ai2ojYRqDgEB4DEXgqQEvt3drF8h8XEvaHS5lxYfYWBCHXUa6WPADqznChE7qAMcu-BA8-TjsxuPMZ4ibUuSNWs+Oxv9f+SmSOzTI+x78pWstFdk4vKTCnZhjYwbM3hg9NbEcZEIhmH7pYOSg4ocJAHIlmzm6ABJqI7xcYJBJQTfWolFaG1bXoo2vLicocsmhC2ulUaqOrQqRWVs90njwsc8zNt7xHqyj9dWZzfVKAetQKa4ftjkoj99VyDslgmIpmzFqU3Y8ULDRTmO-JPceMN62FOIV03deQgLvYadHK5tVvbiD4R4BLPUY7F9TtK2qZuhKRFLvQNQk0DUBJOfc5ll8UbOTGNDq3de2qEvWeqfKl8NhtAEFNWjh1cKauaCAYGtMs3BCiFXorlRXmrTI1fcFEbrGncBHTLW+DjbrvxmrNYqprZJ2dkyOl4weo+nFGuVOSZi5cbaDB7BE7pHDYU1x9hgnsnGo4+y7-pn4LXN6f+ZBQLHPtPWcw6udLec7ASAEDgRezTytmtmAd2bmTsT74Dei3FHcQLebOWOLbBlBJtCY20OgyOiDZaNZO436Jfou8gfQd2Q4-fND-kZZWUxY-P3H28f+vnM+iG33bxdzWi-djL9G4PrTITmij7ruPpq3y99kBN7Po-TCF91yX0cS-jKh+ubvwugfzHE82f1f2ViHjPz71-3X20FR0AKGmAJ8Hq15xf35xa07xPwzgum-xXwASv15VsRxwQO-CQKJwa00xn3O0gK-3Px-y9gIJmy8EaEYFHF4igx8FaxIM7CQKYJYLYN-U4OizPioNa0-xwLoLwLXyH0UBnEYGmCew4P4IWC3323YDkIUMGyUPiFYO8CXFEMwJoIkOgIYL-0rBT1UI504C5xD1QPAMFzhBF1P1oP9z5yrAVGVBZBLxKD7wj2Mw8nbDZ3L0QUeH-joSyEMG8Fzx8x73IQJQoG4Ep0CEiN4miKIDMCIAIDYEDUHREnCP0GyCiO8K+gYNiIL0tFg12yuUp0r2r1rxKIHzKOiAFkqI3VoRqLnCrxr1Gk7giS2C1loRaJO36LLz8gBESERDHAYn-iIgb341DCuxSg1m63uxnxKxIBSzFzbyYRWJ+l6zWLiU2PkDvCK2jGax0CKyOI4wdkcLOPmJ0BviuKjRsPPCin-nqnaLyNqO6JCk7mb36Xln+OoQr06LqJ6LryBLNySIiOCC80UVG1N3N36TmP6xP0RKRIITiQ71y1SmRH6khJozTBj23wI1IgKL2Cs3LBGXQwK1uHiNLFzURkJKCL8nnCYAl1JP0mSOCDkmsDagWMrg9U4kyLYF0Q8ByC30UD5PhxFJlFAFlOwKGnNDZIRHIE5K4H+IFm5JyHRIIRmJqR3HmimzrjvDaDnBdQ4F6H0GjEbW1M4DGTrkLU4JBCIFKC4DNItP1F0kVIxLkBFClPYH5P1IJP6XpJNiajgnJPdLZPPEtIxRDN9OoVGV1MTIt3LlyATMZHNADKDLDOllCI9NjK9LJRTNTIwWTMzMwUIgdO-HsBZLen8I4DFMKMYEA1pOiBVI5MImbJSNLKRP1Lf0m0rJNHGMmJ8X0gYgNLbK219LxXQxnOmTrNGI1Fq1a1oioQ4FQlOIJFlOmk3NiQRF6GjF3NRDSwyzCWUO4CgXkDwEPMgilynXO1vIzS23Um0ESHRW0AuUZDSz3UvPXKEm3OpWfP7SEhAvvN2E8XArGTfI-LaC-KMlPI-Rmy4DnG5m-CArDLnGxJiyhW-Fgs-O-JvOQsKmvLkHg1lOy2iz6QugkW0H1FOj2HMFa1cmSzGXo1Uy2KgzSgJEbSBwXJoRYs-k8X4vwXUm4q20cG2yQuqKIFahxAoAAC8JgyLmLotjysiWBXzeZ3zCLEKfyP034eACUyBblehiQmEBSbdyFzK6tyhGDzzuCgCLtzyHcs45E7L7zYDksHcRQIs-w3L-IPLLKHLMtmCdC2CnLECXKwr-yfTaDbKQqzCSs-yIqVDqE-LUrdCrzArEr7LkrWh5L1BlKorSC0IiqlKVLAqJE8qKx3CbJ2UBAhAMRlFLjTNBTyEjKTLmhlzhwOdzzwrsrBCnt9D5icL2smiaIhzzc+C0qJRWsayhp3cZ4Fl-idsN01CNChCEtBDLyRCxq1KcTRcyFSNPsZqsq2CqKEtFrvxlqIcvdMF1qN1ZqhqOCit1yo0eUXqBC3quCVUjVZDOBNDhDtDsqPrDFCd1Cgbtrfhdq5q1FDUSLAR-ygd89oh3qUrkb4acjkKBqUaFq0baAMbvqFh6y+qmp7sO1UR9z6FoxtAAAqYgTGEtemhCgyq5LqxEMy4K8oVS9SWqggqYUqng4SeTHgXKnmryofBuYWk0EUFmShUWreaMFmO1ahZU9TEsBoSWqyIgDw2yRQSwFqnUNQ+GYwdqk66ITm0ymIXq+NLDLgUcPYNeD0DgUDTregRgesAkFsUkR29gZ2yC3sVIAIlbJ07MWsEtb6T2xIeKuW0ACO7kKAzxKUksWOtGD9X2skJ23ktO7vPzTMYUzS6OvOuOwsBOjaSOxIM-JqnEf2wOxtRtVOr2vEsuxkEUJuqvUus-LO+ul23sZuu9cWDdOTbpQTdsxqs2yYJQFLKo8nH7MWhHBSPLSrKy8bSe42OAmepYW1MzcmscNoJUcK0uACrY5Y3XMce7dYp4u8OJO4imvYuobQQ472B2IC1c6LP8PcpQXYLFNInwJqqwCCk8xkfcsgLFW4gkJ5HlQqygBS5SmG2GVpDG2BigeBwIlbfcwTbFV2iC6B5PDYkDAMFNQ4swXpLyI1HEZ0EgMcymjNVTeDROusXGYkP2pk7BkOt2mioaDh3B6MMMp5Jk0242TlfEssnhx+9g3B9ilTY0zZTW7gJk7QeoLIygJaJimsbkOGBSJ46S-CnSwTQkNgUkSYxINm0CGSvybCV0HrOoKm4pH2HEV2VhskdhyRnB0O7SidTiJhqO-MDKtTDTJR6yTw7R36DsAhc0RnG0fsC2uQI1b42oU+5CB2UpW7Be7pVa78Ci4u0ZVSjq24XS+CyS2R-BDoro+orgRtPJr+sS3mRJlSyS-S4ijmjQbqrLWq1So1KLeQ5Ji6STX7ZeVvcBqY4ogBywEQG69SBp2p2ssTXmAW5KnpsgWW8u5ZgK9WoKiy-K2Ax4KhuErXXwIB1Z9uhefgRWkZg5vKI5kQaMCwNWyJrZzyggqhkx2oWx4wXyox6h2hyRiW7ZqWysO7SRk54UTDcpD5-555gqkSfZx4r5yBmuX+wKA4DDeIRaYQfmCB1FrvFVTZxZ2Ay4r5orKFpK2A+FgJy5xw6qhR7WgF3W-Wxqo21CZRZrJ4qSy22ga2nqvew+Jqc47B-6IiRwswO0kIDrB2Zre+g+9gI+84ihksV425QVkMeqB3c44fYxmh95wTcrFVtYJvTBfVuRLyDVvZtgJBK3crRw01+47Qc1hMf+m56wCJoaFh1sAInsnk9AsOhZ+Yu2om3WLQZrCe9Ai4oN2ekew2dxoZGfY10N0eqjYFqeuN9x0RjOq5WhbB2Ng641leqreeAZxe5N42VNs28sB6Xegp6IIp9sMeO8UoEgRFMVgObAMVjUuQJ5VEExbxSEUwY0HRJ5QqbQPERYdHZ5Md41Z1LgAABlyDEcFBeSs0mCbZ+U-NyFLMxh0BWeIchmHcUHqEneUmHyPdmAnfnc3cck+ihhJzPZ2UWAXcZC3fvfHZMQfdLNc2XZ7dPj7Y3e7cbcRTgowdwDsBkAbdXalbxFRGlnOKEh5XiFhhfY3zHbg+RR5QPaQfiDMEhDI3iFAAAFJrlH3CEU1R2zBcZsPcOr8cPiP7ZxTvBnWJgAP8j6OQh1hsAs2Y3Ft9JmO1iEOzAAAmGdgANnWE4-LaGV44OqQ4ABY527B1mpPS51gS2xVJOIPpOEO8ggA","body":"controller(\n  list(\n    \"test_b\",\n      test(list(op(\"=\"), reg(\"b\"), constant(0))),\n      branch(label(\"gcd_done\")),\n      assign(\"t\", list(op(\"rem\"), reg(\"a\"), reg(\"b\"))),\n      assign(\"a\", reg(\"b\")),\n      assign(\"b\", reg(\"t\")),\n      go_to(label(\"test_b\")),\n    \"gcd_done\")) "}]},{"tag":"TEXT","id":"#p7","child":[{"body":"\n    This form of description is easier to read than the kind illustrated\n    in figure ","tag":"#text"},{"tag":"REF","body":"5.3","href":"/sicpjs/5.1.1#fig-5.3"},{"body":", but it also has disadvantages:\n    ","tag":"#text"},{"tag":"UL","child":[{"tag":"LI","child":[{"body":"It is more verbose for large machines,\n      because complete descriptions of the data-path elements are repeated\n      whenever the elements are mentioned in the controller instruction\n      sequence.  (This is not a problem in the GCD example, because each\n      operation and button is used only once.)  Moreover, repeating the\n      data-path descriptions obscures the actual data-path structure of the\n      machine; it is not obvious for a large machine how many registers,\n      operations, and buttons there are and how they are interconnected.\n      ","tag":"#text"}]},{"tag":"LI","child":[{"body":"\n\tBecause the controller instructions in a machine definition look like\n\tJavaScript\n\texpressions, it is easy to forget that they are\n\tnot arbitrary\n\tJavaScript\n\texpressions.  They can notate only legal machine operations.  For\n\texample, operations can operate directly only on constants and the\n\tcontents of registers, not on the results of other operations.\n      ","tag":"#text"}]}]},{"body":"\n\n    In spite of these disadvantages, we will use this register-machine\n    language throughout this chapter, because we will be more concerned with\n    understanding controllers than with understanding the elements and\n    connections in data paths.  We should keep in mind,\n    however, that data-path design is crucial in designing real machines.\n  ","tag":"#text"}]},{"tag":"EXERCISE","title":"Exercise 5.2","id":"#ex-5.2","child":[{"body":"\n    Use the register-machine language to describe the\n    \n    iterative factorial\n    machine of exercise ","tag":"#text"},{"tag":"REF","body":"5.1","href":"/sicpjs/5.1#ex-5.1"},{"body":".\n    ","tag":"#text"}]},{"tag":"SUBHEADING","id":"#h1","child":[{"body":"Actions","tag":"#text"}]},{"tag":"TEXT","id":"#p8","child":[{"body":"\n    Let us modify the GCD machine so that we can type in the numbers\n    whose GCD we want and get the answer\n    printed.\n    We will not discuss how to make a machine that can read and print,\n    but will assume (as we do when we use\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"prompt"},{"body":"\n    and ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"display"},{"body":" in\n    JavaScript)\n    that they are available as primitive\n    operations.","tag":"#text"},{"tag":"FOOTNOTE_REF","id":"#footnote-link-1","body":"1","href":"/sicpjs/5.1.1#footnote-1"}]},{"tag":"TEXT","id":"#p9","child":[{"body":"\n\tThe operation\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"prompt"},{"body":"\n    is like the operations we have been using in that it produces a value that\n    can be stored in a register.  But\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"prompt"},{"body":"\n    does not take inputs from any registers; its value depends on\n    something that happens outside the parts of the machine we are\n    designing.  We will allow our machine's operations to have such\n    behavior, and thus will draw and notate the use of\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"prompt"},{"body":"\n    just as we do any other operation that computes a value.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p10","child":[{"body":"\n\tThe operation\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"display"},{"body":",\n      \n    on the other hand, differs from the operations we have\n    been using in a fundamental way: It does not produce an output value\n    to be stored in a register.  Though it has an effect, this effect is\n    not on a part of the machine we are designing.  We will refer to this\n    kind of operation as an ","tag":"#text"},{"tag":"EM","child":[{"body":"action","tag":"#text"}]},{"body":".  We will represent an action in\n    a data-path diagram just as we represent an operation that computes a\n    value—as a trapezoid that contains the name of the action.\n    Arrows point to the action box from any inputs (registers or\n    constants).  We also associate a button with the action.  Pushing the\n    button makes the action happen.  To make a controller push an action\n    button we use a new kind of instruction called\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"perform"},{"body":".  Thus,\n    the action of printing\n    the contents of register\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"a"},{"body":" is represented\n    in a controller sequence by the instruction\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":3,"eval":false,"body":"perform(list(op(\"display\"), reg(\"a\")))"}]},{"tag":"TEXT","id":"#p11","child":[{"body":"\n\tFigure ","tag":"#text"},{"tag":"REF","body":"5.4","href":"/sicpjs/5.1.1#fig-5.4"},{"body":"\n    shows the data paths and controller for\n    the new GCD machine.  Instead of having the machine stop after printing\n    the answer, we have made it start over, so that it repeatedly\n    reads a pair of numbers, computes their GCD, and prints\n    the result.\n    This structure is like the driver loops we used in the interpreters of\n    chapter ","tag":"#text"},{"tag":"REF","body":"4","href":"/sicpjs/4"},{"body":".\n    ","tag":"#text"},{"tag":"FIGURE","scale":"70%","src":"img_javascript/Fig5.4c.std.svg","id":"#fig-5.4","snippet":{"tag":"SNIPPET","latex":false,"id":4,"eval":true,"prependLength":484,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEZMChsDMBXAOwGMAXASwHsjQSayAnKgGxYFNGAKAZ3YEcC7UuwCUoAN4BIbKDmhG7MgUa0WFHmS4AiekSasOjbQBpQfQcJJiA3NgC++YuWq09BtpwD6FoSK7uzJ6M4hKy8orKqqAAFuwAhgAmXGTxFCwBDEFGoqJ2jk6klDSgAOZKXoqlGmScXAC28SQxFETsZlVeRPH1YpLhcpEqtI3Nrew65WSV7NWanNqiXJ3dvXkOuIRFrqBkAJ4ADhOtmowELjShCkrDsQnJJ0znxUR5oAVbF2pUVADWBAcvAdGBR6rw9vUAEasMxUI6MeIvHihAZ0GiaUAAN3iLFAAF5QPEeDwqCRwVCYaA4ZxEa5kXZ5NcorQNF5iIl2HhxslsSxRKjGfIAPygTjMbg8CHQlhmbTEX5EKgAd1o1IRL1AAFpNYTiewoRxFgLBaAAFx3JIpNIZXm5fKbZwalg-f6AljxSHsDLuz0sHhmH1ero9PphRl6DG8-G6klkwMsYO9AMer301FDaKs9mc7lcW3GwUisVUbjxxPtUByogcrltRKgeNanVEvgG9hGk2C82pdJ5nHrD6OnaNX7sIEg+oUSiYsfsAAegM5XHnBzMoxabWTvuR-UZFDwoC4rIjqX0XhXy4XuV3nZPdGjJ-iZ5XXl5QkvB3WnaZty44jxAB8dAMvI9iin67CgPuh6smWF4rteYa3uiZBQUQmg8NGzp-ACXjxlw8b+g2KYJi++EIV+nYZrQf74kBjw8CBchgamkHQUePAzHMtSMOeC4fohBZouhqGMNGUxcTUdTruMHSzFJvEvlUAmUSa1GHv+QESe4whkDwyxvKiLEQTeJrFtwK6yvKioqqKC6KMSOz7EcTYxvqkKGqp7wbIUXygCOY5qrSNB8YueAfmuTQbhWhGwvCwXoSi4YoVSBxYS6uHAqCXBBS8oVeHCAlxTSSJeXe8RbJhBKNAcy50f58SjuOoJThQM75UuFYyZuxHbqIJhCd+Jq5a4+VBdW+kUUxP7RLRgGEgcBwsHsXitGy1acMtrSlF4ABW8TYjwJAggcWiDUN8hwpFtUHvN4X9YSlV2j5nwai2FClEQyzyfMvGrBWJIqNYSURDc0TqJoOjvZ9pjXNx3j-WYgOMMD9qvTs0NEFx5ZcJjq0iWcXwg4MYO0HElo9hkeOPITLzPY46MlHjb6zvx1ME88rhXOmpMWsklNWr27OnJzlz0w62wlAFXh40ujyRWMPWxalJV0mYBwkMTwkYqkjBTOJFRVApDRRbJMYfVjKwhkeInPclIlYjiQihdGzNO6ztWPGVKUs14Wz4kJrIjSFF6+whQkitLwdYy+S5hwuCvRVuqbFeqdL8t+5rS1lk7Th757hfHq4NYrMUkWmjLqXNQFIRd8h8NMOn6PputTGYvtbH+Xl10k2IiECZIa4Zdf2PavlvYkffWAPXBD6Z5gVE3emzyQZgC9pDC6fpQ92qAL1DlLjVjrUmgFzbmiJ2byvR0ReDuqU6ua-Pd56IkrUlASJ+NzQb8vOfZBeXYkHeKeULyv3fq8LW9sMTgLyv7aqR8CogNGrHcK5064YOEr-Vwl8eroMwRda+yD0Td1BsyDS9Va4ELkA3LwS99J33iA-LBEC-bEC7tNahvcnzTw1ivYeBDR5GXAnweejJzL-1lJCJIux2AYhpqLWg2o3JtkWNNRwg5Ja0C-pkasECrjqQhlobQX9YawK5jYby48nJyO-nov+X98YiyJvPdS5N+bWhSLYpxTwiaGU0X5aWkIESkBiGfeWJck69RTqARhzC55ULvByDEBJgk8LCckrQXtppAM4nBfimTBLfjvAxdKOE3QkQIuXZOpEFx4UqYU0hJNyHVzEQQ9iG99Bby4HEop1DOy0PoSvMwDEmkYOMqIqh-T5DcP7nwoenDBH4NAuokRkEpnyAkRE7Q0j6xpNCWhZxGplEtncp5dR+8tGgH2c0KpvoDG8yMToG5MRYbxjeAEjULyvCZK4N8hRLiqFuPuILDI-yOZ+MsZcvyrJUilHKIkPCNRMj1AODQXSa84heDhVrdSrIDhpG4PQVF6L9DiAAGTkr5iitFbQyX4jxJ-LFcKx6M1oMpf6DzyFPO0FUWGnLLGfJ2KyI2v1QoCUkDNFknE4UIqRZDSylY+UfIln5UVPF8rKQQpK4FFNPFTSsWy7Wp4tAsy5bcHlj59CwzNYK1VGpjwoSfNMeCV5XG81hUwuVTzFW6Cddagc9qdhWpdXUlmEqJBSupQLA1QqSj4U5Tqx5yLtDxn5SGFV1iSiwRIuK7Vka8Uyq9ewRFPqE6VjTZmo1+SKm+gjVG9xoKVJ2qzaqWqiaC3JshtoOE6a1gtqNcA1WId+L5p5uQ-FhKJWUqgkW+FJb5VaEbQhWUvbA2tpVmnEdgJCpwlCua6IjaBaNr3RRKtB823DpjnU8aiR9KnrdZ28hAsH2fgHRehqTVShUGxT+uWIlcFl23I-LWSTbHiR-WQH9vzsmolyfU304rGltLkCUkSVUGwZVrV6O5MSa0IZw40xZzTfyaQXnY2ozdhmHL0l5CZbEDwcUkmKi8yGNmoZSlUA20x1XSVNj1Xjik6nKSI0JKuZHBmbyoxrMwnTKPLyqHbUCayUOikYOKSRlZdllEg1QGjtMdgnL1Kouj0KNTft-bhvkSbuUpos1Bt5JFz1XPs9B2xXBXM+IM5cSV47bhHs8Z5gFdN-FBpKGi2qmgmi-FxbzKLJBfg6Ai2ojYRqDgEB4DEXgqQEvt3drF8h8XEvaHS5lxYfYWBCHXUa6WPADqznChE7qAMcu-BA8-TjsxuPMZ4ibUuSNWs+Oxv9f+SmSOzTI+x78pWstFdk4vKTCnZhjYwbM3hg9NbEcZEIhmH7pYOSg4ocJAHIlmzm6ABJqI7xcYJBJQTfWolFaG1bXoo2vLicocsmhC2ulUaqOrQqRWVs90njwsc8zNt7xHqyj9dWZzfVKAetQKa4ftjkoj99VyDslgmIpmzFqU3Y8ULDRTmO-JPceMN62FOIV03deQgLvYadHK5tVvbiD4R4BLPUY7F9TtK2qZuhKRFLvQNQk0DUBJOfc5ll8UbOTGNDq3de2qEvWeqfKl8NhtAEFNWjh1cKauaCAYGtMs3BCiFXorlRXmrTI1fcFEbrGncBHTLW+DjbrvxmrNYqprZJ2dkyOl4weo+nFGuVOSZi5cbaDB7BE7pHDYU1x9hgnsnGo4+y7-pn4LXN6f+ZBQLHPtPWcw6udLec7ASAEDgRezTytmtmAd2bmTsT74Dei3FHcQLebOWOLbBlBJtCY20OgyOiDZaNZO436Jfou8gfQd2Q4-fND-kZZWUxY-P3H28f+vnM+iG33bxdzWi-djL9G4PrTITmij7ruPpq3y99kBN7Po-TCF91yX0cS-jKh+ubvwugfzHE82f1f2ViHjPz71-3X20FR0AKGmAJ8Hq15xf35xa07xPwzgum-xXwASv15VsRxwQO-CQKJwa00xn3O0gK-3Px-y9gIJmy8EaEYFHF4igx8FaxIM7CQKYJYLYN-U4OizPioNa0-xwLoLwLXyH0UBnEYGmCew4P4IWC3323YDkIUMGyUPiFYO8CXFEMwJoIkOgIYL-0rBT1UI504C5xD1QPAMFzhBF1P1oP9z5yrAVGVBZBLxKD7wj2Mw8nbDZ3L0QUeH-joSyEMG8Fzx8x73IQJQoG4Ep0CEiN4miKIDMCIAIDYEDUHREnCP0GyCiO8K+gYNiIL0tFg12yuUp0r2r1rxKIHzKOiAFkqI3VoRqLnCrxr1Gk7giS2C1loRaJO36LLz8gBESERDHAYn-iIgb341DCuxSg1m63uxnxKxIBSzFzbyYRWJ+l6zWLiU2PkDvCK2jGax0CKyOI4wdkcLOPmJ0BviuKjRsPPCin-nqnaLyNqO6JCk7mb36Xln+OoQr06LqJ6LryBLNySIiOCC80UVG1N3N36TmP6xP0RKRIITiQ71y1SmRH6khJozTBj23wI1IgKL2Cs3LBGXQwK1uHiNLFzURkJKCL8nnCYAl1JP0mSOCDkmsDagWMrg9U4kyLYF0Q8ByC30UD5PhxFJlFAFlOwKGnNDZIRHIE5K4H+IFm5JyHRIIRmJqR3HmimzrjvDaDnBdQ4F6H0GjEbW1M4DGTrkLU4JBCIFKC4DNItP1F0kVIxLkBFClPYH5P1IJP6XpJNiajgnJPdLZPPEtIxRDN9OoVGV1MTIt3LlyATMZHNADKDLDOllCI9NjK9LJRTNTIwWTMzMwUIgdO-HsBZLen8I4DFMKMYEA1pOiBVI5MImbJSNLKRP1Lf0m0rJNHGMmJ8X0gYgNLbK219LxXQxnOmTrNGI1Fq1a1oioQ4FQlOIJFlOmk3NiQRF6GjF3NRDSwyzCWUO4CgXkDwEPMgilynXO1vIzS23Um0ESHRW0AuUZDSz3UvPXKEm3OpWfP7SEhAvvN2E8XArGTfI-LaC-KMlPI-Rmy4DnG5m-CArDLnGxJiyhW-Fgs-O-JvOQsKmvLkHg1lOy2iz6QugkW0H1FOj2HMFa1cmSzGXo1Uy2KgzSgJEbSBwXJoRYs-k8X4vwXUm4q20cG2yQuqKIFahxAoAAC8JgyLmLotjysiWBXzeZ3zCLEKfyP034eACUyBblehiQmEBSbdyFzK6tyhGDzzuCgCLtzyHcs45E7L7zYDksHcRQIs-w3L-IPLLKHLMtmCdC2CnLECXKwr-yfTaDbKQqzCSs-yIqVDqE-LUrdCrzArEr7LkrWh5L1BlKorSC0IiqlKVLAqJE8qKx3CbJ2UBAhAMRlFLjTNBTyEjKTLmhlzhwOdzzwrsrBCnt9D5icL2smiaIhzzc+C0qJRWsayhp3cZ4Fl-idsN01CNChCEtBDLyRCxq1KcTRcyFSNPsZqsq2CqKEtFrvxlqIcvdMF1qN1ZqhqOCit1yo0eUXqBC3quCVUjVZDOBNDhDtDsqPrDFCd1Cgbtrfhdq5q1FDUSLAR-ygd89oh3qUrkb4acjkKBqUaFq0baAMbvqFh6y+qmp7sO1UR9z6FoxtAAAqYgTGEtemhCgyq5LqxEMy4K8oVS9SWqggqYUqng4SeTHgXKnmryofBuYWk0EUFmShUWreaMFmO1ahZU9TEsBoSWqyIgDw2yRQSwFqnUNQ+GYwdqk66ITm0ymIXq+NLDLgUcPYNeD0DgUDTregRgesAkFsUkR29gZ2yC3sVIAIlbJ07MWsEtb6T2xIeKuW0ACO7kKAzxKUksWOtGD9X2skJ23ktO7vPzTMYUzS6OvOuOwsBOjaSOxIM-JqnEf2wOxtRtVOr2vEsuxkEUJuqvUus-LO+ul23sZuu9cWDdOTbpQTdsxqs2yYJQFLKo8nH7MWhHBSPLSrKy8bSe42OAmepYW1MzcmscNoJUcK0uACrY5Y3XMce7dYp4u8OJO4imvYuobQQ472B2IC1c6LP8PcpQXYLFNInwJqqwCCk8xkfcsgLFW4gkJ5HlQqygBS5SmG2GVpDG2BigeBwIlbfcwTbFV2iC6B5PDYkDAMFNQ4swXpLyI1HEZ0EgMcymjNVTeDROusXGYkP2pk7BkOt2mioaDh3B6MMMp5Jk0242TlfEssnhx+9g3B9ilTY0zZTW7gJk7QeoLIygJaJimsbkOGBSJ46S-CnSwTQkNgUkSYxINm0CGSvybCV0HrOoKm4pH2HEV2VhskdhyRnB0O7SidTiJhqO-MDKtTDTJR6yTw7R36DsAhc0RnG0fsC2uQI1b42oU+5CB2UpW7Be7pVa78Ci4u0ZVSjq24XS+CyS2R-BDoro+orgRtPJr+sS3mRJlSyS-S4ijmjQbqrLWq1So1KLeQ5Ji6STX7ZeVvcBqY4ogBywEQG69SBp2p2ssTXmAW5KnpsgWW8u5ZgK9WoKiy-K2Ax4KhuErXXwIB1Z9uhefgRWkZg5vKI5kQaMCwNWyJrZzyggqhkx2oWx4wXyox6h2hyRiW7ZqWysO7SRk54UTDcpD5-555gqkSfZx4r5yBmuX+wKA4DDeIRaYQfmCB1FrvFVTZxZ2Ay4r5orKFpK2A+FgJy5xw6qhR7WgF3W-Wxqo21CZRZrJ4qSy22ga2nqvew+Jqc47B-6IiRwswO0kIDrB2Zre+g+9gI+84ihksV425QVkMeqB3c44fYxmh95wTcrFVtYJvTBfVuRLyDVvZtgJBK3crRw01+47Qc1hMf+m56wCJoaFh1sAInsnk9AsOhZ+Yu2om3WLQZrCe9Ai4oN2ekew2dxoZGfY10N0eqjYFqeuN9x0RjOq5WhbB2Ng641leqreeAZxe5N42VNs28sB6Xegp6IIp9sMeO8UoEgRFJUKcMJYEKgVFCjFsgObAMVjUuQJ5E0VEbQRt0tH4A4UwY0TGKGN5ZFQqErZgTtxYXIUs6dnZWdyGed9tpd3IMR+QExbxSESdk0HRJ5edvERYdHZ5S941Z1LgAABl3dLJeSs0mCbZ+U-JXancck+h0BWeIc3dqkIPqBveUmH1A9mGvafe-Z4AthnavfXa-ZNDXaPYQ5WaQ8FFc1fYPdPiPYw7kBHffbgrR2NDjwIjnaA66vdD2Ag7dPA+g5NCw-wkI7HbXV3dwDsCkCHYbffZbfAfHA7dOmPuigDkZGlnOKEh5XiFhnXdlHQ77KT0hh5UUBA7MFxjMEhDI3iFAAAFJrk9264eUL21P4gNOtOr9NOFPBQvrF3TokGyMCVGA+B8YtBt3TodBdJOB5SCAoROBTQb2MBH2DPCEU0qP4gaOzAwu9h8PBQxXxm-BrAPNePW2BPO38jxT7T1hsB1nR2vA+O23bPpgQ2bAgA","body":"controller(\n  list(      \n    \"gcd_loop\",\n      assign(\"a\", list(op(\"prompt\"))),\n      assign(\"b\", list(op(\"prompt\"))),\n    \"test_b\",\n      test(list(op(\"=\"), reg(\"b\"), constant(0))),\n      branch(label(\"gcd_done\")),\n      assign(\"t\", list(op(\"rem\"), reg(\"a\"), reg(\"b\"))),\n      assign(\"a\", reg(\"b\")),\n      assign(\"b\", reg(\"t\")),\n      go_to(label(\"test_b\")),\n    \"gcd_done\",\n      perform(list(op(\"display\"), reg(\"a\"))),\n      go_to(label(\"gcd_loop\")))) "},"captionHref":"/sicpjs/5.1.1#fig-5.4","captionName":"Figure 5.4 ","captionBody":[{"body":"A GCD machine that reads inputs and prints results.","tag":"#text"}]}]},{"tag":"DISPLAYFOOTNOTE","id":"#footnote-1","count":1,"href":"/sicpjs/5.1.1#footnote-link-1","child":[{"body":"\n        This assumption glosses over a great deal of complexity. Implementation of reading \n        and printing requires significant effort, for example to handle character encodings\n        for different languages. \n      ","tag":"#text"}]}]